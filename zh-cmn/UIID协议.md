# UIID 协议（基础）

**说明：部分复杂的设备类型不开放授权，所以不会在文档中列出，基础控制指令内容会陆续补充，请耐心等待。此外，付费 APPID 用户才可以得到详细完整的控制协议文档，咨询具体内容可以邮件联系我们 bd@coolkit.cn**

## 主流设备类型清单（UIID 清单）

文档陆续发布更新，请耐心等待。

<div class="table-center">

|                   UI                   |                     描述                      | UIID |
| :------------------------------------: | :-------------------------------------------: | :--: |
|               单通道插座               |                  单通道插座                   |  1   |
|               双通道插座               |                  双通道插座                   |  2   |
|               三通道插座               |                  三通道插座                   |  3   |
|               四通道插座               |                  四通道插座                   |  4   |
|           功率检测单通道插座           |              功率检测单通道插座               |  5   |
|               单通道开关               |                  单通道开关                   |  6   |
|               双通道开关               |                  双通道开关                   |  7   |
|               三通道开关               |                  三通道开关                   |  8   |
|               四通道开关               |                  四通道开关                   |  9   |
|              开关改装模块              |                 开关改装模块                  |  14  |
|             恒温恒湿改装件             |                恒温恒湿改装件                 |  15  |
|             冷暖双色调光灯             |                冷暖双色调光灯                 |  16  |
|            三档摇头智能风扇            |               三档摇头智能风扇                |  17  |
|               传感器中心               |   带温度 湿度 亮度 噪音 空气质量传感器数据    |  18  |
|               三档加湿器               |                  三档加湿器                   |  19  |
|             RGB 五色球泡灯             |                RGB 五色球泡灯                 |  22  |
|                   -                    |                       -                       |  23  |
|             GSM/4G 单通道开关             |                GSM/4G 单通道开关                 |  24  |
|                 香薰机                 |                    香薰机                     |  25  |
|          GSM/4G 单通道开关包流量          |             GSM/4G 单通道开关包流量              |  27  |
|                RFBridge                |           WiFi 转 RF 无线遥控器 UI            |  28  |
|           GSM/4G 双通道开关插座           |              GSM/4G 双通道开关插座               |  29  |
|           GSM/4G 四通道开关插座           |              GSM/4G 四通道开关插座               |  31  |
|          功率检测插座过载告警          |        功率检测插座 可设置过载保护告警        |  32  |
|             RGB 灯带控制器             |       基于透传模块协议的 RGB 灯带控制器       |  33  |
|               智能风扇灯               |       3 档风扇灯 - 基于 4 通道开关协议        |  34  |
|                   -                    |                       -                       |  35  |
|              单路调光开关              | 基于 RGB 灯带控制器透传模块协议的单路调光开关 |  36  |
|                   -                    |                       -                       |  38  |
|               单路调光灯               |       基于 PSF-BLD 模块协议的单色调光灯       |  44  |
|             筒灯及新吸顶灯             |                筒灯及新吸顶灯                 |  45  |
|            调光调色温吸顶灯            |               调光调色温吸顶灯                |  52  |
|             RGB 四色球泡灯             |                RGB 四色球泡灯                 |  56  |
|               单色球泡灯               |                  单色球泡灯                   |  57  |
|                律动灯带                |                   律动灯带                    |  59  |
|               智能路由器               |                  智能路由器                   |  61  |
|                   -                    |                       -                       |  62  |
|                   -                    |                       -                       |  63  |
|                   -                    |                       -                       |  65  |
|              Zigbee 网关               |                  Zigbee 网关                  |  66  |
|               -               |                  -                   |  68  |
|               -               |                  -                   |  69  |
|              -              |                 -                  |  76  |
|          单通道插座-多通道版           |              单通道插座-多通道版              |  77  |
|          单通道开关-多通道版           |              单通道开关-多通道版              |  78  |
|       GSM/4G 单通道插座-无流量版本        |           GSM/4G 单通道插座-无流量版本           |  81  |
|       GSM/4G 双通道插座-无流量版本        |           GSM/4G 双通道插座-无流量版本           |  82  |
|       GSM/4G 三通道插座-无流量版本        |           GSM/4G 三通道插座-无流量版本           |  83  |
|       GSM/4G 四通道插座-无流量版本        |           GSM/4G 四通道插座-无流量版本           |  84  |
|                   -                    |                       -                       |  86  |
|                   -                    |                       -                       |  87  |
|                   -                    |                       -                       |  88  |
|              GSM-RFBridge              |               GSM 版本 RFBridge               |  90  |
|               智能卷帘门               |                  智能卷帘门                   |  91  |
|                   -                    |                       -                       |  92  |
|              RF 门铃网关               |                  RF 门铃网关                  |  98  |
|               WiFi 门磁                |                   WiFi 门磁                   | 102  |
|       双色冷暖灯\_支持随调及场景       |          双色冷暖灯\_支持随调及场景           | 103  |
|       RGB 五色灯\_支持随调及场景       |          RGB 五色灯\_支持随调及场景           | 104  |
|      GSM/4G 单通道插座 - 多通道协议       |  GSM/4G 单通道插座 - 多通道协议 含流量设备使用   | 107  |
|         易微联 WiFi 转红外网关         |            易微联 WiFi 转红外网关             | 109  |
|            GSM/4G 电量统计插座            |                    GSB-D67                    | 110  |
|          单通道开关微波雷达版          |             单通道开关微波雷达版              | 112  |
|          双通道开关微波雷达版          |             双通道开关微波雷达版              | 113  |
|          三通道开关微波雷达版          |             三通道开关微波雷达版              | 114  |
|         2.4G 单通道开关遥控器          |             2.4G 单通道开关遥控器             | 118  |
|        多功能双通道电量检测开关        |           多功能双通道电量检测开关            | 126  |
|               堆叠式电表               |                  堆叠式电表                   | 128  |
|       堆叠式电表四通道开关子设备       |          堆叠式电表四通道开关子设备           | 130  |
|              HMI 墙面开关              |                 HMI 墙面开关                  | 133  |
|      双色冷暖灯\_支持 2.4G 轻智能      |         双色冷暖灯\_支持 2.4G 轻智能          | 135  |
|      RGB 五色灯\_支持 2.4G 轻智能      |         RGB 五色灯\_支持 2.4G 轻智能          | 136  |
|            律动灯带-蓝牙版             |                律动灯带-蓝牙版                | 137  |
|      单通道插座\_支持 2.4G 轻智能      |         单通道插座\_支持 2.4G 轻智能          | 138  |
|      双通道插座\_支持 2.4G 轻智能      |         双通道插座\_支持 2.4G 轻智能          | 139  |
|      三通道插座\_支持 2.4G 轻智能      |         三通道插座\_支持 2.4G 轻智能          | 140  |
|      四通道插座\_支持 2.4G 轻智能      |         四通道插座\_支持 2.4G 轻智能          | 141  |
|                美的空调                |                   美的空调                    | 142  |
|         轻智能双色冷暖灯遥控器         |            轻智能双色冷暖灯遥控器             | 148  |
|               轻智能网关               |                  轻智能网关                   | 149  |
|             新版 WiFi 门磁             |                新版 WiFi 门磁                 | 154  |
|                   -                    |                       -                       | 156  |
|      律动五色灯\_支持 2.4G 轻智能      |         律动五色灯\_支持 2.4G 轻智能          | 157  |
|                   -                    |                       -                       | 158  |
|            幻彩灯带-蓝牙版             |                幻彩灯带-蓝牙版                | 159  |
|      单通道开关\_支持 2.4G 轻智能      |         单通道开关\_支持 2.4G 轻智能          | 160  |
|      双通道开关\_支持 2.4G 轻智能      |         双通道开关\_支持 2.4G 轻智能          | 161  |
|      三通道开关\_支持 2.4G 轻智能      |         三通道开关\_支持 2.4G 轻智能          | 162  |
|      四通道开关\_支持 2.4G 轻智能      |         四通道开关\_支持 2.4G 轻智能          | 163  |
|     多功能双通道开关\_支持电机模式     |        多功能双通道开关\_支持电机模式         | 165  |
|            ZigBee 蜂鸣网关             |                ZigBee 蜂鸣网关                | 168  |
|            2.4G 交流风扇灯             |                2.4G 交流风扇灯                | 169  |
|               摄像头网关               |                  摄像头网关                   | 170  |
|            摄像头网关子设备            |               摄像头网关子设备                | 171  |
|          情景面板-轻智能网关           |              情景面板-轻智能网关              | 172  |
|            幻彩灯带-Sonoff             |                幻彩灯带-Sonoff                | 173  |
|           情景开关（六按键）           |              情景开关（六按键）               | 174  |
|                开关伴侣                |                   开关伴侣                    | 177  |
| 双色冷暖灯\_支持机械开关分段及夜间模式 |    双色冷暖灯\_支持机械开关分段及夜间模式     | 179  |
|    功率检测插座过载告警-多通道协议     |        功率检测插座过载告警-多通道协议        | 182  |
|            Zigbee 无线按键             |                Zigbee 无线按键                | 1000 |
|           Zigbee 单通道插座            |               Zigbee 单通道插座               | 1009 |
|           Zigbee 单通道开关            |               Zigbee 单通道开关               | 1256 |
|             Zigbee 单色灯              |                 Zigbee 单色灯                 | 1257 |
|             Zigbee 双色灯              |                 Zigbee 双色灯                 | 1258 |
|          Zigbee 温湿度传感器           |              Zigbee 温湿度传感器              | 1770 |
|           Zigbee 移动传感器            |               Zigbee 移动传感器               | 2026 |
|           Zigbee 双通道开关            |               Zigbee 双通道开关               | 2256 |
|           Zigbee 门窗传感器            |               Zigbee 门窗传感器               | 3026 |
|           Zigbee 三通道开关            |               Zigbee 三通道开关               | 3256 |
|             Zigbee 五色灯              |                 Zigbee 五色灯                 | 3258 |
|           Zigbee 水浸传感器            |               Zigbee 水浸传感器               | 4026 |
|           Zigbee 四通道开关            |               Zigbee 四通道开关               | 4256 |
|           Zigbee 烟雾传感器            |               Zigbee 烟雾传感器               | 5026 |
|      Zigbee 人体传感器\_支持 OTA       |          Zigbee 人体传感器\_支持 OTA          | 7002 |
|         Zigbee 门磁\_支持 OTA          |             Zigbee 门磁\_支持 OTA             | 7003 |
|     Zigbee 单通道开关 ­\_支持 OTA       |         Zigbee 单通道开关 ­\_支持 OTA         | 7004 |
|     Zigbee单通道插座­_支持OTA           |           Zigbee单通道插座­_支持OTA           | 7005 |
|        ZigBee窗帘电机_支持OTA          |            ZigBee窗帘电机_支持OTA            | 7006 |
|        Zigbee恒温器_OTA               |              Zigbee恒温器_OTA                | 7007 |
|        Zigbee双色灯_支持OTA           |              Zigbee双色灯_支持OTA             | 7008 |
|        Zigbee五色灯­_支持OTA           |          Zigbee五色灯­_支持OTA	                | 7009 |
|        Zigbee3.0单通道开关_支持OTA          |        Zigbee3.0单通道开关_支持OTA        | 7010 |
|        Zigbee3.0双通道开关_支持OTA          |        Zigbee3.0双通道开关_支持OTA        | 7011 |
|        Zigbee3.0三通道开关_支持OTA          |        Zigbee3.0三通道开关_支持OTA        | 7012 |
|        Zigbee3.0四通道开关_支持OTA          |        Zigbee3.0四通道开关_支持OTA        | 7013 |
|        Zigbee带屏温湿度传感器_支持OTA       |         Zigbee带屏温湿度传感器_支持OTA     | 7014 |
|        ZigBee卷帘电机_支持OTA              |         ZigBee卷帘电机_支持OTA             | 7015 |
|        Zigbee人体存在传感器­_支持OTA        |         Zigbee人体存在传感器­_支持OTA        | 7016 |
|        Zigbee温控阀_OTA                   |        Zigbee温控阀_OTA                    | 7017 |
|        Zigbee中继器_支持OTA               |             Zigbee中继器_支持OTA            | 7018 |
|        Zigbee水浸传感器_支持OTA            |          Zigbee水浸传感器_支持OTA           | 7019 |
|        Zigbee 单通道电量计量插座_支持OTA        |     Zigbee 单通道电量计量插座_支持OTA    | 7020 |
|        Zigbee 双通道电量计量插座_支持OTA        |     Zigbee 双通道电量计量插座_支持OTA    | 7021 |
|        Zigbee 三通道电量计量插座_支持OTA        |     Zigbee 三通道电量计量插座_支持OTA    | 7022 |
|        名扬ZigBee温湿度光照蜂巢帘               |     名扬ZigBee温湿度光照蜂巢帘           | 7023 |
|        电动窗帘子设备                  |             电动窗帘子设备                       | 10011 |
|        RGB五色球泡灯子设备             |        RGB五色球泡灯子设备                       | 10022 |
|        HA网关                         |         HA网关                                  | 20000 |
|        HA单通道开关                   |        HA单通道开关                              | 20001 |
|        HA双通道开关                   |        HA双通道开关                              | 20002 |
|        HA三通道开关                   |         HA三通道开关                             | 20003 |
|        HA四通道开关                   |         HA四通道开关                             | 20004 |
|        HA开关灯                       |        HA开关灯                                 | 20005 |
|        HA调光灯                       |         HA调光灯                                | 20006 |
|        HA双色灯                       |         HA双色灯                                | 20007 |
|        HA五色灯                       |         HA五色灯                                | 20008 |
|        Matter 开关插座                |        Matter 开关插座                          | 30000 |
|        Matter 灯                     |        Matter 灯                                | 30001 |
|        Matter Bridge                 |        Matter Bridge                            | 30002 |

</div>

## 控制指令传参说明

说明：对于 APP 端而言，云平台模式就是 APP 通过 WebSocket 建立长连接发送 update 消息控制设备，以下的控制指令都是 "params" 参数的内容（协议）。

例如：来自 APP 端一条完整的 WebSocket 更新指令是：

```json
{
  "action": "update",
  "deviceid": "100000001",
  "apikey": "用户apikey",
  "userAgent": "app",
  "sequence": "1585297259553",
  "ts": 1585297259,
  "params": {
    // 放在这里
    "switches": [
      {
        "switch": "on",
        "outlet": 0
      },
      {
        "switch": "on",
        "outlet": 1
      },
      {
        "switch": "on",
        "outlet": 2
      },
      {
        "switch": "on",
        "outlet": 3
      }
    ]
  }
}
```

或者使用接口方式控制设备，参数内容：

```json
{
  "type": 1,
  "id": "100000001",
  "params": {
    // 放在这里
    "switches": [
      {
        "switch": "on",
        "outlet": 0
      },
      {
        "switch": "on",
        "outlet": 1
      },
      {
        "switch": "on",
        "outlet": 2
      },
      {
        "switch": "on",
        "outlet": 3
      }
    ]
  }
}
```

除接口返回参数为标准格式（见接口中心 v2）外，设备通过 WebSocket 接收到 APP 控制指令返回值完整消息示例：

```json
{
  "error": 0, // or 400
  "apikey": "用户apikey",
  "deviceid": "100000001",
  "userAgent": "device",
  "sequence": "1585297259553" // 需要和APP端发送的一致
}
```

设备通过 WebSocket 发送的一条完整上报状态消息是：

```json
{
  "action": "update",
  "userAgent": "device",
  "apikey": "用户apikey",
  "deviceid": "100000001",
  "params": {
    "switch": "on"
  }
}
```

params 会存储在服务端，APP 通过接口可以获取到当前设备最后一次上报的状态参数。

## 通用参数说明

| 参数名     | 数据类型       | 取值范围 | 参数说明                                            |
| ---------- | -------------- | -------- | --------------------------------------------------- |
| sledOnline | String         | on,off   | 网络指示灯开关，on 打开，off 关闭                   |
| fwVersion  | String         |          | 当前的固件版本号，例如："3.4.0"                     |
| chipid     | String         |          | 芯片 id，一般认为是一个芯片的固定参数，每个芯片唯一 |
| rssi       | String         |          | WiFi 信号强度，单位：dBm，比如：-55                 |
| timers     | Array\<Object> |          | 定时器对象，每种设备类型的执行动作会不同            |

设备联网上线上报参数说明：

每次设备上线都要上报自身的状态和参数，包括但不限于开关参数、点动、通电反应、互锁、信号强度等。

rssi 说明：

定义 RSSI 为四个等级，等级界限值如下：

- 等级一：rssi < -92
- 等级二：rssi < -77 且 rssi > -92
- 等级三：rssi < -62 且 rssi > -77
- 等级四：rssi > -62

当检测到当前连接路由或者基站的 rssi 值跨等级时需上报 rssi 值。

关于定时器的具体说明，请见下文。

## 定时器规则

说明：所有时间都需要转成 UTC 时间传输，比如手机时间 18:00，传到服务端要改成 10:00。

### 定时器参数

#### 参数说明

| 名称               | 类型   | 允许为空 | 说明                                                                           |
| :----------------- | :----- | :------- | :----------------------------------------------------------------------------- |
| enabled            | Number | N        | 是否启用: 0 表示禁用；1 表示启用                                               |
| mId                | String | N        | 定时标记，可以理解为该定时器的 ID，不能重复，UUID 格式，可以使用库生成         |
| type               | String | N        | 设备端使用， once 单次定时和延时；repeat 重复定时；duration 循环定时           |
| coolkit_timer_type | String | N        | 客户端使用， once 单次定时；repeat 重复定时；duration 循环定时；delay 延时定时 |
| at                 | String | N        | 执行时间: 格林尼治时间，也可采用 UTC 时间                                      |
| do                 | Object | Y        | 要执行的动作                                                                   |
| startDo            | Object | Y        | 循环定时专用: 周期开始要执行的动作                                             |
| endDo              | Object | Y        | 循环定时专用: 随后再执行的动作                                                 |
| period             | String | Y        | 延时定时专用: 延时时间，单位为分钟                                             |

### 定时器类型

以下以单通道设备示例：

#### 单次定时

世界协调时：

年份-月份-日期 T 小时:分钟:秒.毫秒 Z

    "at":"2020-10-15T07:05:00.279Z" // 7点05分0秒执行

示例：

```json
{
  "timers": [
    {
      "mId": "baf5e0d4-a268-cbfb-fd3e-92892cd35029",
      "type": "once",
      "at": "2020-10-15T07:05:00.279Z",
      "coolkit_timer_type": "once",
      "enabled": 1,
      "do": {
        "switch": "on"
      }
    }
  ]
}
```

#### 重复定时

分钟 小时 日 月 星期

    "at": "0 10 * * 0,1,2" // 时间表达式参考cron，代表每周日、一、二的10:00执行

取值范围：

- 分钟：0–59
- 小时：0–23
- 日：1–31（目前默认为\*，代表每一天）
- 月：1–12（目前默认为\*，代表所有月份）
- 星期：0-6（星期天是 0）

示例：

```json
{
  "timers": [
    {
      "mId": "ab5116e0-e651-9366-16e5-7c3f4332f0d2",
      "type": "repeat",
      "at": "0 10 * * 0,1,2",
      "coolkit_timer_type": "repeat",
      "enabled": 1,
      "do": {
        "switch": "on"
      }
    }
  ]
}
```

#### 循环定时（交替）

年份-月份-日期 T 小时:分钟:秒.毫秒 Z 循环周期（分钟） 间隔时间（分钟）

    "at":"2020-05-31T17:00:00.433Z 10 5",//循环定时执行时间 循环周期 10分钟 再执行 5分钟

示例：

```json
{
  "timers": [
    {
      "mId": "87bc1e7f-81f4-ac48-6f34-3f225edefb9a",
      "type": "duration",
      "at": "2020-05-31T17:00:00.433Z 10 5",
      "coolkit_timer_type": "duration",
      "enabled": 1,
      "startDo": {
        "switch": "off",
        "outlet": 0
      },
      "endDo": {
        "switch": "on"
      }
    }
  ]
}
```

#### 循环定时（重复）

年份-月份-日期 T 小时:分钟:秒.毫秒 Z 循环周期（分钟）

    "at":"2020-11-13T08:02:00.759Z 30",//循环定时执行时间 30分钟重复一次

示例：

```json
{
  "timers": [
    {
      "mId": "75144f1f-1a0a-96c9-b15c-b5411a81d1a9",
      "type": "duration",
      "at": "2020-11-13T08:02:00.759Z 30",
      "coolkit_timer_type": "duration",
      "enabled": 1,
      "do": {
        "switch": "off"
      }
    }
  ]
}
```

#### 延时

世界协调时

年份-月份-日期 T 小时:分钟:秒.毫秒 Z

    "at":"2021-06-28T11:39:00.891Z" // 11点39分0秒执行，同级参数要附带个"period"，表示其实是延时后的时间。

示例：

```json
{
  "timers": [
    {
      "mId": "18d76d8a-39a1-3346-455e-115dc948822f",
      "type": "once",
      "at": "2021-06-28T11:39:00.891Z", // 延时后的时间
      "coolkit_timer_type": "delay",
      "enabled": 1,
      "do": {
        "switch": "off"
      },
      "period": "17" // 延时的时间是17分钟
    }
  ]
}
```

## 具体控制协议

### UIID1 单通道插座

#### 参数说明

| 参数名     | 数据类型       | 取值范围                                         | 参数说明                                                                                                        |
| ---------- | -------------- | ------------------------------------------------ | --------------------------------------------------------------------------------------------------------------- |
| switch     | String         | on,off                                           | 通道的开关，on 打开，off 关闭                                                                                   |
| startup    | String         | on,stay,off                                      | 通电反应设置，on 上电开，stay 上电保持，off 上电                                                                |
| pulse      | String         | on,off                                           | 点动状态开关，on 打开，off 关闭                                                                                 |
| pulseWidth | Number         | [500,3600000]（单位：毫秒，支持设置 500 的整数） | 点动时间长短，取值范围 500-3600000（单位毫秒，即 0.5 秒-3600 秒），仅支持设置取值 500 毫秒（即 0.5 秒）的整数倍 |
| timers     | Array\<Object> |                                                  | 定时器对象，每种设备类型的执行动作会不同                                                                        |

#### 控制指令

1、打开设备

```json

{
  "switch": "on"
}

```

2、打开单通道插座指示灯的开关，打开指示灯

```json
{
  "sledOnline": "on"
}
```

3、设置每次操作打开单通道插座后需要在随后的 1 秒自动关闭单通道插座

```json
{
  "pulse": "on",
  "pulseWidth": 1000
}
```

4、设置设备断电再来电，打开设备开关：

```json
{
  "startup": "on"
}
```

定时器设置见《定时器规则》示例。

### UIID2 双通道插座

#### 参数说明

| 参数名    | 数据类型       | 取值范围 | 参数说明                                                                                                                   |
| --------- | -------------- | -------- | -------------------------------------------------------------------------------------------------------------------------- |
| switches  | Array\<Object> |          | 所有通道的开关状态                                                                                                         |
| pulses    | Array\<Object> |          | 所有通道的点动开关状态                                                                                                     |
| configure | Array\<Object> |          | 所有通道的上电保持状态                                                                                                     |
| timers    | Array\<Object> |          | 定时器对象，每种设备类型的执行动作会不同，双通道插座不支持循环定时（重复或者交替），**执行动作暂只支持设置单个通道的状态** |

switches 参数说明：

| 名称   | 类型   | 允许为空 | 说明                                     |
| :----- | :----- | :------- | :--------------------------------------- |
| switch | String | on,off   | 通道的开关，on 打开，off 关闭            |
| outlet | Number | [0,3]    | 取值范围 0-3，分别表示通道 1-4，不能重复 |

configure 参数说明：

| 名称    | 类型   | 允许为空    | 说明                                                         |
| :------ | :----- | :---------- | :----------------------------------------------------------- |
| startup | String | on,stay,off | 特定通道的上电保持状态，on 上电开，stay 上电保持，off 上电关 |
| outlet  | Number | [0,3]       | 取值范围 0-3，分别表示通道 1-4，不能重复                     |

pulses 参数说明：

| 名称       | 类型   | 允许为空                                         | 说明                                                                                                            |
| :--------- | :----- | :----------------------------------------------- | :-------------------------------------------------------------------------------------------------------------- |
| pulse      | String | on,off                                           | 点动时间开关，on 打开，off 关闭                                                                                 |
| pulseWidth | Number | [500,3600000]（单位：毫秒，支持设置 500 的整数） | 点动时间长短，取值范围 500-3600000（单位毫秒，即 0.5 秒-3600 秒），仅支持设置取值 500 毫秒（即 0.5 秒）的整数倍 |
| outlet     | Number | [0,3]                                            | 取值范围 0-3，分别表示通道 1-4，不能重复                                                                        |

#### 控制指令

1、打开通道 1 的开关

```json
{
  "switches": [
    {
      "switch": "on",
      "outlet": 0
    },
    {
      "switch": "off",
      "outlet": 1
    },
    {
      "switch": "off",
      "outlet": 2
    },
    {
      "switch": "off",
      "outlet": 3
    }
  ]
}
```

2、设置通道一在断电后通电时打开开关，通道二在断电后通电时保持断电之前的开关状态

```json
{
  "configure": [
    {
      "startup": "on",
      "outlet": 0
    },
    {
      "startup": "stay",
      "outlet": 1
    },
    {
      "startup": "off",
      "outlet": 2
    },
    {
      "startup": "off",
      "outlet": 3
    }
  ]
}
```

3、打开网络指示灯

```json
{
  "sledOnline": "on"
}
```

4、设置每次操作打开双通道插座的通道一后需要在随后的 2 秒自动关闭：

```json
{
  "pulses": [
    {
      "pulse": "on",
      "width": 2000,
      "outlet": 0
    },
    {
      "pulse": "off",
      "width": 2000,
      "outlet": 1
    },
    {
      "pulse": "off",
      "width": 2000,
      "outlet": 2
    },
    {
      "pulse": "off",
      "width": 2000,
      "outlet": 3
    }
  ]
}
```

5、定时器设置

5.1 单次定时

世界协调时

年份-月份-日期 T 小时:分钟:秒.毫秒 Z

    "at":"2020-10-15T07:05:00.279Z" // 7点05分0秒执行

示例：

```json
{
  "timers": [
    {
      "mId": "baf5e0d4-a268-cbfb-fd3e-92892cd35029",
      "type": "once",
      "at": "2020-10-15T07:05:00.279Z",
      "coolkit_timer_type": "once",
      "enabled": 1,
      "do": {
        "switch": "on",
        "outlet": 0
      }
    }
  ]
}
```

5.2 重复定时

分钟 小时 日 月 星期

    "at":"0 10 * * 0,1,2" // 时间表达式参考cron，代表每周日、一、二的10:00执行

取值范围：

- 分钟：0–59
- 小时: 0–23
- 日：1–31（目前默认为\*，代表每一天）
- 月：1–12（目前默认为\*，代表所有月份）
- 星期：0-6（星期天是 0）

示例：

```json
{
  "timers": [
    {
      "mId": "ab5116e0-e651-9366-16e5-7c3f4332f0d2",
      "type": "repeat",
      "at": "0 10 * * 0,1,2",
      "coolkit_timer_type": "repeat",
      "enabled": 1,
      "do": {
        "switch": "on",
        "outlet": 0
      }
    }
  ]
}
```

5.3 延时

世界协调时

年份-月份-日期 T 小时:分钟:秒.毫秒 Z

    "at":"2021-06-28T11:39:00.891Z" // 11点39分0秒执行，同级参数要附带个"period"，表示其实是延时后的时间。

示例：

```json
{
  "timers": [
    {
      "mId": "18d76d8a-39a1-3346-455e-115dc948822f",
      "type": "once",
      "at": "2021-06-28T11:39:00.891Z", // 延时后的时间
      "coolkit_timer_type": "delay",
      "enabled": 1,
      "do": {
        "switch": "off",
        "outlet": 0
      },
      "period": "17" // 延时的时间是17分钟
    }
  ]
}
```

### UIID3 三通道插座

#### 参数说明

| 参数名    | 数据类型       | 取值范围 | 参数说明                                                                           |
| --------- | -------------- | -------- | ---------------------------------------------------------------------------------- |
| switches  | Array\<Object> |          | 所有通道的开关状态                                                                 |
| pulses    | Array\<Object> |          | 所有通道的点动开关状态                                                             |
| configure | Array\<Object> |          | 所有通道的上电保持状态                                                             |
| timers    | Array\<Object> |          | 定时器对象，每种设备类型的执行动作会不同，三通道插座不支持循环定时（重复或者交替） |

switches 参数说明：

| 名称   | 类型   | 允许为空 | 说明                                     |
| :----- | :----- | :------- | :--------------------------------------- |
| switch | String | on,off   | 通道的开关，on 打开，off 关闭            |
| outlet | Number | [0,3]    | 取值范围 0-3，分别表示通道 1-4，不能重复 |

configure 参数说明：

| 名称    | 类型   | 允许为空    | 说明                                                         |
| :------ | :----- | :---------- | :----------------------------------------------------------- |
| startup | String | on,stay,off | 特定通道的上电保持状态，on 上电开，stay 上电保持，off 上电关 |
| outlet  | Number | [0,3]       | 取值范围 0-3，分别表示通道 1-4，不能重复                     |

pulses 参数说明：

| 名称       | 类型   | 允许为空                                         | 说明                                                                                                            |
| :--------- | :----- | :----------------------------------------------- | :-------------------------------------------------------------------------------------------------------------- |
| pulse      | String | on,off                                           | 点动时间开关，on 打开，off 关闭                                                                                 |
| pulseWidth | Number | [500,3600000]（单位：毫秒，支持设置 500 的整数） | 点动时间长短，取值范围 500-3600000（单位毫秒，即 0.5 秒-3600 秒），仅支持设置取值 500 毫秒（即 0.5 秒）的整数倍 |
| outlet     | Number | [0,3]                                            | 取值范围 0-3，分别表示通道 1-4，不能重复                                                                        |

#### 控制指令

1、打开通道 1、2、3 的开关

```json
{
  "switches": [
    {
      "switch": "on",
      "outlet": 0
    },
    {
      "switch": "on",
      "outlet": 1
    },
    {
      "switch": "on",
      "outlet": 2
    },
    {
      "switch": "off",
      "outlet": 3
    }
  ]
}
```

其他功能包括定时器和 UIID2 保持一致。

### UIID4 四通道插座

#### 参数说明

| 参数名    | 数据类型       | 取值范围 | 参数说明                                                                           |
| --------- | -------------- | -------- | ---------------------------------------------------------------------------------- |
| switches  | Array\<Object> |          | 所有通道的开关状态                                                                 |
| pulses    | Array\<Object> |          | 所有通道的点动开关状态                                                             |
| configure | Array\<Object> |          | 所有通道的上电保持状态                                                             |
| timers    | Array\<Object> |          | 定时器对象，每种设备类型的执行动作会不同，四通道插座不支持循环定时（重复或者交替） |

switches 参数说明：

| 名称   | 类型   | 允许为空 | 说明                                     |
| :----- | :----- | :------- | :--------------------------------------- |
| switch | String | on,off   | 通道的开关，on 打开，off 关闭            |
| outlet | Number | [0,3]    | 取值范围 0-3，分别表示通道 1-4，不能重复 |

configure 参数说明：

| 名称    | 类型   | 允许为空    | 说明                                                         |
| :------ | :----- | :---------- | :----------------------------------------------------------- |
| startup | String | on,stay,off | 特定通道的上电保持状态，on 上电开，stay 上电保持，off 上电关 |
| outlet  | Number | [0,3]       | 取值范围 0-3，分别表示通道 1-4，不能重复                     |

pulses 参数说明：

| 名称       | 类型   | 允许为空                                         | 说明                                                                                                            |
| :--------- | :----- | :----------------------------------------------- | :-------------------------------------------------------------------------------------------------------------- |
| pulse      | String | on,off                                           | 点动时间开关，on 打开，off 关闭                                                                                 |
| pulseWidth | Number | [500,3600000]（单位：毫秒，支持设置 500 的整数） | 点动时间长短，取值范围 500-3600000（单位毫秒，即 0.5 秒-3600 秒），仅支持设置取值 500 毫秒（即 0.5 秒）的整数倍 |
| outlet     | Number | [0,3]                                            | 取值范围 0-3，分别表示通道 1-4，不能重复                                                                        |

#### 控制指令

1、关闭通道 1、2、3、4 的开关

```json
{
  "switches": [
    {
      "switch": "off",
      "outlet": 0
    },
    {
      "switch": "off",
      "outlet": 1
    },
    {
      "switch": "off",
      "outlet": 2
    },
    {
      "switch": "off",
      "outlet": 3
    }
  ]
}
```

其他功能包括定时器和 UIID2 保持一致。

### UIID5 功率检测单通道插座

#### 参数说明

| 参数名             | 数据类型       | 取值范围         | 参数说明                                                                                                                                                                                                                                             |
| ------------------ | -------------- | ---------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| switch             | String         | on,off           | 总开关，on 打开，off 关闭                                                                                                                                                                                                                            |
| power              | String         | 带两位小数的正数 | 功率，单位 W，例如：1800.01                                                                                                                                                                                                                          |
| voltage            | String         | 带两位小数的正数 | 电压，单位 V，例如：220.00                                                                                                                                                                                                                           |
| current            | String         | 带两位小数的正数 | 电流，单位 A，例如：1.00                                                                                                                                                                                                                             |
| oneKwh             | String         | start,stop,get   | 统计用电量，start 开始统计，stop 结束统计，get 刷新，单位 KW.H                                                                                                                                                                                       |
| startTime          | Datetime       |                  | 统计本次用电量的开始时间，零时区                                                                                                                                                                                                                     |
| endTime            | Datetime       |                  | 统计本次用电量的结束时间，零时区                                                                                                                                                                                                                     |
| hundredDaysKwh     | String         | get              | 获取过去 100 天的历史用电量，单位 Kwh                                                                                                                                                                                                                |
| hundredDaysKwhData | String         |                  | 100 天日用电量数值的 16 进制全小写字符串表示，共 600 个字节，精确到小数点后两位，单位是 KW.H。若 100 日的日总用电量为："25.11，25.31，0.00，0.00................(共 100 天)" ‐> "190101190301000000000000.....时间顺序为当日在最前面，其它的往后排。 |
| sledOnline         | String         | on,off           | 指示灯开关，on 打开，off 关闭                                                                                                                                                                                                                        |
| timeZone           | Int            |                  | 获取当前手机所在时区，东区显示为正，西区显示为负                                                                                                                                                                                                     |
| uiActive           | Int            |                  | 表示此次 UI 激活的有效时间，单位 S（默认 60S）。UI 关闭或后台运行时候不发送。该字段仅用于长连接，局域网下无需支持。                                                                                                                                  |
| oneKwhData         | Float          | [0‐50000]        | 本次用电量值的 10 进制字符串表示，精确到小数点后 2 位，单位是 KW.H，取值范围为[0‐50000]，如：110.32                                                                                                                                                  |
| timers             | Array\<Object> |                  | 定时器对象，每种设备类型的执行动作会不同                                                                                                                                                                                                             |

#### 控制指令

1、打开设备

```json

{
  "switch": on
}

```

2、激活指令

设备在激活期内，如果功率变化超过 2W，或电压超过 5V，或电流超过 0.03A 就上报状态，如果在激活期外，则不上报到服务端。

```json
{
  "uiActive": 60
}
```

App 需要在 60s 激活期内再次发送激活 UI 的指令，目前 APP 在启动后每 50 秒发送一次指令，设备端收到指令后，在满足条件后上报：

```json
{
  "power":"300.00",
  "voltage":"220.00",
  "current":"5.00"
}
```

3、开始统计本次用电量，start 开始统计，stop 结束统计

点击 start 发送指令:

```json
{
  "onKwh": "start",
  "endTime": "",
  "startTime": "2022-06-06T03:37:05.064Z"
}
```

点击 stop 需要先发送停止指令:

```json
{
  "onKwh": "stop",
  "endTime": "2022-06-06T03:57:05.064Z",
  "startTime": "2022-06-06T03:37:05.064Z"
}
```

再发送获取当前用电量指令:

```json
{
  "oneKwh": "get"
}
```

刷新用电量：

```json
{
  "oneKwh": "get"
}
```

- 设备返回 "oneKwhData"：本次用电量值的 10 进制字符串表示，精确到小数点后 2 位,单位是 KW.H，取值范围为[0‐50000]，如：110.32

4、查看历史用电量

```json
{
  "hundredDaysKwh": "get"
}
```

设备返回 "hundredDaysKwhData"：100 天日用电量数值的 16 进制全小写字符串表示，共 600 个字节，精确到小数点后两位，单位是 KW.H。若 100 日的日总用电量为："25.11，25.31，0.00，0.00................(共 100 天)" ‐> "190101190301000000000000.....时间顺序为当日在最前面，其它的往后追加。


解析示例下载：[CoolKit_Analyze_Power_Consumption_Demo.zip](https://raw.githubusercontent.com/CoolKit-Technologies/eWeLink-API/main/media/files/CoolKit_Analyze_Power_Consumption_Demo.zip)


5、打开功率检测单通道插座指示灯的开关，打开指示灯：

```json
{
  "sledOnline": "on"
}
```

6、设置每次操作打开功率检测单通道插座后需要在随后的 1 秒自动关闭

```json
{
  "pulse": "on",
  "pulseWidth": 1000
}
```

备注：

- pulse：点动开关，设置每次操作打开单通道插座后需要在随后某个时间执行关闭设备
- pulseWidth：设置点动时间，单位毫秒，最短 500 毫秒，最长 3600000 毫秒，仅支持设置 500 的整数倍。

定时器设置 和 UIID1 保持一致，仅支持打开关闭设备。

### UIID6 单通道开关

和 UIID1 保持一致。

### UIID7 双通道开关

和 UIID2 保持一致。

### UIID8 三通道开关

和 UIID3 保持一致。

### UIID9 四通道开关

和 UIID4 保持一致。

### UIID14 开关改装模块

和 UIID1 保持一致。

### UIID15 恒温恒湿改装件

#### 参数说明

| 参数名             | 数据类型 | 取值范围                                         | 参数说明                                                                                                                                                                                                                |
| ------------------ | -------- | ------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| switch             | String   | on,off                                           | 通道的开关，on 打开，off 关闭                                                                                                                                                                                           |
| startup            | String   | on,stay,off                                      | 通电反应设置，on 上电开，stay 上电保持，off 上电                                                                                                                                                                        |
| pulse              | String   | on,off                                           | 点动状态开关，on 打开，off 关闭                                                                                                                                                                                         |
| pulseWidth         | Number   | [500,3600000]（单位：毫秒，支持设置 500 的整数） | 点动时间长短，取值范围 500-3600000（单位毫秒，即 0.5 秒-3600 秒），仅支持设置取值 500 毫秒（即 0.5 秒）的整数倍                                                                                                         |
| mainSwitch         | String   | on,off                                           | 温控器开关                                                                                                                                                                                                              |
| deviceType         | String   | normal,temperature,humidity                      | 设备的控制方式状态，temperature 温度控制，humidity 湿度控制，normal 正常，即手动控制开关状态，自动控制下禁用点动功能                                                                                                    |
| sensorType         | String   | DHT11/DS18B20/AM2301/MS01/errorType              | 传感器型号，DHT11：湿度范围[20,90]、温度范围[0,50]；DS18B20：湿度不可用、温度范围[-55,125]；AM2301：湿度范围[0,100]、温度范围[-40,80]；MS01：土壤湿度传感器，湿度范围[0,100]、温度不可用；errorType：不支持的传感器类型 |
| currentHumidity    | String   |                                                  | 当前湿度值，当湿度不可用时 currentHumidity 值为 unavailable                                                                                                                                                             |
| currentTemperature | String   |                                                  | 当前温度值，当温度不可用时，currentTemperature 值为 unavailable；                                                                                                                                                       |
| targets            | Array    |                                                  | 自动模式的执行条件及目标反应，当温度或湿度达到预设值（targetHigh/targetLow），则触发目标反应 reaction                                                                                                                   |
| targetHigh         | String   | 温度范围[-999,999]，湿度范围[0,100]              | 目标上限值，targetHigh 值必须大于 targetLow 值                                                                                                                                                                          |
| targetLow          | String   | 温度范围[-999,999]，湿度范围[0,100]              | 目标下限值，temperature 温度控制，humidity 湿度控制，normal 正常                                                                                                                                                        |
| reaction           | Object   |                                                  | 达到预设值之后执行动作，禁止上限阈值触发反应与下限阈值触发反应相同，即两个触发反应不能同时打开或同时关闭                                                                                                                |

#### 控制指令

1、打开设备

```json
{
  "switch": "on",
  "mainSwitch": "on",
  "deviceType": "normal"
}
```

2、关闭设备

```json
{
  "switch": "off",
  "mainSwitch": "off"
}
```

3、设备上报实时温度、湿度、传感器类型

```json
{
  "currentTemperature": "15",
  "currentHumidity": "50",
  "sensorType": "DS18B20"
}
```

温度精度(上报阈值)为0.5度，湿度精度(上报阈值)为5%，温度分辨率为0.1度，湿度分辨率为1%，每5S判断一次是否符合数据上传策略每次触发温度值和湿度值一并上传，共用检测间隔时长。同时上线时上传一次温度和湿度。

4、打开自动模式

```json
//设置为温度自动控制，大于25°C则关闭，小于24°C则打开
{
  "deviceType": "temperature",
  "mainSwitch": "on",
  "targets": [
    {
      "targetHigh": "25",
      "reaction": {
        "switch": "off"
      }
    },
    {
      "targetLow": "24",
      "reaction": {
        "switch": "on"
      }
    }
  ]
}
```

注意：

进入自动模式后，此时物理上关闭设备会进入临时手动状态，APP 或物理上打开后会再次进入自动模式。

- 手动模式：deviceType == normal && mainSwitch == off || deviceType == normal && mainSwitch == on
- 临时手动模式：deviceType != normal && mainSwitch == off
- 自动控制模式：deviceType != normal && mainSwitch == on

5、退出自动控制

```json
{
  "mainSwitch": "off",
  "deviceType": "normal"
}
```

6、设置通电反应（上电状态）

```json
{
  "startup": "on"
}
```

7、设置定时器

```json
{
  "timers": [
    {
      //延时
      "mId": "6bdfc96c-0962-ad75-c430-15d9eb351154",
      "type": "once",
      "at": "2020-12-16T18:37:00.761Z",
      "coolkit_timer_type": "delay",
      "enabled": 1,
      "do": {
        "switch": "on",
        "mainSwitch": "on"
      },
      "period": "390"
    },
    {
      //单次定时
      "mId": "c5601da9-aa5f-0946-a1fd-2a2a35daf59a",
      "type": "once",
      "at": "2020-12-16T13:11:00.974Z",
      "coolkit_timer_type": "once",
      "enabled": 1,
      "do": {
        "switch": "on",
        "mainSwitch": "on"
      }
    },
    {
      //重复定时
      "mId": "870262af-4f9c-7d23-318b-f65d5a79d3eb",
      "type": "repeat",
      "at": "6 15 * * 0,1,2,3,4,5,6",
      "coolkit_timer_type": "repeat",
      "enabled": 1,
      "do": {
        "switch": "on",
        "mainSwitch": "on"
      }
    },
    {
      //循环定时-重复 开始时间到了后 开启设备，然后每30分钟执行一次打开
      "mId": "fcfd83d5-4c8c-50c6-73e8-aeadeac5abdc",
      "type": "duration",
      "at": "2020-12-16T15:23:00.140Z 30",
      "coolkit_timer_type": "duration",
      "enabled": 1,
      "do": {
        "switch": "on",
        "mainSwitch": "on"
      }
    },
    {
      //循环定时-交替 每60分钟一个周期，开始时间到了后 关闭设备，然后30分钟后开启设备，30分钟后关闭设备...
      "mId": "fcfd83d5-4c8c-50c6-73e8-aeadeac5abdc",
      "type": "duration",
      "at": "2020-12-16T15:23:00.140Z 60 30",
      "coolkit_timer_type": "duration",
      "enabled": 1,
      "startDo": {
        "switch": "off",
        "mainSwitch": "off"
      },
      "endDo": {
        "switch": "on",
        "mainSwitch": "on"
      }
    }
  ]
}
```

8、点动设置：

```json
{
  "pulseWidth": 1500,
  "pulse": "on"
}
```

9、设备上报版本、信号强度

```json
{
  "fwVersion": "3.4.1",
  "rssi": -46
}
```

### UIID16 冷暖双色调光灯

#### 参数说明

| 参数名   | 数据类型       | 取值范围                  | 参数说明                                                                                                                                                                                                         |
| -------- | -------------- | ------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| state    | String         | on,off                    | 灯的开关，on 打开，off 关闭                                                                                                                                                                                      |
| channel0 | String         | [25,255]，分为 21 个档位, | 冷光亮度,21 个档位分别为['25', '38', '40', '61', '85', '103', '117', '130', '141', '150', '159', '167', '174', '180', '186', '192', '197', '202', '207', '211', '255' ] 暖光时为 0，中性光时与 channel1 数值相同 |
| channel1 | String         | [25,255]，分为 21 个档位  | 暖光亮度，21 个档位同上，冷光时为 0                                                                                                                                                                              |
| type     | Number         | cold,middle,warm          | 冷暖光类型值，App 端使用，用于分别冷暖光类型使用，设备端不处理该字段                                                                                                                                             |
| timers   | Array\<Object> |                           | 定时器对象，每种设备类型的执行动作会不同                                                                                                                                                                         |

#### 控制指令

1. 打开设备

```json
{
  "state": "on"
}
```

2. 设置为冷光

```json
{
  "channel0": "40",
  "channel1": "0",
  "type": "cold"
}
```

3. 设置为暖光

```json
{
  "channel0": "0",
  "channel1": "40",
  "type": "warm"
}
```

4. 设置为中性光

```json
{
  "channel0": "40",
  "channel1": "40",
  "type": "middle"
}
```

5. 设置单次/重复定时器

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "once",
      "at": "2019-05-30T10:57:00.776Z",
      "type": "once",
      "do": {
        "state": "off"
      },
      "mId": "96c0f48e-ce4a-3656-1c1c-2568a2eb1991"
    },
    {
      "enabled": 1,
      "coolkit_timer_type": "repeat",
      "at": "7 15 * * 1,2,3,4,6,0",
      "type": "repeat",
      "do": {
        "state": "off"
      },
      "mId": "22c944b2-5794-8fdc-e8a4-1fc8d05922f3"
    }
  ]
}
```

6. 设置延时定时器

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "delay",
      "at": "2019-08-09T16:37:00.768Z",
      "period": "13530",
      "type": "once",
      "do": {
        "switch": "on"
      },
      "mId": "eb1c1aed-070c-4e5c-f1c6-a78ea4bac09c"
    }
  ]
}
```

备注：

- coolkit_timer_type：timer 的类型，delay 表示延时器，只有单次执行，可以启用/禁用；
- do：需设备执行的动作，冷暖双色调光灯延时可以执行的动作是开关 state，on 开，off 关。

### UIID17 三档摇头智能风扇

#### 参数说明

| 参数名 | 数据类型 | 取值范围             | 参数说明                                                |
| ------ | -------- | -------------------- | ------------------------------------------------------- |
| fan    | String   | on,off               | 风扇的开关，on 打开；off 关闭                           |
| speed  | String   | slow,moderate,fast   | 风速，slow 慢速；moderate 中速；fast 快速               |
| mode   | String   | normal,natural,sleep | 模式，normal 正常模式；natural 自然模式；sleep 睡眠模式 |
| shake  | String   | on,off               | 摆头， on 打开；off 关闭                                |

#### 控制指令

1. 打开风扇

```json
{
  "fan": "on"
}
```

2. 调节风速到快速

```json
{
  "speed": "fast"
}
```

3. 调节模式到睡眠模式

```json
{
  "mode": "sleep"
}
```

4. 打开摆头功能

```json
{
  "shake": "on"
}
```

### UIID18 传感器中心

#### 参数说明

| 参数名      | 数据类型 | 取值范围                | 参数说明                                                    |
| ----------- | -------- | ----------------------- | ----------------------------------------------------------- |
| dusty       | Number   | [1,10]                  | 空气质量，[1,3] 优 ；[4,6] 良 ；[7,10] 差                   |
| noise       | String   | [1,10]                  | 噪音， [1,2] 安静 ；[3,5] 正常；[6,10] 吵闹                 |
| light       | String   | [1,10]                  | 亮度，[1,3] 明亮 ； [4,7] 正常；[8,10] 昏暗                 |
| temperature | String   | [-Infinity,Infinity] | 温度，[-Infinity,15] 冷；[16,28] 舒适； [29,Infinity] 热|
| humidity    | String   | [0,100]                 | 湿度, [0,30] 干燥 ; [31,70] 正常 ;[71,100] 潮湿             |

#### 控制指令

无，均由设备上报。

### UIID19 三档加湿器

#### 参数说明

| 参数名      | 数据类型       | 取值范围 | 参数说明                                        |
| ----------- | -------------- | -------- | ----------------------------------------------- |
| switch      | String         | on,off   | 设备的开关，on 打开；off 关闭                   |
| mode        | String         | normal,  | 模式，normal 正常模式。发开关的时候要带这个字段 |
| state       | Number         | 1,2,3    | 档位，分 1-3 个档位                             |
| water       | Number         | 0,1      | 水位，0 缺水；1 正常                            |
| temperature | Number         | [0,50]   | 当前温度，设备上报，单位摄氏度                  |
| humidity    | Number         | [20,90]  | 当前湿度百分比，设备上报                        |
| timers      | Array\<Object> |          | 定时器对象，每种设备类型的执行动作会不同        |

#### 控制指令

1. 打开设备

```json
{
  "switch": "on"
}
```

2. 调节档位

```json
{
  "switch": "on",
  "state": 1
}
```

3. 设备上报状态

```json
{
  "water": 1,
  "temperature": 31,
  "humidity": 50
}
```

4. 设置单次/重复定时器

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "once",
      "at": "2019-05-30T10:57:00.776Z",
      "type": "once",
      "do": {
        "switch": "off"
      },
      "mId": "96c0f48e-ce4a-3656-1c1c-2568a2eb1991"
    },
    {
      "enabled": 1,
      "coolkit_timer_type": "repeat",
      "at": "7 15 * * 1,2,3,4,6,0",
      "type": "repeat",
      "do": {
        "switch": "off"
      },
      "mId": "22c944b2-5794-8fdc-e8a4-1fc8d05922f3"
    }
  ]
}
```

### UIID22 RGB 五色球泡灯

#### 参数说明

| 参数名   | 数据类型 | 取值范围         | 参数说明                                                                                                 |
| -------- | -------- | ---------------- | -------------------------------------------------------------------------------------------------------- |
| state    | String   | on,off           | 球泡灯灯光的开关，on 打开，off 关闭                                                                      |
| channel0 | String   | [25,255]         | 球泡灯通道 1，表示冷光，取值范围 25-255                                                                  |
| channel1 | String   | [25,255]         | 球泡灯通道 2，表示暖光，取值范围 25-255                                                                  |
| type     | String   | cold,middle,warm | channel0>channel1 时为 cold 冷光；channel0=channel1 时为 middle 中性光；channel0<channel1 时为 warm 暖光 |
| channel2 | String   | [0,255]          | R 值，红色通道范围 0-255                                                                                 |
| channel3 | String   | [0,255]          | G 值，绿色通道范围 0-255                                                                                 |
| channel4 | String   | [0,255]          | B 值，蓝色通道范围 0-255                                                                                 |
| zyx_mode | Number   | [1,6]            | 球泡灯模式/情景，1 白光模式；2 彩光模式；3 晚安情景；4 阅读情景；5 聚会情景；6 休闲情景                  |
| timers   | Array    |                  | 定时器类型，定时：once（单次执行）；repeat（重复执行）；延时：delay（只能单次执行）                      |

#### 控制指令

备注：关灯的情况下只能开灯，不能调节色温、亮度。

1、打开球泡灯

on 开，off 关，如在当前手机本地首次开灯后默认为白光模式（中性光，亮度值 159），非当前手机本地首次开灯则默认为上一次关灯时的灯光状态（如上次关灯时为彩光模式下红色，则再次开灯默认也是彩光模式下红色）

```json
{
  "state": "on"
}
```

2、打开球泡灯的白光模式

初次添加，默认色温档位为中性光（type=middle，channel0=channel1）、亮度值 159，zyx_mode=1 表示白光模式。

```json
{
  "channel0": "159",
  "channel1": "159",
  "channel2": "0",
  "channel3": "0",
  "channel4": "0",
  "zyx_mode": 1,
  "type": "middle"
}
```

3、白光模式下，中性光的亮度调整到 60

```json
{
  "type": "middle",
  "channel0": "60",
  "channel1": "60"
}
```

4、白光模式下，初次调整球泡灯的色温档位为冷光、亮度值默认 159

channel0>channel1 时为 cold 冷光、channel0=channel1 时为 middle 中性光、channel0<channel1 时为 warm 暖光。

```json
{
  "type": "cold",
  "channel0": "159",
  "channel1": "0"
}
```

5、白光模式下，冷光的亮度调整到 85

```json
{
  "type": "cold",
  "channel0": "85",
  "channel1": "0"
}
```

6、白光模式下，初次调整球泡灯的色温档位为暖光、亮度值默认 159

```json
{
  "type": "warm",
  "channel0": "0",
  "channel1": "159"
}
```

7、白光模式下，调整球泡灯的色温档位为冷光

此时亮度值不是默认的 159 而是上次调整完存在本地的 85

```json
{
  "type": "cold",
  "channel0": "85",
  "channel1": "0"
}
```

8、打开球泡灯的彩灯模式

默认显示：红色（channel2 表示 R 值，channel3 表示 G 值，channel4 表示 B 值，红色的 RGB 值为[255,0,0]），同时 channel0、channel1 默认为 0，type=middle 中性光，zyx_mode=2 表示彩光模式

```json
{
  "channel0": "0",
  "channel1": "0",
  "channel2": "255",
  "channel3": "0",
  "channel4": "0",
  "zyx_mode": 2,
  "type": "middle"
}
```

9、调整球泡灯的颜色到蓝色

RGB 值为[0,0,255]即 R 值 channel2=0、G 值 channel3=0、B 值 channel4=255，channel0、channel1 默认为 0，zyx_mode=2 表示彩光模式

```json
{
  "channel0": "0",
  "channel1": "0",
  "channel2": "0",
  "channel3": "0",
  "channel4": "255",
  "zyx_mode": 2
}
```

10、调整球泡灯的情景为晚安

不可编辑，提前预设好的值 RGB 值为[189,118,0]即 R 值 channel2=189、G 值 channel3=118、B 值 channel4=0，channel0、channel1 默认为 0，zyx_mode=3 表示晚安情景，type=middle 中性光

```json
{
  "channel0": "0",
  "channel1": "0",
  "channel2": "189",
  "channel3": "118",
  "channel4": "0",
  "zyx_mode": 3,
  "type": "middle"
}
```

11、调整球泡灯的情景为阅读

不可编辑，提前预设好的值 RGB 值为[255,255,255]即 R 值 channel2=255、G 值 channel3=255、B 值 channel4=255，channel0、channel1 默认为 0，zyx_mode=4 表示阅读情景，type=middle 中性光

```json
{
  "channel0": "0",
  "channel1": "0",
  "channel2": "255",
  "channel3": "255",
  "channel4": "255",
  "zyx_mode": 4,
  "type": "middle"
}
```

12、调整球泡灯的情景为聚会

不可编辑，提前预设好的值 RGB 值为[207,56,3]即 R 值 channel2=207、G 值 channel3=56、B 值 channel4=3，channel0、channel1 默认为 0，zyx_mode=5 表示聚会情景，type=middle 中性光

```json
{
  "channel0": "0",
  "channel1": "0",
  "channel2": "207",
  "channel3": "56",
  "channel4": "3",
  "zyx_mode": 5,
  "type": "middle"
}
```

13、调整球泡灯的情景为休闲

不可编辑，提前预设好的值 RGB 值为[56,85,179]即 R 值 channel2=56、G 值 channel3=85、B 值 channel4=179，channel0、channel1 默认为 0，zyx_mode=6 表示休闲情景，type=middle 中性光

```json
{
  "channel0": "0",
  "channel1": "0",
  "channel2": "56",
  "channel3": "85",
  "channel4": "179",
  "zyx_mode": 6,
  "type": "middle"
}
```

14、单次定时

设置球泡灯在 2022 年 6 月 27 日 11 点 26 分定时打开，单次执行不重复

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "once",
      "at": "2022-06-27T03:26:00.387Z",
      "type": "once",
      "do": {
        "state": "on"
      },
      "mId": "09c41897-605c-2cce-6ab9-7c58b7f3c221"
    }
  ]
}
```

15、延时

设置球泡灯在 2022 年 6 月 27 日 11 点 26 分延时 4 分钟即 11 点 30 分时关闭，单次执行不重复

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "delay",
      "at": "2022-06-27T03:30:00.552Z",
      "period": "4",
      "type": "once",
      "do": {
        "state": "off"
      },
      "mId": "1778f364-ae92-43b6-33d0-9a5ff531e1bc"
    }
  ]
}
```

coolkit_timer_type：timer 的类型，delay 表示延时器，只有单次执行，可以启用/禁用。
do：需设备执行的动作，球泡灯延时可以执行的动作是灯光开关 state，on 开，off 关

### UIID24 GSM/4G 单通道开关

#### 参数说明

| 参数名     | 数据类型       | 取值范围                                         | 参数说明                                                                                                        |
| ---------- | -------------- | ------------------------------------------------ | --------------------------------------------------------------------------------------------------------------- |
| switch     | String         | on,off                                           | 通道的开关，on 打开，off 关闭                                                                                   |
| startup    | String         | on,stay,off                                      | 通电反应设置，on 上电开，stay 上电保持，off 上电                                                                |
| pulse      | String         | on,off                                           | 点动状态开关，on 打开，off 关闭                                                                                 |
| pulseWidth | Number         | [500,3600000]（单位：毫秒，支持设置 500 的整数） | 点动时间长短，取值范围 500-3600000（单位毫秒，即 0.5 秒-3600 秒），仅支持设置取值 500 毫秒（即 0.5 秒）的整数倍 |
| timers     | Array\<Object> |                                                  | 定时器对象，每种设备类型的执行动作会不同                                                                        |

#### 控制指令

1. 打开设备

```json
{
  "switch": "on"
}
```

2. 设置每次操作打开 GSM/4G 单通道开关后需要在随后的 1 秒自动关闭：

```json
{
  "pulse": "on",
  "pulseWidth": 1000
}
```

3. 设置设备断电再来电，打开设备开关

```json
{
  "startup": "on"
}
```

定时器设置见《定时器规则》示例，和单通道插座定时器保持一致（单次、重复定时与延时）。

### UIID25 香薰机

#### 参数说明

| 参数名      | 数据类型 | 取值范围            | 参数说明                                                                             |
| ----------- | -------- | ------------------- | ------------------------------------------------------------------------------------ |
| switch      | String   | on,off              | 总开关，on 打开，off 关闭                                                            |
| state       | Number   | 1,2（默认 1）       | 雾量档位，1 小，2 大，默认小，可记忆                                                 |
| water       | Number   | 0,1（只读）         | 水位，0 缺水，1 正常                                                                 |
| lightswitch | Number   | 0,1                 | 灯光开关，0 关闭，1 打开                                                             |
| lightmode   | Number   | 1,2,3               | 灯光模式，1 七彩灯，2 指定某个颜色，3 夜灯                                           |
| lightRcolor | Number   | [0,255]             | 灯光颜色，R 通道，非负整数，取值范围 0-255                                           |
| lightGcolor | Number   | [0,255]             | 灯光颜色，G 通道，非负整数，取值范围 0-255                                           |
| lightBcolor | Number   | [0,255]             | 灯光颜色，B 通道，非负整数，取值范围 0-255                                           |
| lightbright | Number   | [0,100]（默认 100） | 灯光亮度，取值范围 0-100，调节颜色时默认亮度 100                                     |
| timers      | Array    |                     | 定时器类型，定时：once（单次执行）、repeat（重复执行）； 延时：delay（只能单次执行） |
| sledOnline  | String   | on,off              | 常灭开关，on 打开，off 关闭                                                          |

#### 控制指令

备注：如在夜灯模式下关闭香薰机，再次打开香薰机时，灯光模式会回到夜灯模式前一个灯光模式状态（包括灯光颜色和亮度）。

假如打开香薰机后将灯光模式先调整成七彩灯再调整成夜灯模式后，关闭香薰机再次打开香薰机，香薰机的灯光会回到七彩灯模式；

假如打开香薰机后将灯光模式先调整成指定颜色 [2,19,0] 且灯光亮度为 43 再调整成夜灯模式后，关闭香薰机再次打开香薰机，香薰机的灯光会回到指定颜色 [2,19,0] 模式且灯光亮度为 43。

1. 打开香薰机，on 开，off 关

```json
{
  "switch": "on"
}
```

2. 调整香薰机的雾量档位，1 小，2 大

```json
{
  "state": 1
}
```

3. 打开香薰机上的灯光，0 关，1 开

```json
{
    "lightswitch": 1
}
```

4. 调整香薰机的灯光模式为七彩灯

备注：调试发现模式调整为七彩灯后，会同时发一条指令将灯光亮度调到 100，但是七彩灯模式的 UI 界面上没有灯光亮度的调节入口

第一条指令：

```json
{
  "lightmode": 1
}
```

第二条指令：

```json
{
  "lightbright": 100
}
```

5. 调整香薰机的灯光颜色为指定颜色（RGB：0,3,255）

备注：调试发现模式调整为指定颜色后，会同时将灯光亮度默认先调到 100，再根据需求手动调节

第一条指令：

```json
{
    "lightmode":2
    "lightRcolor":0
    "lightGcolor":3
    "lightBcolor":255
}
```

第二条指令：

```json
{
  "lightbright": 100
}
```

6. 调整香薰机的灯光颜色为夜灯

备注：调试发现模式调整为夜灯后，会同时将灯光亮度默认先调到 100，再根据需求手动调节

第一条指令：

```json
{
  "lightmode": 3
}
```

第二条指令：

```json
{
  "lightbright": 100
}
```

7. 调节香薰机灯光的亮度为 30

```json
{
  "lightbright": 30
}
```

8. 单次定时

设置香薰机在 2019 年 5 月 21 日 14 点 31 分定时打开，单次执行不重复。

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "once",
      "at": "2019-05-21T06:31:00.795Z",
      "type": "once",
      "do": {
        "switch": "on"
      },
      "mId": "7f28b51c-04a5-85f3-1ecf-9530f1164d1a"
    }
  ]
}
```

9. 延时设置

设置香薰机在 2019 年 5 月 21 日 14 点 54 分延时关闭，单次执行不重复

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "delay",
      "at": "2019-05-21T06:54:00.589Z",
      "period": "1",
      "type": "once",
      "do": {
        "switch": "off"
      },
      "mId": "d0129874-1f23-cd8a-77ea-d1356128eeb6"
    }
  ]
}
```

备注：

- coolkit_timer_type：timer 的类型，delay 表示延时器，只有单次执行，可以启用/禁用
- do：需要设备执行的动作，香薰机延时可以执行的动作是总开关 switch，on 开，off 关

10. 指示灯常灭开关设置

打开香薰机指示灯的常灭开关，关闭指示灯

```json
{
  "sledOnline": "on"
}
```

- sledOnline：设备上的常亮指示灯，on 打开指示灯，off 关闭指示灯

### UIID27 GSM/4G 单通道开关包流量

和 UIID1 保持一致。

### UIID28 RFBridge

#### 参数说明

| 参数名      | 数据类型 | 取值范围                                    | 参数说明                                                                                                                       |
| ----------- | -------- | ------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------ |
| remote_type | String   | 1,2,3,4,5,6                                 | 遥控器类型，1 单按键；2 双按键；3 三按键；4 四按键；5 窗帘；6 报警器                                                           |
| cmd         | String   | capture,captureCancel,edit,transmit,trigger | 指令，capture 进入按键学习模式；captureCancel 退出学习模式；edit 编辑通道列表；transmit 触发按键；trigger 来自设备的触发通知。 |
| rfChl       | Number   |                                             | 按钮的序号，添加时需要递增                                                                                                     |

备注：添加 RF 网关设备与添加普通 WiFi 设备没有区别，它通常支持快速配对和兼容配对模式。

设备添加遥控器个数是存在限制的，具体需要检查 设备信息（deviceList 列表 item 说明） 中的 devConfig 配置项。通常只能添加 4 组遥控器，有部分产品型号可以支持 16 组遥控器。

devConfig 参数说明：

此处只描述 UIID28 RFBridge 遥控器个数的配置，例如下面这个示例代表固件版本大于等于 2.7.0 才支持添加 16 组遥控器，如果没有这个参数就代表默认只允许添加 4 组遥控器：

```json
{
  "devConfig": {
    "remoteInfos": [
      {
        "numberOfRemote": 16,
        "fwVersion": "2.7.0"
      }
    ]
  }
}
```

1、APP 添加单个遥控器（未学习的）

请求 设置设备标签接口（/v2/device/tags）

示例：

```shell
curl --location --request POST 'https://as-apia.coolkit.cc/v2/device/tags' \
--header 'X-CK-Nonce: {{nonce}}' \
--header 'Authorization: Bearer {{accessToken}}' \
--header 'Content-Type: application/json' \
--data-raw '{"deviceid":"1000xxxx","type":"merge","tags":{"zyx_info": [{"remote_type":"1","name":"My Remote","buttonName":[{"0":"Button1"}]}]}}'
```

2、APP 添加多通道遥控器（未学习的）

```shell
curl --location --request POST 'https://as-apia.coolkit.cc/v2/device/tags' \
--header 'X-CK-Nonce: {{nonce}}' \
--header 'Authorization: Bearer {{accessToken}}' \
--header 'Content-Type: application/json' \
--data-raw '{"deviceid":"1000xxxx","type":"merge","tags":{"zyx_info": {"remote_type":"2","name":"My Remote","buttonName":[{"1":"Button1"},{"2":"Button2"}]}]}}'
```

3、APP 添加报警器（未学习的）

```shell
curl --location --request POST 'https://as-apia.coolkit.cc/v2/device/tags' \
--header 'X-CK-Nonce: {{nonce}}' \
--header 'Authorization: Bearer {{accessToken}}' \
--header 'Content-Type: application/json' \
--data-raw '{"deviceid":"1000xxxx","type":"merge","tags":{"zyx_info": {"remote_type":"6","name":"My Remote","buttonName":[{"4":"Button1"}]}]}}'
```

4、APP 使设备进入学习按键模式

```json
{
  "action": "update",
  "deviceid": "1000xxxx",
  "apikey": "用户apikey",
  "selfApikey": "用户apikey",
  "params": { "cmd": "capture", "rfChl": 0 },
  "sequence": "1574303626706",
  "userAgent": "app"
}
```

APP 收到服务器消息:

```json
{
  "error": 0,
  "deviceid": "xxx",
  "apikey": "用户apikey",
  "sequence": "1574303626706"
}
```

学习成功后，APP 还会收到一次消息，长连接 params 里面的内容才是最终已经学习过的按钮（rfChl 值用作后续控制使用），tags 只是存名称等等信息，表示添加了某些遥控器。

APP 收到服务器消息:

```json
{
  "action": "update",
  "deviceid": "xxx",
  "apikey": "用户apikey",
  "userAgent": "device",
  "d_seq": 1574303644676,
  "ts": 0,
  "params": {
    "rfList": [
      { "rfChl": 0, "rfVal": "29EA015E04245575C0" },
      { "rfChl": 1, "rfVal": "29A4015E0424557530" },
      { "rfChl": 3, "rfVal": "29AE015E041A557503" }
    ]
  },
  "from": "device"
}
```

使设备退出学习模式：

```json
{
  "action": "update",
  "deviceid": "1000xxxx",
  "apikey": "用户apikey",
  "selfApikey": "用户apikey",
  "params": { "cmd": "captureCancel" },
  "sequence": "1574303626706",
  "userAgent": "app"
}
```

5、APP 更新通道列表

当用户通过 APP 对通道列表进行修改(学习、删除)时，需要将新的列表更新到设备。

APP 发送指令给设备:

```json
{
  "action": "update",
  "deviceid": "1000xxxx",
  "apikey": "用户apikey",
  "selfApikey": "用户apikey",
  "params": {
    "cmd": "edit",
    "rfList": [
      { "rfChl": 0, "rfVal": "29EA015E04245575C0" },
      { "rfChl": 1, "rfVal": "29A4015E0424557530" },
      { "rfChl": 3, "rfVal": "29AE015E041A557503" }
    ]
  },
  "sequence": "1574303626706",
  "userAgent": "app"
}
```

6、APP 发送触发按键指令

```json
{
  "action": "update",
  "deviceid": "xxx",
  "apikey": "用户apikey",
  "selfApikey": "用户apikey",
  "params": { "cmd": "transmit", "rfChl": 1 },
  "sequence": "1574305990342",
  "userAgent": "app"
}
```

7、APP 收到设备的触发通知（报警器）

```json
{
  "action": "update",
  "deviceid": "xxx",
  "apikey": "用户apikey",
  "userAgent": "device",
  "ts": 0,
  "params": { "cmd": "trigger", "rfTrig0": "2020-09-21T02:34:14.000Z" },
  "from": "device"
}
```

### UIID29 GSM/4G 双通道开关插座

和 UIID2 保持一致。

### UIID31 GSM/4G 四通道开关插座

和 UIID4 保持一致。

### UIID32 功率检测插座过载告警

基本功能和 UIID5 保持一致，UIID32 增加过载保护功能。

设置过载保护自动关闭设备，例如：最小实时功率 200W，最大实时功率 1500W，电流 20A，电压 240V：

```json
{
  "alarmType": "pcv",
  "alarmVValue": [-1, 240],
  "alarmCValue": [-1, 20],
  "alarmPValue": [200, 1500]
}
```

字段说明：

1. alarmType ： String 类型，过载保护设置的类型，必选，取值范围为 "p" 即功率保护、 "v" 即电压保护 、 "c" 即电流保护三者的任意组合，可包含其中一种、其中两种、其中三种，具体取值取决于其他三个字段的设置。例如：若用户只设置了电流过载保护，而电压和功率无设置（即为默认值），则 alarmType 的取值为 "c" ；若用户设置了功率过载保护和电压过载保护，而电流过载保护无设置（即为默认值），则 alarmType 的取值为 "pv" ；若用户设置了功率过载保护、电流过载保护以及电压过载保护，则 alarmType 的取值为 "pcv" 。
2. alarmVValue ： Array 类型，必选，内部元素为 number 类型，表示电压保护的设置值，单位为 V ， 其中第一个元素为电压保护的阈值下限，第二个元素为电压保护的阈值上限。
3. alarmCValue ： Array 类型，必选，内部元素为 number 类型，表示电流保护的设置值，单位为 A ，其中第一个元素为电流保护的阈值下限，第二个元素为电流保护的阈值上限 。
4. alarmPValue ： Array 类型，必选，内部元素为 number 类型，表示功率保护的设置值，单位为 W ，其中第一个元素为功率保护的阈值下限。

注意事项：

1. 除了阈值上下限都未设置的情况，电压保护、电流保护、功率保护的阈值上限必须大于阈值下限。
2. 默认情况下，电流保护、电压保护、功率保护均未设置，其默认阈值下限、阈值上限都为 -1 。
3. 可以只设置阈值上限或阈值下限，而未设置的上限或下限的值为 -1 。
4. 电流电压功率的阈值上下限取值范围如下：
   - 电流：阈值上限取值范围为 [0.10 , 15.00] ，无阈值下限。
   - 电压：阈值上限取值范围为 [0.10 , 300.00] ，无阈值下限。
   - 功率：阈值上限取值范围为 [10.00 , 3300.00] ，阈值下限取值范围为 [0.10 , 3300.00] 。
5. 对于上述所有阈值保护的设置值，设备端均支持至多 2 位小数。

### UIID33 RGB 灯带控制器

#### 参数说明

| 参数名     | 数据类型 | 取值范围 | 参数说明                                                                            |
| ---------- | -------- | -------- | ----------------------------------------------------------------------------------- |
| switch     | String   | on,off   | 灯带灯光的开关，on 打开，off 关闭                                                   |
| light_type | Number   | 1,2      | 灯带模式，1 彩光模式、2 白光模式                                                    |
| bright     | Number   | [10,100] | 灯光亮度，范围 10-100，值越大越亮                                                   |
| colorR     | Number   | [0,255]  | R 值，红色通道范围 0-255                                                            |
| colorG     | Number   | [0,255]  | G 值，绿色通道范围 0-255                                                            |
| colorB     | Number   | [0,255]  | B 值，蓝色通道范围 0-255                                                            |
| mode       | Number   | [1,3]    | 灯带可选的模式，总共 3 个模式：1 静态，2 渐变，3 跳变                               |
| speed      | Number   | [0,100]  | 灯光颜色模式下的变化速度，范围 0-100，值越大速度越快                                |
| timers     | Array    |          | 定时器类型，定时：once（单次执行）；repeat（重复执行）；延时：delay（只能单次执行） |

#### 控制指令

**备注：关灯的情况下只能开灯，不能通过调节色温、亮度来开灯。**

1. 打开灯带

```json
{
  "switch":"on" // on 开，off 关
}
```

在色盘上选中一个颜色RGB值[255,63,0]，light_type为 1 表示彩光，此时默认模式mode 1 灯光呈静态显示，如果拖拽调节色温进度条则会退出色盘颜色选择状态

```json
{
        "mode":1,
        "colorR":255,
        "colorB":63,
        "colorG":0,
        "light_type":1
}
```

2. 调节亮度

调节灯带的亮度到55，light_type在1 彩光 或者2 白光的状态下都可以调节亮度，亮度取值范围是10-100，值越大越亮，此时默认mode 1 静态灯光模式

```json
{
  "mode":1,
  "bright":55
}
```

3. 调节色温

调节灯带的色温到暖光，用 RGB 通道值来表示色温值，RGB 值对应色温 142 阶梯（详见列表），light_type 为 2 表示白光可以调节色温（冷暖），此时默认 mode 1 静态灯光模式

```json
{
  "mode": 1,
  "colorR": 255,
  "colorB": 11,
  "colorG": 141,
  "light_type": 2
}
```

色温值列表如下

```
["#d6e1ff", "#d9e1ff", "#d7e2ff", "#dae2ff", "#d8e3ff", "#dbe2ff", "#d9e3ff", "#dce3ff", "#dae4ff", "#dde4ff", "#dce5ff", "#dfe5ff", "#dde6ff", "#e0e6ff", "#dee6ff", "#e1e7ff", "#e0e7ff", "#e3e8ff", "#e1e8ff", "#e4e9ff", "#e3e9ff", "#e5e9ff", "#e4eaff", "#e7eaff", "#e6ebff", "#e9ecff", "#e7ecff", "#eaedff", "#e9edff", "#eceeff", "#ebeeff", "#eeefff", "#edefff", "#eff0ff", "#eff0ff", "#f1f1ff", "#f0f1ff", "#f3f3ff", "#f3f2ff", "#f5f4ff", "#f5f3ff", "#f7f5ff", "#f7f5ff", "#faf7ff", "#f9f6ff", "#fcf8ff", "#fcf7ff", "#fefaff", "#fef9ff", "#fff9fd", "#fff9fd", "#fff9fb", "#fff8fb", "#fff8f8", "#fff6f8", "#fff7f5", "#fff5f5", "#fff6f3", "#fff4f2", "#fff5f0", "#fff3ef", "#fff4ed", "#fff2ec", "#fff3ea", "#fff0e9", "#fff1e7", "#ffefe6", "#fff0e4", "#ffeee3", "#ffefe1", "#ffece0", "#ffeede", "#ffebdc", "#ffedda", "#ffe9d9", "#ffebd7", "#ffe8d5", "#ffead3", "#ffe6d2", "#ffe8d0", "#ffe4ce", "#ffe7cc", "#ffe3ca", "#ffe5c8", "#ffe1c6", "#ffe4c4", "#ffdfc2", "#ffe2c0", "#ffddbe", "#ffe1bc", "#ffdbba", "#ffdfb8", "#ffd9b6", "#ffddb4", "#ffd7b1", "#ffdbaf", "#ffd5ad", "#ffd9ab", "#ffd3a8", "#ffd7a6", "#ffd1a3", "#ffd5a1", "#ffce9f", "#ffd39c", "#ffcc99", "#ffd097", "#ffc994", "#ffce92", "#ffc78f", "#ffcb8d", "#ffc489", "#ffc987", "#ffc184", "#ffc682", "#ffbe7e", "#ffc37c", "#ffbb78", "#ffc076", "#ffb872", "#ffbd6f", "#ffb46b", "#ffb969", "#ffb165", "#ffb662", "#ffad5e", "#ffb25b", "#ffa957", "#ffae54", "#ffa54f", "#ffaa4d", "#ffa148", "#ffa645", "#ff9d3f", "#ffa23c", "#ff9836", "#ff9d33", "#ff932c", "#ff9829", "#ff8e21", "#ff921d", "#ff8912", "#ff8d0b"]
```

4. 设置灯带颜色模式

选择灯带的颜色模式为"渐变"模式，速度默认 50，mode 1 静态模式，2 渐变模式，3 跳变模式

```json
{
  "mode": 2,
  "speed": 50
}
```

灯带颜色模式在"渐变"模式下时，将速度调到 100，范围 0-100，值越大速度越快

```json
{
  "mode": 2,
  "speed": 100
}
```

5. 单次定时

设置灯带在 2019 年 7 月 2 日 15 点 32 分定时打开，单次执行不重复

```json
{
  "timers":[
            {
                "enabled":1,
                "coolkit_timer_type":"once",
                "at":"2019-07-02T07:32:00.689Z",
                "type":"once",
                "do":{
                    "switch":"on"
                },
                "mId":"a824f44b-af76-ff8d-6fcc-6d897d93810f"
            }
        ]
}
```

备注：

- coolkit_timer_type：timer 的类型，delay 表示延时器，只有单次执行，可以启用/禁用
- do：需设备执行的动作，灯带延时可以执行的动作是灯光开关 switch，on 开，off 关

设置灯带在 2019 年 7 月 2 日 15 点 32 分延时 8 分钟即 15 点 40 分时关闭，单次执行不重复

6. 延时

```json
{
  "timers":[
            {
                "enabled":1,
                "coolkit_timer_type":"delay",
                "at":"2019-07-02T07:40:00.057Z",
                "period":"8",
                "type":"once",
                "do":{
                    "switch":"off"
                },
                "mId":"2b02614d-e5fd-ec3b-ad44-9637b06511a4"
            }
        ]
}
```

### UIID34 智能风扇灯

#### 参数说明

| 参数名   | 数据类型 | 取值范围 | 参数说明                                                                                                                                                                                                                                                                                 |
| -------- | -------- | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| switches | Array    |          | 所有通道的开关状态                                                                                                                                                                                                                                                                       |
| switch   | String   | on,off   | 通道的开关，on 打开，off 关闭                                                                                                                                                                                                                                                            |
| outlet   | Number   | [0,3]    | 取值范围 0-3，分别表示通道 1-4，不能重复。开灯：打开通道 1；关灯：关闭通道 1；风扇低速档：打开通道 2，关闭通道 3,4；风扇中速档：打开通道 2,3，关闭通道 4；风扇高速档：打开通道 2,4，关闭通道 3；关闭风扇：关闭通道 2；定时开：打开通道 1（仅支持开灯）；定时关：关闭通道 1（仅支持关灯） |
| timers   | Array    |          | 定时器类型，定时：once（单次执行）；repeat（重复执行）；延时：delay（只能单次执行）                                                                                                                                                                                                      |

#### 控制指令

1. 打开风扇灯的灯，打开通道 1

```json
{
  "switches": [
    {
      "switch": "on",
      "outlet": 0
    },
    {
      "outlet": 1,
      "switch": "off"
    },
    {
      "outlet": 2,
      "switch": "off"
    },
    {
      "outlet": 3,
      "switch": "off"
    }
  ]
}
```

2. 关闭风扇灯的灯，关闭通道 1

```json
{
  "switches": [
    {
      "switch": "off",
      "outlet": 0
    },
    {
      "outlet": 1,
      "switch": "off"
    },
    {
      "outlet": 2,
      "switch": "off"
    },
    {
      "outlet": 3,
      "switch": "off"
    }
  ]
}
```

3. 调整风扇灯的风扇档位到低速挡，打开通道 2，关闭通道 3,4，调整风扇档位即打开风扇

```json
{
  "switches": [
    {
      "switch": "off",
      "outlet": 0
    },
    {
      "outlet": 1,
      "switch": "on"
    },
    {
      "outlet": 2,
      "switch": "off"
    },
    {
      "outlet": 3,
      "switch": "off"
    }
  ]
}
```

4. 调整风扇灯的风扇档位到中速挡，打开通道 2,3，关闭通道 4，调整风扇档位即打开风扇

```json
{
  "switches": [
    {
      "switch": "off",
      "outlet": 0
    },
    {
      "outlet": 1,
      "switch": "on"
    },
    {
      "outlet": 2,
      "switch": "on"
    },
    {
      "outlet": 3,
      "switch": "off"
    }
  ]
}
```

5. 调整风扇灯的风扇档位到高速挡，打开通道 2,4，关闭通道 3，调整风扇档位即打开风扇

```json
{
  "switches": [
    {
      "switch": "off",
      "outlet": 0
    },
    {
      "outlet": 1,
      "switch": "on"
    },
    {
      "outlet": 2,
      "switch": "off"
    },
    {
      "outlet": 3,
      "switch": "on"
    }
  ]
}
```

6. 关闭风扇灯的风扇，关闭通道 2

```json
{
  "switches": [
    {
      "switch": "off",
      "outlet": 0
    },
    {
      "outlet": 1,
      "switch": "off"
    },
    {
      "outlet": 2,
      "switch": "off"
    },
    {
      "outlet": 3,
      "switch": "on"
    }
  ]
}
```

7. 单次定时

设置在 2019 年 5 月 31 日 19 点 10 分定时打开风扇灯的灯，打开通道 1，单次执行不重复

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "once",
      "at": "2019-05-31T11:10:00.297Z",
      "type": "once",
      "do": {
        "switch": "on",
        "outlet": 0
      },
      "mId": "86cbee4b-a824-0709-cdef-c0a632daf49e"
    }
  ]
}
```

备注：

- coolkit_timer_type：timer 的类型，定时器中 once 表示单次执行，repeat 表示重复执行，可以启用/禁用
- do：需设备执行的动作，风扇灯定时可执行的动作是灯的开关 switch，on 开，off 关

8. 延时设置

设置在 2019 年 5 月 31 日 19 点 11 分延时关闭风扇灯的灯，关闭通道 1，单次执行不重复

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "delay",
      "at": "2019-05-31T11:11:00.856Z",
      "period": "1",
      "type": "once",
      "do": {
        "switch": "off",
        "outlet": 0
      },
      "mId": "c8194956-97c3-79bb-5510-00e0a89b6f68"
    }
  ]
}
```

### UIID36 单路调光开关

#### 参数说明

| 参数名     | 数据类型 | 取值范围 | 参数说明                                                                            |
| ---------- | -------- | -------- | ----------------------------------------------------------------------------------- |
| switch     | String   | on,off   | 单路调光开关灯光的开关，on 打开，off 关闭                                           |
| bright     | Number   | 10,100   | 单路调光开关灯光亮度值的调整，取值范围 10-100，值越大越亮                           |
| sledOnline | String   | on,off   | 常灭开关，on 打开，off 关闭                                                         |
| timers     | Array    |          | 定时器类型，定时：once（单次执行）；repeat（重复执行）；延时：delay（只能单次执行） |

#### 控制指令

备注：关灯的情况下只能开灯，不能调节色温、亮度。

1. 打开单路调光开关，on 开，off 关

```json
{
  "switch": "on"
}
```

2. 调整单路调光开关的亮度值到 57，取值范围 10-100

```json
{
  "bright": 57
}
```

3. 设置单路调光开关的常灭开关为关闭，on 开，off 关

```json
{
  "sledOnline": "off"
}
```

4. 设置单路调光开关在 2019 年 6 月 18 日 12 点 06 分定时打开，单次执行不重复

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "once",
      "at": "2019-06-18T04:06:00.102Z",
      "type": "once",
      "do": {
        "switch": "on"
      },
      "mId": "56aa6c9e-5bcc-6e4a-2333-f6f2f16808ac"
    }
  ]
}
```

备注：

- coolkit_timer_type：timer 的类型，定时器中 once 表示单次执行，repeat 表示重复执行，可以启用/禁用
- do：需设备执行的动作，单路调光开关定时可执行的动作是灯的开关 switch，on 开，off 关

5. 设置单路调光开关在 2019 年 6 月 18 日 12 点 06 分延时 5 分钟即 12 点 11 分时关闭，单次执行不重复

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "delay",
      "at": "2019-06-18T04:11:00.268Z",
      "period": "5",
      "type": "once",
      "do": {
        "switch": "off"
      },
      "mId": "df96f3d4-0729-135d-2fe9-6b0bfce065eb"
    }
  ]
}
```

### UIID52 调光调色温吸顶灯

#### 参数说明

| 参数名   | 数据类型 | 取值范围  | 参数说明                                                                            |
| -------- | -------- | --------- | ----------------------------------------------------------------------------------- |
| state    | String   | on,off    | 吸顶灯灯光的开关，on 打开，off 关闭                                                 |
| channel0 | String   | [10,255]  | 吸顶灯灯光亮度值的调整，取值范围 10-255，10 为白光，255 为黄光                      |
| channel1 | String   | [0,255]   | 吸顶灯灯光色温值的调整，取值范围 0-255，值越大越暖                                  |
| timers   | Array    |           | 定时器类型，定时：once（单次执行）；repeat（重复执行）；延时：delay（只能单次执行） |
| timeZone |          | [-12,+14] | -代表西时区，+代表东时区                                                            |

#### 控制指令

备注：关灯的情况下只能开灯，不能调节色温、亮度；

如需要调整吸顶灯为小夜灯，将吸顶灯亮度值 channel0 调整到 10，同时将吸顶灯色温值 channel1 调整到 255。

1. 打开吸顶灯，on 开，off 关

```json
{
  "state": "on"
}
```

2. 调整吸顶灯的亮度值到 132，取值范围 10-255

```json
{
  "channel0": "132"
}
```

3. 调整吸顶灯的色温值到 57，取值范围 0-255

```json
{
  "channel1": "57"
}
```

4. 调整吸顶灯到小夜灯

```json
{
  "channel0": "10",
  "channel1": "255"
}
```

5. 设置吸顶灯在 2019 年 5 月 29 日 17 点 08 分定时打开，单次执行不重复

```json
{
"timers":[
            {
                "enabled":1,
                "coolkit_timer_type":"once",
                "at":"2019-05-29T09:08:00.315Z",
                "type":"once",
                "do":{
                    "state":"on"
                },
                "mId":"91959d3b-5885-718d-13c5-e69cd48de862"
            }
        ]
```

备注：

- coolkit_timer_type：timer 的类型，定时器中 once 表示单次执行，repeat 表示重复执行，可以启用/禁用
- do：需设备执行的动作，吸顶灯定时可执行的动作是灯光开关 switch，on 开，off 关

6. 设置吸顶灯在 2019 年 5 月 29 日 17 点 10 分延时 6 分钟即 17 点 16 分时关闭，单次执行不重复

```json
{
"timers":[
            {
                "enabled":1,
                "coolkit_timer_type":"delay",
                "at":"2019-05-29T09:16:00.384Z",
                "period":"1",
                "type":"once",
                "do":{
                    "state":"off"
                },
                "mId":"e4777ab0-a74e-ed60-aeac-1ea23b112069"
            }
        ]
```

### UIID57 单色球泡灯

#### 参数说明

| 参数名   | 数据类型 | 取值范围     | 参数说明                                                                            |
| -------- | -------- | ------------ | ----------------------------------------------------------------------------------- |
| state    | String   | on,off       | 单色球泡灯灯光的开关，on 打开，off 关闭                                             |
| channel0 | String   | ["25","255"] | 单色球泡灯灯光亮度值的调整，取值范围 25-255，值越大越亮                             |
| timers   | Array    |              | 定时器类型，定时：once（单次执行）；repeat（重复执行）；延时：delay（只能单次执行） |

#### 控制指令

备注：关灯的情况下只能开灯，不能调节色温、亮度。

1. 打开单色球泡灯，on 开，off 关

```json

{
        "state":"on"
     }
     ```

2. 调整单色球泡灯的亮度值到87，取值范围25-255
```json
{
        "channel0":"132"
     }```
3. 设置单色球泡灯在2019年6月14日17点45分定时打开，单次执行不重复
```json
{
"timers":[
            {
                "enabled":1,
                "coolkit_timer_type":"once",
                "at":"2019-06-14T09:45:00.495Z",
                "type":"once",
                "do":{
                    "state":"on"
                },
                "mId":"9be975c2-353f-3fbb-0f92-8a5cb0824389"
            }
        ]
}
```

备注：

- coolkit_timer_type：timer 的类型，定时器中 once 表示单次执行，repeat 表示重复执行，可以启用/禁用
- do：需设备执行的动作，单色球泡灯定时可执行的动作是灯光开关 switch，on 开，off 关

4. 设置单色球泡灯在 2019 年 6 月 14 日 17 点 45 分延时 5 分钟即 17 点 50 分时关闭，单次执行不重复

```json
{
"timers":[
            {
                "enabled":1,
                "coolkit_timer_type":"delay",
                "at":"2019-06-14T09:50:00.959Z",
                "period":"5",
                "type":"once",
                "do":{
                    "state":"off"
                },
                "mId":"0b145b7c-a7f8-c98a-825b-b8586f335899"
            }
        ]
```

### UIID59 律动灯带

#### 参数说明

| 参数名     | 数据类型 | 取值范围 | 参数说明                                                                                                                                                                                |
| ---------- | -------- | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| switch     | String   | on,off   | 灯带灯光的开关，on 打开，off 关闭                                                                                                                                                       |
| light_type | Number   | 1,2      | 灯带模式，1 彩光模式（色盘）、2 白光模式（色温）                                                                                                                                        |
| bright     | Number   | [1,100]  | 灯光亮度，范围 1-100，值越大越亮                                                                                                                                                        |
| colorR     | Number   | [0,255]  | R 值，红色通道范围 0-255                                                                                                                                                                |
| colorG     | Number   | [0,255]  | G 值，绿色通道范围 0-255                                                                                                                                                                |
| colorB     | Number   | [0,255]  | B 值，蓝色通道范围 0-255                                                                                                                                                                |
| mode       | Number   | [1,12]   | 灯带可选的模式，总共 12 个模式：1 七彩（普通），2 七彩渐变，3 七彩跳变，4 DIY 渐变，5 DIY 流光，6 DIY 跳变，7 DIY 频闪，8 RGB 渐变，9 RGB 流光，10 RGB 跳变，11 RGB 频闪，12 音乐可视化 |
| speed      | Number   | [1,100]  | 灯带在不同颜色之间的变化快慢速度，取值范围 1-100，值越大速度越快                                                                                                                        |
| sensitive  | Number   | [1,10]   | 灯带在音乐可视化模式下灯光变化的灵敏度，取值范围 1-10，值越大灵敏度越高                                                                                                                 |
| timers     | Array    |          | 定时器类型，定时：once（单次执行）；repeat（重复执行）；延时：delay（只能单次执行）                                                                                                     |
| timeZone   | Number   | [-12,12] | 时区，App 启动时会将手机的时区发送至设备（仅限 aithinker 品牌的 LumiDock 和 LumiCharge3 两个型号）                                                                                      |

#### 控制指令

备注：关灯的情况下只能开灯，不能通过调节色温、亮度来开灯。

1. 打开灯带，on 开，off 关

```json
{
  "switch": "on"
}
```

2. 在色盘上选中一个颜色 RGB 值[255,16,0]，light_type 为 1 表示彩光，此时默认 mode 1 七彩模式，如果拖拽调节色温进度条则会退出色盘颜色选择状态

```json
{
  "mode": 1,
  "colorR": 255,
  "colorB": 16,
  "colorG": 0,
  "light_type": 1
}
```

3. 调节灯带的亮度到 53，light_type 在 1 彩光   或者 2 白光的状态下都可以调节亮度，亮度取值范围是 1-100，值越大越亮，此时默认 mode 1 七彩模式

```json
{
  "mode": 1,
  "bright": 53
}
```

4. 调节灯带的色温到暖光，用 RGB 通道值来表示色温值，RGB 值对应色温 142 阶梯（详见列表），light_type 为 2 表示白光可以调节色温（冷暖），此时默认 mode 1 七彩模式

```json
{
  "mode": 1,
  "colorR": 255,
  "colorB": 11,
  "colorG": 141,
  "light_type": 2
}
```

色温值列表如下

```
["#d6e1ff", "#d9e1ff", "#d7e2ff", "#dae2ff", "#d8e3ff", "#dbe2ff", "#d9e3ff", "#dce3ff", "#dae4ff", "#dde4ff", "#dce5ff", "#dfe5ff", "#dde6ff", "#e0e6ff", "#dee6ff", "#e1e7ff", "#e0e7ff", "#e3e8ff", "#e1e8ff", "#e4e9ff", "#e3e9ff", "#e5e9ff", "#e4eaff", "#e7eaff", "#e6ebff", "#e9ecff", "#e7ecff", "#eaedff", "#e9edff", "#eceeff", "#ebeeff", "#eeefff", "#edefff", "#eff0ff", "#eff0ff", "#f1f1ff", "#f0f1ff", "#f3f3ff", "#f3f2ff", "#f5f4ff", "#f5f3ff", "#f7f5ff", "#f7f5ff", "#faf7ff", "#f9f6ff", "#fcf8ff", "#fcf7ff", "#fefaff", "#fef9ff", "#fff9fd", "#fff9fd", "#fff9fb", "#fff8fb", "#fff8f8", "#fff6f8", "#fff7f5", "#fff5f5", "#fff6f3", "#fff4f2", "#fff5f0", "#fff3ef", "#fff4ed", "#fff2ec", "#fff3ea", "#fff0e9", "#fff1e7", "#ffefe6", "#fff0e4", "#ffeee3", "#ffefe1", "#ffece0", "#ffeede", "#ffebdc", "#ffedda", "#ffe9d9", "#ffebd7", "#ffe8d5", "#ffead3", "#ffe6d2", "#ffe8d0", "#ffe4ce", "#ffe7cc", "#ffe3ca", "#ffe5c8", "#ffe1c6", "#ffe4c4", "#ffdfc2", "#ffe2c0", "#ffddbe", "#ffe1bc", "#ffdbba", "#ffdfb8", "#ffd9b6", "#ffddb4", "#ffd7b1", "#ffdbaf", "#ffd5ad", "#ffd9ab", "#ffd3a8", "#ffd7a6", "#ffd1a3", "#ffd5a1", "#ffce9f", "#ffd39c", "#ffcc99", "#ffd097", "#ffc994", "#ffce92", "#ffc78f", "#ffcb8d", "#ffc489", "#ffc987", "#ffc184", "#ffc682", "#ffbe7e", "#ffc37c", "#ffbb78", "#ffc076", "#ffb872", "#ffbd6f", "#ffb46b", "#ffb969", "#ffb165", "#ffb662", "#ffad5e", "#ffb25b", "#ffa957", "#ffae54", "#ffa54f", "#ffaa4d", "#ffa148", "#ffa645", "#ff9d3f", "#ffa23c", "#ff9836", "#ff9d33", "#ff932c", "#ff9829", "#ff8e21", "#ff921d", "#ff8912", "#ff8d0b"]

```

5. 选择灯带的"七彩"模式，mode 1，模式默认为 1

mode 取值范围 1-12，1 七彩，2 七彩渐变，3 七彩跳变，4 DIY 渐变，5 DIY 流光，6 DIY 跳变，7 DIY 频闪，8 RGB 渐变，9 RGB 流光，10 RGB 跳变，11 RGB 频闪，12 音乐可视化，选择不同的模式发送不同的 mode 值即可

```json
{
  "mode": 1,
  "switch": "on"
}
```

6.  选择灯带的"七彩渐变"模式，mode 2

```json
{
  "mode": 2,
  "switch": "on"
}
```

7. 选择灯带的"七彩跳变"模式，mode 3

```json
{
  "mode": 3,
  "switch": "on"
}
```

8. 选择灯带"DIY 渐变"模式，mode 4

```json
{
  "mode": 4,
  "switch": "on"
}
```

长按"DIY 渐变"按钮进入编辑模式，调节灯光在不同颜色之间的变化快慢速度到 67，speed 速度取值范围 1-100，值越大速度越快

```json
{
  "speed": 67,
  "mode": 4
}
```

DIY 渐变模式编辑状态下，选择红色渐变，RGB 值[255,0,0]，mode 4 DIY 渐变模式，light_type 1 彩光

```json
{
  "mode": 4,
  "colorR": 255,
  "colorG": 0,
  "colorB": 0,
  "light_type": 1,
  "switch": "on"
}
```

9. 选择灯带"DIY 流光"模式，mode 5

```json
{
  "mode": 5,
  "switch": "on"
}
```

长按"DIY 流光"按钮进入编辑模式，调节灯光在不同颜色之间的变化快慢速度到 25，speed 速度取值范围 1-100，值越大速度越快

```json
{
  "speed": 25,
  "mode": 5
}
```

DIY 流光模式编辑状态下，在色盘选择 RGB 值[28,44,255]的流光颜色，mode 5 DIY 流光模式，light_type 1 彩光

```json
{
  "mode": 5,
  "colorR": 28,
  "colorG": 44,
  "colorB": 255,
  "light_type": 1,
  "switch": "on"
}
```

10. 选择灯带"DIY 跳变"模式，mode 6

```json
{
  "mode": 6,
  "switch": "on"
}
```

长按"DIY  跳变"按钮进入编辑模式，调节灯光在不同颜色之间的变化快慢速度到 100，speed 速度取值范围 1-100，值越大速度越快

```json
{
  "speed": 100,
  "mode": 6
}
```

DIY  跳变模式编辑状态下，在色盘选择 RGB 值[255,0,230]的跳变颜色，mode 6 DIY 跳变模式，light_type 1 彩光

```json
{
  "mode": 6,
  "colorR": 255,
  "colorG": 0,
  "colorB": 230,
  "light_type": 1,
  "switch": "on"
}
```

11. 选择灯带"DIY 频闪"模式，mode 7

```json
{
  "mode": 7,
  "switch": "on"
}
```

长按"DIY  频闪"按钮进入编辑模式，调节灯光在不同颜色之间的变化快慢速度到 1，speed 速度取值范围 1-100，值越大速度越快

```json
{
  "speed": 1,
  "mode": 6
}
```

DIY 频闪模式编辑状态下，在色盘选择 RGB 值[255,136,0]的频闪颜色，mode 7 DIY 频闪模式，light_type 1 彩光

```json
{
  "mode": 7,
  "colorR": 255,
  "colorG": 136,
  "colorB": 0,
  "light_type": 1,
  "switch": "on"
}
```

12. 选择灯带的"RGB 渐变"模式，mode 8

```json
{
  "mode": 8,
  "switch": "on"
}
```

13. 选择灯带的"RGB 流光"模式，mode 9

```json
{
  "mode": 9,
  "switch": "on"
}
```

14. 选择灯带的"RGB  跳变"模式，mode 10

```json
{
  "mode": 10,
  "switch": "on"
}
```

15. 选择灯带的"RGB  频闪"模式，mode 11

```json
{
  "mode": 11,
  "switch": "on"
}
```

16. 选择灯带"音乐可视化"模式，mode 12

```json
{
  "mode": 12,
  "switch": "on"
}
```

长按"音乐可视化"按钮进入编辑模式，使用设备控制器收听正在播放的音乐，根据音乐调节灯光的颜色和亮度变化快慢速度到 47，speed 速度取值范围 1-100，值越大速度越快

```json
{
  "speed": 47,
  "mode": 6
}
```

"音乐可视化"模式编辑状态下，调节颜色转换程度到 10，sensitive 灵敏度 取值范围 1-10，值越大颜色转换越快

```json
{
  "mode": 12,
  "sensitive": 10
}
```

17. 设置灯带在 2019 年 7 月 2 日 12 点 15 分定时打开，单次执行不重复

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "once",
      "at": "2019-07-02T04:15:00.278Z",
      "type": "once",
      "do": {
        "switch": "on"
      },
      "mId": "4d5fbdaf-d1c3-caf1-1b34-7c5f26dbdf0c"
    }
  ]
}
```

备注：

- coolkit_timer_type：timer 的类型，定时器中 once 表示单次执行，repeat 表示重复执行，可以启用/禁用
- do：需设备执行的动作，灯带定时可执行的动作是灯光开关 switch，on 开，off 关

18. 设置灯带在 2019 年 7 月 2 日 12 点 15 分延时 6 分钟即 12 点 21 分时关闭，单次执行不重复

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "delay",
      "at": "2019-07-02T04:21:00.934Z",
      "period": "6",
      "type": "once",
      "do": {
        "switch": "off"
      },
      "mId": "5e91ffd7-716f-21c3-8458-6931c442b88a"
    }
  ]
}
```

### UIID66 Zigbee 网关

子设备管理流程此处不列出，如需完整文档请联系技术支持，未付费的开发者无法获取文档。

#### 参数说明

<div class="table-center">

| 参数名        | 数据类型       | 取值范围    | 参数说明                                                                                              |
| ------------- | -------------- | ----------- | ----------------------------------------------------------------------------------------------------- |
| battery       | Number         | [0,100]     | 电池电量                                                                                              |
| trigTime      | String         |             | 最后上报状态的 13 位时间戳，精确到毫秒。设备需要保证时间的准确性，服务端和 APP 历史记录根据该值存储。 |
| smoke         | Number         | [0,1]       | 检测到有烟或无烟状态。0 无烟， 1 有烟                                                                 |
| motion        | Number         | [0,1]       | 检测有人或无人状态。0 无人，1 有人。                                                                  |
| lock          | Number         | [0,1]       | 检测到开门或者关门。0 关门，1 开门。                                                                  |
| water         | Number         | [0,1]       | 检测到有水或者无水。0 无水，1 水浸。                                                                  |
| key           | Number         | [0,2]       | 代表无线按键的按键触发，0 单击， 1 双击 ，2 长按。                                                    |
| switches      | Array\<Object> | [1-4]       | 所有通道的开关状态的集合，元素个数范围[1-4]                                                           |
| brightness    | Number         | [1-100]     | 亮度，取值范围表示为亮度百分比                                                                        |
| rgbBrightness | Number         | [1-100]     | 五色灯彩光模式下的亮度百分比                                                                          |
| cctBrightness | Number         | [1-100]     | 五色灯白光模式下的亮度百分比                                                                          |
| colorTemp     | Number         | [1-100]     | 色温,取值范围表示为子设备可支持的色温范围的百分比，（0：暖黄最值；100：白光最值）                     |
| hue           | Number         | [0-359]     | 色相，采用标准色相环，3 点钟方向为 0（红），逆时针按 1° 递增                                          |
| saturation    | Number         | [1-100]     | 色彩饱和度,取值范围表示饱和度百分比                                                                   |
| colorMode     | Number         | "cct","rgb" | 目标色彩模式，cct 表示为白光模式，rgb 表示为彩光模式                                                  |

</div>

#### UIID1000 Zigbee 无线按键

```json
{
  "key": 0, // 0 单击、 1 双击  2 长按
  "battery": 50, //0-100代表电量分比
  "trigTime": "1234567890123" //13位字符串 时间戳，和服务器时间一致
}
```

参数说明：

- key：按键触发事件，Number 类型。取值范围[0,2]，0 单击，1 双击， 2 ⻓按
- battery：电池电量百分⽐，Number 类型。取值范围[0,100]
- trigTime：触发时间，String 类型。取值为：最后上报状态的 13 位时间戳，精确到毫秒

使⽤场景：

设备发⽣按键事件后，向云端推送相关的 update 指令。app 收到指令后显⽰事件列表。

#### UIID1009 Zigbee 单通道插座

```json
{
  "switch": "on"
}
```

参数说明：

switch: 通道状态，String 类型。取值 on/off，表⽰通道开/关，添加完成默认 on；

使用场景：

- 设备更新自身状态；
- APP 设置设备状态

设置定时器：

```json
{
  "timers": [
    {
      //延时
      "mId": "6bdfc96c-0962-ad75-c430-15d9eb351154",
      "type": "once",
      "at": "2020-12-16T18:37:00.761Z",
      "coolkit_timer_type": "delay",
      "enabled": 1,
      "do": {
        "switch": "on"
      },
      "period": "390"
    },
    {
      //单次定时
      "mId": "c5601da9-aa5f-0946-a1fd-2a2a35daf59a",
      "type": "once",
      "at": "2020-12-16T13:11:00.974Z",
      "coolkit_timer_type": "once",
      "enabled": 1,
      "do": {
        "switch": "on"
      }
    },
    {
      //重复定时
      "mId": "870262af-4f9c-7d23-318b-f65d5a79d3eb",
      "type": "repeat",
      "at": "6 15 * * 0,1,2,3,4,5,6",
      "coolkit_timer_type": "repeat",
      "enabled": 1,
      "do": {
        "switch": "on"
      }
    },
    {
      //循环定时-重复 开始时间到了后 开启设备，然后每30分钟执行一次打开
      "mId": "fcfd83d5-4c8c-50c6-73e8-aeadeac5abdc",
      "type": "duration",
      "at": "2020-12-16T15:23:00.140Z 30",
      "coolkit_timer_type": "duration",
      "enabled": 1,
      "do": {
        "switch": "on"
      }
    },
    {
      //循环定时-交替 每60分钟一个周期，开始时间到了后 关闭设备，然后30分钟后开启设备，30分钟后关闭设备...
      "mId": "fcfd83d5-4c8c-50c6-73e8-aeadeac5abdc",
      "type": "duration",
      "at": "2020-12-16T15:23:00.140Z 60 30",
      "coolkit_timer_type": "duration",
      "enabled": 1,
      "startDo": {
        "switch": "off"
      },
      "endDo": {
        "switch": "on"
      }
    }
  ]
}
```

#### UIID1256 Zigbee 单通道开关

协议、功能和 UIID1009 基本相同。

#### UIID1257 Zigbee 单色灯

开关灯：

```json
{
  "switch": "on" // on 打开，off关闭
}
```

参数说明：

switch: 通道状态，String 类型。取值 on/off，表⽰通道开/关，添加完成默认 on

使⽤场景：

- APP 设置⼦设备通道状态
- ⼦设备本地状态发⽣变化时上报
- 设备上线时同步⼦设备通道状态⾄ APP

设置亮度：

```json
{
  "switch": "on",
  "brightness": 100 // 亮度百分比
}
```

参数说明：

- switch：通道状态，必选，String 类型，取值必须为 on;
- brightness：亮度百分⽐，必选，Number 类型，取值范围[1 - 100]；⼦设备添加完成，亮 度默认 100%

使⽤场景：

APP 设置⼦设备亮度

#### UIID1258 Zigbee 双色灯

开关灯：

```json
{
  "switch": "on" // on 打开，off关闭
}
```

参数说明：

switch: 通道状态，String 类型。取值 on/off，表⽰通道开/关，添加完成默认 on

使⽤场景：

- APP 设置⼦设备通道状态
- ⼦设备本地状态发⽣变化时上报
- 设备上线时同步⼦设备通道状态⾄ APP

设置亮度：

```json
{
  "switch": "on",
  "brightness": 100 // 亮度百分比
}
```

参数说明：

- switch：通道状态，必选，String 类型，取值必须为 on;
- brightness：亮度百分⽐，必选，Number 类型，取值范围[1 - 100]；⼦设备添加完成，亮 度默认 100%

使⽤场景：APP 设置⼦设备亮度

设置色温：

```json
{
  "switch": "on",
  "colorTemp": 100
}
```

参数说明：

- switch：通道状态，必选，String 类型，取值必须为 on
- colorTemp：⾊温，必选，Number 类型，取值范围[0 - 100]；⼦设备添加完成，⾊温默认冷⾊，默认取值值 100

使⽤场景：

APP 设置⼦设备⾊温

#### UIID1770 Zigbee 温湿度传感器

```json
{
  "temperature": "2558",
  "humidity": "5211",
  "battery": 100,
  "trigTime": "1576348190529"
}
```

参数说明：

- temperature：温度，单位摄氏度。数值=实际温度值 x100
- humidity：湿度百分比，数值=实际湿度值 x100
- battery：电池电量百分比，[0,100]
- trigTime：触发时间，最后上报状态的 13 位时间戳，精确到毫秒

使⽤场景：

设备更新自身状态

#### UIID2026 Zigbee 移动传感器

上报移动事件：

```json
{
  "motion": 1,
  "battery": 50,
  "trigTime": "1234567890123"
}
```

参数说明：

- motion：移动事件，Number 类型。取值范围[0,1]，0 ⽆⼈，1 有⼈
- battery：电池电量百分⽐，Number 类型。取值范围[0,100]
- trigTime：触发时间，String 类型。取值为：最后上报状态的 13 位时间戳，精确到毫秒

使⽤场景：

设备发⽣移动事件后，向云端推送相关的 update 指令。app 收到指令后显⽰事件列表

#### UIID2256 Zigbee 双通道开关

```json
{
  "switches": [
    { "switch": "off", "outlet": 0 },
    { "switch": "off", "outlet": 1 }
  ]
}
```

参数说明：

- switches：通道列表，当只有一个通道变化时，只会上报一个通道的值
- switch: 通道状态，String 类型。取值 on/off，表⽰通道开/关，添加完成默认 on
- outlet: 通道号，0 通道一，1 通道二

使⽤场景：

- 设备更新自身状态；
- APP 设置设备状态

设置定时器：

```json
{
  "timers": [
    {
      //延时
      "mId": "6bdfc96c-0962-ad75-c430-15d9eb351154",
      "type": "once",
      "at": "2020-12-16T18:37:00.761Z",
      "coolkit_timer_type": "delay",
      "enabled": 1,
      "do": {
        "switch": "on",
        "outlet": 0
      },
      "period": "390"
    },
    {
      //单次定时
      "mId": "c5601da9-aa5f-0946-a1fd-2a2a35daf59a",
      "type": "once",
      "at": "2020-12-16T13:11:00.974Z",
      "coolkit_timer_type": "once",
      "enabled": 1,
      "do": {
        "switch": "on",
        "outlet": 1
      }
    },
    {
      //重复定时
      "mId": "870262af-4f9c-7d23-318b-f65d5a79d3eb",
      "type": "repeat",
      "at": "6 15 * * 0,1,2,3,4,5,6",
      "coolkit_timer_type": "repeat",
      "enabled": 1,
      "do": {
        "switch": "on",
        "outlet": 1
      }
    }
  ]
}
```

#### UIID3026 Zigbee 门窗传感器

上报开关事件：

```json
{
  "battery": 50,
  "lock": 1,
  "trigTime": "1234567890123"
}
```

参数说明

- lock：表⽰⻔窗的开关状态，Number 类型。取值范围[0,1]，0 关⻔，1 开⻔
- battery：电池电量百分⽐，Number 类型。取值范围[0,100]
- trigTime：触发时间，String 类型。取值为：最后上报状态的 13 位时间戳，精确到毫秒

使⽤场景：

设备发⽣开关事件后，向云端推送相关的 update 指令。app 收到指令后显⽰事件列表

#### UIID3256 Zigbee 三通道开关

```json
{
  "switches": [
    { "switch": "off", "outlet": 0 },
    { "switch": "off", "outlet": 1 },
    { "switch": "off", "outlet": 2 }
  ]
}
```

参数说明：

- switches：通道列表，当只有一个通道变化时，只会上报一个通道的值
- switch: 通道状态，String 类型。取值 on/off，表⽰通道开/关，添加完成默认 on
- outlet: 通道号，0 通道一，1 通道二，2 通道三

使⽤场景：

- 设备更新自身状态；
- APP 设置设备状态

设置定时器：

和 UIID2256 类似，增加一路通道控制参数。

#### UIID3258 Zigbee 五色灯

开关灯：

```json
{
  "switch": "on" // on 打开，off关闭
}
```

参数说明：

switch: 通道状态，String 类型。取值 on/off，表⽰通道开/关，添加完成默认 on

使⽤场景：

- APP 设置⼦设备通道状态
- ⼦设备本地状态发⽣变化时上报
- 设备上线时同步⼦设备通道状态⾄ APP

设置亮度：

```json
{
  "switch": "on",
  "cctBrightness": 100,
  "rgbBrightness": 100
}
```

参数说明：

- switch：通道状态，必选，String 类型，取值必须为 on
- cctBrightness：白光模式下的亮度百分比；当设备在白光模式下时必选，在彩光模式下必不可选；Number 类型，取值范围[1 - 100]；子设备添加完成，默认值 100
- rgbBrightness：彩光模式下的亮度百分比；当设备在彩光模式下时必选，在白光模式下必不可选；Number 类型，取值范围[1 - 100]；子设备添加完成，默认值 100

使用场景：APP 设置子设备亮度

设置色温：

```json
{
  "switch": "on",
  "colorTemp": 100
}
```

参数说明：

- switch：通道状态，必选，String 类型，取值必须为 on
- colorTemp：色温，必选，Number 类型，取值范围[0 - 100]；子设备添加完成，色温默认冷色，默认取值 100

使用场景：白光模式下，APP 设置子设备色温

设置色相或饱和度：

```json
{
  "switch": "on",
  "hue": 0,
  "saturation": 100
}
```

参数说明：

- switch：通道状态，必选，String 类型，取值必须为 on
- hue：色相，必选，Number 类型，取值范围[0 - 359]；子设备添加完成，色相默认红色，默认值：0
- saturation：饱和度，必选，Number 类型，取值范围[0 - 100]；默认值：100

使用场景：

- 彩光模式下，APP 设置子设备色相
- 彩光模式下，APP 设置子设备饱和度

模式切换：

```json
// 切换至白光模式：

{
    "colorMode": "cct",
    "switch": "on",
    "cctBrightness": 100,
    "colorTemp": 100
}

// 切换至彩光模式：

{
    "colorMode": "rgb",
    "switch": "on",
    "rgbBrightness": 100,
    "hue": 0,
    "saturation": 100
}

```

参数说明：

- switch：通道状态，必选，String 类型，取值必须为 on
- colorMode：目标色彩模式，必选，String 类型，取值 cct/rgb，cct 白光模式，rgb 彩光模式
- hue：色相，切换至彩光模式时必选，切换至白光模式时必不可选；Number 类型，取值范围[0 - 359]；子设备添加完成，色相默认红色，默认值：0
- saturation：饱和度，切换至彩光模式时必选，切换至白光模式时必不可选，Number 类型，取值范围[0 - 100]；默认值：100；
- colorTemp：色温，切换至白光模式时必选，切换至彩光模式时必不可选；Number 类型，取值范围[0 - 100]；子设备添加完成，色温默认冷色，默认取值 100
- cctBrightness：白光模式下的亮度百分比；切换至白光模式时必选，切换至彩光模式时必不可选；Number 类型，取值范围[1 - 100]；子设备添加完成，默认值 100
- rgbBrightness：彩光模式下的亮度百分比；切换至彩光模式时必选，切换至白光模式时必不可选；Number 类型，取值范围[1 - 100]；子设备添加完成，默认值 100

使用场景：APP 切换色彩模式

说明：子设备为新添加的设备时，若需切换到目标模式，应根据目标模式默认值发送长连接指令
目标模式下已经调过光，手机 app 切换至目标模式时，应根据服务器上的最新调光记录发送长连接指令

#### UIID 4026 Zigbee 水浸传感器

上报⽔浸事件：

```json
{
  "water": 1,
  "battery": 50,
  "trigTime": "1234567890123"
}
```

参数说明：

- water：表⽰是否发⽣⽔浸事件，Number 类型。取值范围[0,1]，0 ⽆⽔，1 ⽔浸
- battery：电池电量百分⽐，Number 类型。取值范围[0,100]
- trigTime：触发时间，String 类型。取值为：最后上报状态的 13 位时间戳，精确到毫 秒

使⽤场景：设备发⽣进⽔事件后，向云端推送相关的 update 指令。APP 收到指令后显⽰事件列表

#### UIID4256 Zigbee 四通道开关

开关：

```json
{
  "switches": [
    { "switch": "on", "outlet": 0 },
    { "switch": "on", "outlet": 1 },
    { "switch": "off", "outlet": 2 },
    { "switch": "off", "outlet": 3 }
  ]
}
```

参数说明：

- switches：通道列表，当只有一个通道变化时，只会上报一个通道的值
- switch: 通道状态，String 类型。取值 on/off，表⽰通道开/关，添加完成默认 on
- outlet: 通道号，0 通道一，1 通道二，2 通道三，3 通道四

使⽤场景：

- 设备更新自身状态；
- APP 设置设备状态

设置定时器：

和 UIID2256 类似，增加两路通道控制参数。

#### UIID5026 Zigbee 烟雾传感器

上报电量信息：

```json
{
  "battery": 50
}
```

参数说明：

battery：传感器电量信息，Number 类型。取值范围[0,100]

使⽤场景：设备电量变化时上报

上报烟雾告警状态：

```json
{
  "trigTime": "1597648671620",
  "smoke": 0
}
```

参数说明：

- smoke：烟雾告警事件，必选，Number 类型。取值范围[0,1]，0 ⽆烟，1 有烟
- trigTime：触发时间，必选，String 类型。取值为：最后上报状态的 13 位时间戳，精确到毫 秒

使⽤场景：⼦设备检测到状态变化时上报

#### UIID7002 Zigbee 人体传感器\_支持 OTA

协议、功能和 UIID2026 基本相同，只是增加了支持 OTA 功能。

#### UIID7003 Zigbee 门磁\_支持 OTA

协议、功能和 UIID3026 基本相同，只是增加了支持 OTA 功能。

#### UIID7004 Zigbee 单通道开关 ­\_支持 OTA

协议、功能和 UIID1009 基本相同，只是增加了支持 OTA 功能。

### UIID77 单通道插座-多通道版

#### 参数说明

| 参数名    | 数据类型       | 取值范围 | 参数说明                                       |
| --------- | -------------- | -------- | ---------------------------------------------- |
| switches  | Array\<Object> |          | 所有通道的开关状态，单通道插座只能用通道 1     |
| pulses    | Array\<Object> |          | 所有通道的点动开关状态，单通道插座只能用通道 1 |
| configure | Array\<Object> |          | 所有通道的上电保持状态，单通道插座只能用通道 1 |
| timers    | Array\<Object> |          | 定时器对象，每种设备类型的执行动作会不同       |

switches 参数说明：

| 名称   | 类型   | 允许为空 | 说明                                     |
| :----- | :----- | :------- | :--------------------------------------- |
| switch | String | on,off   | 通道的开关，on 打开，off 关闭            |
| outlet | Number | [0,3]    | 取值范围 0-3，分别表示通道 1-4，不能重复 |

configure 参数说明：

| 名称    | 类型   | 允许为空    | 说明                                                         |
| :------ | :----- | :---------- | :----------------------------------------------------------- |
| startup | String | on,stay,off | 特定通道的上电保持状态，on 上电开，stay 上电保持，off 上电关 |
| outlet  | Number | [0,3]       | 取值范围 0-3，分别表示通道 1-4，不能重复                     |

pulses 参数说明：

| 名称       | 类型   | 允许为空                                         | 说明                                                                                                            |
| :--------- | :----- | :----------------------------------------------- | :-------------------------------------------------------------------------------------------------------------- |
| pulse      | String | on,off                                           | 点动时间开关，on 打开，off 关闭                                                                                 |
| pulseWidth | Number | [500,3600000]（单位：毫秒，支持设置 500 的整数） | 点动时间长短，取值范围 500-3600000（单位毫秒，即 0.5 秒-3600 秒），仅支持设置取值 500 毫秒（即 0.5 秒）的整数倍 |
| outlet     | Number | [0,3]                                            | 取值范围 0-3，分别表示通道 1-4，不能重复                                                                        |

#### 控制指令

1、打开插座

```json
{
  "switches": [
    {
      "switch": "on",
      "outlet": 0
    },
    {
      "switch": "off",
      "outlet": 1
    },
    {
      "switch": "off",
      "outlet": 2
    },
    {
      "switch": "off",
      "outlet": 3
    }
  ]
}
```

2、关闭插座

```json
{
  "switches": [
    {
      "switch": "off",
      "outlet": 0
    },
    {
      "switch": "off",
      "outlet": 1
    },
    {
      "switch": "off",
      "outlet": 2
    },
    {
      "switch": "off",
      "outlet": 3
    }
  ]
}
```

其他功能包括定时器和 UIID2 保持一致，需要注意本 UIID77 单通道插座只能用通道 1 的参数，其他通道设置无效。


### UIID78 单通道开关-多通道版

与 UIID4 保持一致，控制开关的参数在通道 0 上。

### UIID82 GSM/4G 双通道插座-无流量版本

与 UIID2 保持一致。

### UIID83 GSM/4G 三通道插座-无流量版本

与 UIID3 保持一致。

### UIID84 GSM/4G 四通道插座-无流量版本

与 UIID4 保持一致。

### UIID102 WiFi 门磁

本设备不支持定时器。

功能描述：

| 序号 | 功能     | 功能说明                           | APP 支持 | 小程序支持 |
| ---- | -------- | ---------------------------------- | -------- | ---------- |
| 1    | 电量显示 | 显示门磁电量状态，电量充足或电量低 | √        | √          |
| 2    | 门磁状态 | 显示门磁状态，分开或闭合           | √        | √          |
| 3    | OTA 升级 | 设备端有新固件时，可升级           | √        | √          |

#### 参数说明

| 名称           | 类型   | 允许为空 | 说明                                                                                                                                                                                               |
| -------------- | ------ | -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| switch         | String | N        | 开关状态，"on" 代表打开，"off" 代表关闭                                                                                                                                                            |
| battery        | String | N        | 当前电压值，取值范围 0-3V，配合 lowVolAlarm 来判断设备是否处于低电量模式。注意：lowVolAlarm 为 devConfig 对象中的参数，当 battery<lowVolAlarm 时显示低电量，当 battery>=lowVolAlarm 时显示电量充足 |
| type           | Number | N        | 上报类型，server 端根据这个类型判断是否向 App push 通知，1: 短按触发，退出休眠状态后上报；2: 开门后上报；3: 关门后上报；4: 定时上报，比如每间隔一小时上报；5: 短按两次（双击）闭                   |
| lastUpdateTime | String | Y        | 设备最后一次上报的时间，App 端根据此字段记录的时间与当前时间的差值来判断设备是否离线，该字段不是设备上报，由服务端补充。                                                                           |
| actionTime     | String | Y        | 设备最后一次开关门的时间，该字段不是设备上报，由服务端补充。                                                                                                                                       |

上线逻辑：

注意：APP 检查设备上下线状态（当前时间距离上次上报数据（lastUpdateTime）或者操作时间（actionTime） 大于等于 2 小时 5 分钟表示离线，否则表示在线）

设备通过 HTTP 接口向服务端发送请求后，服务端会在设备的 params 字段中添加 lastUpdateTime 和 actionTime 两个参数。

### UIID103 双色冷暖灯\_支持随调及场景

#### 参数说明

| 参数名     | 数据类型       | 取值范围                              | 参数说明                                                                                             |
| ---------- | -------------- | ------------------------------------- | ---------------------------------------------------------------------------------------------------- |
| pVer       | String         |                                       | 当前协议版本号，能力协商。和当前协议最后一个版本一致，例如：{"pVer":"2.0"}。设备上线以后，需要上传。 |
| white      | WhiteObject    |                                       | 白光模式下的取值                                                                                     |
| bright     | WhiteObject    |                                       |                                                                                                      |
| read       | WhiteObject    |                                       |                                                                                                      |
| computer   | WhiteObject    |                                       |                                                                                                      |
| nightLight | WhiteObject    |                                       |                                                                                                      |
| timers     | Array\<Object> |                                       | 定时器，当前双色冷暖灯的定时、延时动作只支持开关                                                     |
| ops_mode   | String         | diy,ewelink                           | 该字段在长连接和 DIY 模式下公用，diy 进入 DIY 模式；ewelink 回到 eWeLink 模式                        |
| switch     | String         | on,off                                | 灯的开关，on 打开，off 关闭                                                                          |
| ltype      | Int            | white,bright,read,computer,nightLight | 灯的模式                                                                                             |

WhiteObject 参数说明：

| 参数名 | 数据类型 | 取值范围 | 说明                    |
| ------ | -------- | -------- | ----------------------- |
| br     | Number   | [1,100]  | 亮度(brighteness)       |
| ct     | Number   | [0,255]  | 色温(color temperature) |

#### 控制指令

1、开关灯

示例：APP 发送打开灯，on 开，off 关

```json
{
  "switch": "on"
}
```

2、白光模式

切换到白光模式或其他模式一定要同时发送一个 {"switch":"on"}

示例：白光模式下，亮度值调整到 50

注意：在调整亮度或者色温的时候，要把两个值一起发送。

```json
{
  "ltype": "white",
  "white": {
    "br": 50,
    "ct": 125
  }
}
```

3、情景模式设置

固定的四种情景模式：app 端会固定显示四种模式给用户选择，当用户点击某一种模式后，按照固定的亮度值和色温值发送给设备。

- bright：明亮模式，亮度值 100，色温值 255；
- read：阅读模式，亮度值 50，色温值 0；
- computer：工作模式，亮度值 20，色温值 255；
- nightLight：夜灯模式，亮度值 5，色温值 0。

例如，当用户选择 "阅读模式"

```json
{
  "ltype": "read",
  "read": {
    "br": 50,
    "ct": 0
  }
}
```

4、单次定时

设置灯在 2020 年 5 月 29 日 17 点 08 分定时打开，单次执行不重复

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "once",
      "at": "2020-05-29T09:08:00.315Z",
      "type": "once",
      "do": {
        "switch": "on"
      },
      "mId": "91959d3b-5885-718d-13c5-e69cd48de862"
    }
  ]
}
```

5、单次延时

设置灯在 2020 年 5 月 29 日 17 点 10 分延时 6 分钟即 17 点 16 分时关闭，单次执行不重复

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "delay",
      "at": "2020-05-29T09:16:00.101Z",
      "period": "6",
      "type": "once",
      "do": {
        "switch": "off"
      },
      "mId": "e4777ab0-a74e-ed60-aeac-1ea23b112069"
    }
  ]
}
```

### UIID104 RGB 五色灯\_支持随调及场景

#### 参数说明

| 参数名     | 数据类型       | 取值范围                                                                 | 参数说明                                                                                             |
| ---------- | -------------- | ------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------- |
| switch     | String         | on,off                                                                   | 灯的开关，on 打开，off 关闭                                                                          |
| pVer       | String         |                                                                          | 当前协议版本号，能力协商。和当前协议最后一个版本一致，例如：{"pVer":"2.0"}。设备上线以后，需要上传。 |
| ltype      | String         | white,color,bright,goodNight,read,nightLight,party,leisure,soft,colorful | 灯的模式                                                                                             |
| white      | WhiteObject    |                                                                          | 白光模式下的取值                                                                                     |
| color      | ColorObject    |                                                                          | 彩光模式下的取值                                                                                     |
| bright     | ModeObject     |                                                                          | 情景不可编辑                                                                                         |
| goodNight  | ModeObject     |                                                                          | 情景不可编辑                                                                                         |
| read       | ModeObject     |                                                                          | 情景不可编辑                                                                                         |
| nightLight | ModeObject     |                                                                          | 情景不可编辑                                                                                         |
| party      | ModeObject     |                                                                          | 情景可编辑                                                                                           |
| leisure    | ModeObject     |                                                                          | 情景可编辑                                                                                           |
| soft       | ModeObject     |                                                                          | 情景可编辑                                                                                           |
| colorful   | ModeObject     |                                                                          | 情景可编辑                                                                                           |
| ops_mode   | String         | diy,ewelink                                                              | 该字段在长连接和 DIY 模式下公用，diy 进入 DIY 模式；ewelink 回到 eWeLink 模式                        |
| timers     | Array\<Object> |                                                                          | 定时器，当前 RGB 五色灯的定时、延时动作只支持开关。                                                  |

WhiteObject 参数说明：

| 参数名 | 数据类型 | 取值范围 | 说明 |
| ------ | -------- | -------- | ---- |
| br     | Number   | [1,100]  | 亮度 |
| ct     | Number   | [0,255]  | 色温 |

ColorObject 参数说明：

| 参数名 | 数据类型 | 取值范围 | 说明   |
| ------ | -------- | -------- | ------ |
| br     | Number   | [1,100]  | 亮度   |
| r      | Number   | [0,255]  | 红色值 |
| g      | Number   | [0,255]  | 绿色值 |
| b      | Number   | [0,255]  | 蓝色值 |

ModeObject 说明（注意，不是每种模式都有这些字段）：

| 参数名 | 数据类型 | 取值范围 | 说明                                     |
| ------ | -------- | -------- | ---------------------------------------- |
| br     | Number   | [1,100]  | 亮度                                     |
| ct     | Number   | [0,255]  | 色温                                     |
| r      | Number   | [0,255]  | 红色值                                   |
| g      | Number   | [0,255]  | 绿色值                                   |
| b      | Number   | [0,255]  | 蓝色值                                   |
| name   | String   |          | 自定义情景名称                           |
| tf     | Number   | [1,4]    | 颜色模式，1 静态；2 渐变；3 跳变；4 呼吸 |
| sp     | Number   | [1,100]  | 颜色变化速度                             |

#### 控制指令

1、开关灯

示例：APP 发送打开灯，on 开，off 关

```json
{
  "switch": "on"
}
```

2、白光模式

切换到白光模式或彩光模式一定要同时发送一个 {"switch":"on"}

示例：白光模式下，亮度值调整到 50

注意：在调整亮度或者色温的时候，要把两个值一起发送。

```json
{
  "ltype": "white",
  "white": {
    "br": 50,
    "ct": 128
  }
}
```

3、彩光模式

示例：调整颜色为红色，亮度 50%

```json
{
  "ltype": "color",
  "color": {
    "r": 255,
    "g": 0,
    "b": 0,
    "br": 1
  }
}
```

4、情景模式

固定的 8 种情景模式：app 端会固定显示 8 种模式给用户选择，当用户点击某一种模式后后，按照固定的亮度值和色温值发送给设备。

```json
//明亮
{
    "ltype":"bright",
    "bright":{
        "r":255,
        "g:":255,
        "b":255,
        "br":100
    }
}
//晚安
{
    "ltype": "goodNight",
    "goodNight": {
        "r": 255,
        "g:": 254,
        "b": 127,
        "br": 25
    }
}
//阅读
{
    "ltype":"read",
    "read":{
        "r":255,
        "g:":255,
        "b":255,
        "br":60
    }
}
//夜灯
{
    "ltype":"nightLight",
    "nightLight":{
        "r":255,
        "g:":242,
        "b":226,
        "br":5
    }
}
//聚会
{
    "ltype":"party",
    "party":{
        "r":254,
        "g:":132,
        "b":0,
        "br":45,
        "tf":1,
        "sp":1
    }
}
//休闲
{
    "ltype":"leisure",
    "leisure":{
        "r":0,
        "g:":40,
        "b":254,
        "br":55,
        "tf":1,
        "sp":1
    }
}
//柔光
{
    "ltype":"soft",
    "soft":{
        "r":38,
        "g:":254,
        "b":0,
        "br":20,
        "tf":1,
        "sp":1
    }
}
//缤纷
{
    "ltype":"colorful",
    "colorful":{
        "r":255,
        "g:":0,
        "b":0,
        "br":100,
        "tf":1,
        "sp":1
    }
}
```

5、单次定时

示例：设置灯在 2020 年 5 月 29 日 17 点 08 分定时打开，单次执行不重复

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "once",
      "at": "2020-05-29T09:08:00.315Z",
      "type": "once",
      "do": {
        "switch": "on"
      },
      "mId": "91959d3b-5885-718d-13c5-e69cd48de862"
    }
  ]
}
```

6、单次延时

示例：设置灯在 2020 年 5 月 29 日 17 点 10 分延时 6 分钟即 17 点 16 分时关闭，单次执行不重复

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "delay",
      "at": "2020-05-29T09:16:00.101Z",
      "period": "6",
      "type": "once",
      "do": {
        "switch": "off"
      },
      "mId": "e4777ab0-a74e-ed60-aeac-1ea23b112069"
    }
  ]
}
```

### UIID107 GSM 单通道插座 - 多通道协议

和 UIID77 保持一致。

### UIID112 单通道开关微波雷达版

#### 参数说明

| 参数名     | 数据类型  | 取值范围                                         | 参数说明                                                     |
| ---------- | --------- | ------------------------------------------------ | ------------------------------------------------------------ |
| switches   | [Switch]  |                                                  | 所有通道的开关状态                                           |
| configure  | [Config]  |                                                  | 所有通道的上电保持状态                                       |
| timers     | Array     |                                                  | 定时器类型，定时：once（单次执行）、repeat（重复执行）；延时：delay（只能单次执行） |
| sledOnline | String    | on,off（默认 on）                                | 网络指示灯开关，on 打开；off 关闭                            |
| pulses     | [Pulse]   |                                                  | 点动配置数组                                                 |
| width      | Number    | [500,3600000]（单位：毫秒，支持设置 500 的整数） | 点动时间长短，取值范围 500-3600000（单位毫秒，即 0.5 秒-3600 秒），仅支持设置取值 500 毫秒（即 0.5 秒）的整数倍 |
| senMode    | ModeObj   |                                                  | 感应开关模式设置                                             |
| savMode    | ModeObj   |                                                  | 节能模式设置                                                 |
| alertMode  | AlertMode |                                                  | 警戒模式设置                                                 |
| alert      | Nunber    | 1                                                | 设备侦测到移动，上报 1                                       |

Switch 说明：

| 参数名 | 数据类型 | 取值范围 | 参数说明                                 |
| ------ | -------- | -------- | ---------------------------------------- |
| switch | String   | on,off   | 通道的开关，on 打开，off 关闭            |
| outlet | Number   | [0,3]    | 取值范围 0-3，分别表示通道 1-4，不能重复 |

Config 说明：

| 参数名  | 数据类型 | 取值范围    | 参数说明                                                     |
| ------- | -------- | ----------- | ------------------------------------------------------------ |
| startup | String   | on,stay,off | 特定通道的上电保持状态，on 上电开，stay 上电保持，off 上电关 |
| outlet  | Number   | [0,3]       | 取值范围 0-3，分别表示通道 1-4，不能重复                     |

Pulse 说明：

| 参数名 | 数据类型 | 取值范围                                         | 参数说明                                                     |
| ------ | -------- | ------------------------------------------------ | ------------------------------------------------------------ |
| outlet | Number   | 0,1,2,3                                          | 点动设置的通道                                               |
| pulse  | String   | on,off                                           | 点动时间开关，on 打开，off 关闭                              |
| width  | Number   | [500,3600000]（单位：毫秒，支持设置 500 的整数） | 点动时间长短，取值范围 500-3600000（单位毫秒，即 0.5 秒-3600 秒），仅支持设置取值 500 毫秒（即 0.5 秒）的整数倍 |

ModeObj 说明：

| 参数名     | 数据类型     | 取值范围 | 参数说明                                                     |
| ---------- | ------------ | -------- | ------------------------------------------------------------ |
| enabled    | Number       | 0,1      | 是否启用这个模式：0 禁用 1 启用                              |
| outlets    | Array        | [0,3]    | 取值范围 0-3，分别表示通道 1-4。单通道 0                     |
| dTime      | Number       |          | 自动感应模式 5s - 60s，步长 1s，节能模式 1 分钟 - 1440 分钟,步长 1 分钟 |
| tUnit      | String       | s,m,ms   | 时间单位："s"秒,"m"分钟,"ms”毫秒，感应模式模式默认是:s；节能模式默认是 ：m |
| effectives | EffectiveObj |          | 表示感应开关模式中的生效时间段设置                           |

EffectiveObj 说明：

| 参数名   | 数据类型      | 取值范围 | 参数说明                                                     |
| -------- | ------------- | -------- | ------------------------------------------------------------ |
| outlet   | Number        | [0,3]    | 表示设置生效时间段的通道，取值范围为 0-3，且所选通道必须是感应开关模式已经选中的通道之一 |
| enabled  | Number        | 0,1      | 表示生效时间段是否启用：0 禁用，即全天生效， 1 时间段生效。默认值 0 |
| days     | Array         | [0,6]    | 表示星期几，取值范围为 0-6，0 表示星期天，1-6 依次表示星期一至星期六。可多选。默认值[0,1,2,3,4,5,6] |
| effIndex | [EffIndexObj] |          | 生效时间段.默认两个生效时间段                                |

EffIndexObj 说明：

| 参数名  | 数据类型 | 取值范围 | 参数说明                                                     |
| ------- | -------- | -------- | ------------------------------------------------------------ |
| enabled | Number   | [0,1]    | 该时间段启用禁用，0 禁用， 1 启用。默认时间段一启用，时间段二禁用。 |
| index   | Number   | [0,1]    | 表示第几个生效时间段时间段                                   |
| from    | String   |          | 表示生效时间段的起始时间，取值范围（时:分）为 00:00-23:59。默认值 00:00 |
| to      | String   |          | 表示生效时间段的终止时间，取值范围（时:分）为 00:00-23:59。默认值 23:59 |

#### 控制指令

1、单通道打开

```json
{
  "switches": [
    {
      "outlet": 0,
      "switch": "on"
    }
  ]
}
```

2、设置单通道断电后首次通电时打开开关

```json
{
  "configure": [
    {
      "outlet": 0,
      "startup": "on"
    },
    {
      "startup": "off",
      "outlet": 1
    },
    {
      "outlet": 2,
      "startup": "off"
    },
    {
      "outlet": 3,
      "startup": "off"
    }
  ]
}
```

3、设置单通道开关在 2019 年 5 月 28 日 17 点 42 分定时关闭，单次执行不重复

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "once",
      "at": "2019-05-28T09:42:00.776Z",
      "type": "once",
      "do": {
        "switch": "off",
        "outlet": 0
      },
      "mId": "96c0f48e-ce4a-3656-1c1c-2568a2eb1991"
    }
  ]
}
```

- coolkit_timer_type：timer 的类型，定时器中 once 表示单次执行，repeat 表示重复执行，可以启用/禁用
- do：需设备执行的动作，单通道设备定时可执行的动作是通道一的开关 switch，on 开，off 关

4、设置单通道开关在 2019 年 5 月 28 日 17 点 45 分延时 5 分钟即 17 点 50 分时打开，单次执行不重复

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "delay",
      "at": "2019-05-28T09:50:00.460Z",
      "period": "5",
      "type": "once",
      "do": {
        "switch": "on",
        "outlet": 0
      },
      "mId": "140f500c-3951-6a20-7082-611397d6c539"
    }
  ]
}
```

- coolkit_timer_type：timer 的类型，delay 表示延时器，只有单次执行，可以启用/禁用
- do：需设备执行的动作，单通道设备定时可执行的动作是通道一的开关 switch，on 开，off 关

5、打开单通道开关 网络指示灯的开关

```json
{
  "sledOnline": "on"
}
```

- sledOnline：设备上的网络指示灯，on 打开，off 关闭

6、设置每次操作打开单通道开关后需要在随后的 2 秒自动关闭单通道开关

```json
{
  "pulses": [
    {
      "pulse": "on",
      "width": 2000,
      "outlet": 0
    }
  ]
}
```

- pulse：点动开关，设置每次操作打开双通道开关后需要在随后某个时间执行关闭设备
- width：设置点动时间，最短 0.5 秒，最长 3600 秒，仅支持设置 0.5 秒的整数倍

7、打开自动感应模式，用户选了检测时间是 10 秒，操作的通道是 1（单通道）

```json
{
  "senMode": {
    "enabled": 1,
    "outlets": [0],
    "dTime": 10,
    "tUnit": "s"
  }
}
```

8、打开节能模式，用户选了检测时间是 1 分钟，操作的通道是 1（单通道）

```json
{
  "savMode": {
    "enabled": 1,
    "outlets": [0, 1],
    "dTime": 1,
    "tUnit": "m"
  }
}
```

9、打开报警模式

```json
{
  "alertMode": {
    "enabled": 1
  }
}
```

10、设备在警戒模式下，检测到了报警

```json
{
  "alert": 1
}
```

11、APP 设置自动感应模式的生效时间段

```json
//通道一开启自动感应模式，设置一个生效时间段周1，2，310点到18点生效
{
  "senMode": {
    "enabled": 1,
    "outlets": [0], //如果是四通道[0,1,2,3]
    "dTime": 10,
    "tUnit": "s",
    "effectives": [
      {
        "outlet": 0,
        "days": [1, 2, 3],
        "enabled": 1,
        "effIndex": [
          {
            "enabled": 1,
            "index": 0,
            "from": "10:00",
            "to": "18:00"
          },
          {
            "enabled": 0,
            "index": 1,
            "from": "00:00",
            "to": "23:59"
          }
        ]
      }
    ]
  }
}
```

字段说明：

- senMode.enabled：必选，number 类型，表示是否启用感应开关模式：0 禁用 1 启用。出厂默认为禁用。
- outlets：必选，array 类型，内部元素为 number 类型，表示感应开关模式选中的通道，取值范围为 0-3，分别表示通道 1-4，可多选，不允许为空。出厂默认为[0,1,2,3]，即通道一至通道四都选中。
- dTime：必选，number 类型，表示感应开关模式中的延时关闭时间，取值范围为 5s - 60s，步长 1s。出场默认为 10。
- tUnit：必选，string 类型，单位为秒，即"s"。
- effectives：可选，array 类型，内部元素为 object 类型，表示感应开关模式中的生效时间段，字段存在时内部至少得有一个元素。出厂默认存在，内部元素都为默认值。

effectives：

- outlet：必选，number 类型，表示设置生效时间段的通道，取值范围为 0-3，且所选通道必须是感应开关模式已经选中的通道之一。
- senMode.effectives[].enabled：必选，number 类型，表示生效时间段是否启用：0 表示禁用，1 表示启用。禁用时感应开关模式若有开启则在选中的循环时间内全天生效。出厂默认为禁用。
- days：必选，array 类型，内部元素为 number 类型，表示循环时间，即星期几，取值范围为 0-6，0 表示星期天，1-6 依次表示星期一至星期六。可多选，不允许为空。出厂默认为[0,1,2,3,4,5,6]，即周日，周一至周六。
- effIndex：senMode.effectives[].enabled 为 1（启用）时必选，为 0（禁用）时可选，array 类型，内部元素为 object 类型，字段存在时内部至少得有一个元素。出厂默认存在，内部元素都为默认值。

effIndex：

- index：必选，number 类型，表示第几个生效时间段时间段，取值范围为 0~1。
- enabled：必选，number 类型，表示是否启用该段生效时间段：0 禁用，1 启用。effIndex 字段存在时内部至少得有一个元素 enabled 为 1。出厂默认 index:0 中的 enabled 为 1（启用），index:1 中的 enabled 为 0（禁用），即时间段一启用，时间段二禁用。
- from：必选，string 类型，表示生效时间段的起始时间，取值范围（时:分）为 00:00-23:59。出厂默认为"00:00"。
- to：必选，string 类型，表示生效时间段的终止时间，取值范围（时:分）为 00:00-23:59。出厂默认为"23:59"。

备注：

- 协议上不允许同一段生效时间段的 from 字段的取值和 to 字段的取值相同的情况，因为无法确定是单天的一分钟还是跨天 24 小时，需求上没有指定该情景。但是允许 from 字段大于 to（跨天），from 字段小于 to。
- senMode.effectives[].enabled 为禁用即某个通道生效时间段功能禁用时，如果感应模式有开启，则感应模式在选中的循环时间内全天生效。如用户设置的循环时间为周一、三、五，在开启感应模式而又禁用了生效时间段功能的情况下，感应模式在周一、三、五会全天生效，而在周二、四、六、日则不生效。另外，在开启感应模式且禁用生效时间段功能的情况下，用户可以更改循环时间的设置。
- 设备端关闭感应模式时会把选中通道的生效时间段功能禁用掉（对应通道的生效时间段的其它设置信息如起始时间、终止时间依旧保留），然后把新的感应模式含生效时间段的设置信息上报服务器等。所以若服务器、App 下发指令关闭设备感应模式，则其下发的指令只允许两种情况：要么下发的指令中包含生效时间段，且生效时间段设置信息中 senMode.effectives[].enabled 为 0（禁用），其他信息与设备中的生效时间段设置信息保持一致；要么下发的指令中不包含生效时间段。
- 同一通道下的两段生效时间段可以都启用，但不能都禁用，即至少得有一段启用。

### UIID113 双通道开关微波雷达版

在 UIID112 单通道开关微波雷达版的基础上增加一路通道：

比如打开单通道是：

```json
{
  "switches": [
    {
      "outlet": 0,
      "switch": "on"
    }
  ]
}
```

打开双通道是：

```json
{
  "switches": [
    {
      "outlet": 0,
      "switch": "on"
    },
    {
      "outlet": 1,
      "switch": "on"
    }
  ]
}
```

### UIID114 三通道开关微波雷达版

在 UIID112 单通道开关微波雷达版的基础上增加两路通道：

比如打开单通道是：

```json
{
  "switches": [
    {
      "outlet": 0,
      "switch": "on"
    }
  ]
}
```

打开三通道是：

```json
{
  "switches": [
    {
      "outlet": 0,
      "switch": "on"
    },
    {
      "outlet": 1,
      "switch": "on"
    },
    {
      "outlet": 2,
      "switch": "on"
    }
  ]
}
```

### UIID181 恒温恒湿改装件\_支持历史记录

#### 通用参数

| 参数名     | 数据类型       | 取值范围                                         | 参数说明                                                     |
| ---------- | -------------- | ------------------------------------------------ | ------------------------------------------------------------ |
| switch     | String         | on,off                                           | 设备开关，on 打开，off 关闭                                  |
| startup    | String         | on,stay,off                                      | 通电反应设置，on 上电开，stay 上电保持，off 上电             |
| pulse      | String         | on,off                                           | 点动状态开关，on 打开，off 关闭                              |
| pulseWidth | Number         | [500,3600000]（单位：毫秒，支持设置 500 的整数） | 点动时间长短，取值范围 500-3600000（单位毫秒，即 0.5 秒-3600 秒），仅支持设置取值 500 毫秒（即 0.5 秒）的整数倍 |
| timers     | Array\<Object> |                                                  | 定时器对象，每种设备类型的执行动作会不同                     |
| staMac     | String         |                                                  | 设备实际 mac 地址                                            |

#### 控制指令

1、打开设备

```json
{
  "switch": "on"
}
```

2、设置自动控制模式

```json
{
  "autoControl": [
    {
      "deviceType": "temperature",
      "targets": [
        {
          "high": "25.5",
          "reaction": {
            "switch": "off"
          }
        },
        {
          "low": "24.5",
          "reaction": {
            "switch": "on"
          }
        }
      ],
      "effTime": {
        "spanType": "any",
        "days": [0, 1, 2, 4],
        "from": "00:00",
        "to": "23:59"
      }
    }
  ]
}
```

参数说明：

| 字段名      | 含义         | 类型                      | 可/必选 | 取值范围                                           | 默认值       | 备注                                                         |
| ----------- | ------------ | ------------------------- | ------- | -------------------------------------------------- | ------------ | ------------------------------------------------------------ |
| autoControl | 设置自动控制 | Array ，元素类型为 Object | 必选    | 支持设置 0 至 8 个自动控制，数组元素可为空即 [] 。 | 无自动控制。 | 设置 0 个自动控制，等同于没有设置自动控制，也等同于清空自动控制的意思。 |

autoControl 字段说明：

| 字段名     | 含义                                 | 类型                      | 可/必选 | 取值范围                                                     | 默认值 | 备注 |
| ---------- | ------------------------------------ | ------------------------- | ------- | ------------------------------------------------------------ | ------ | ---- |
| deviceType | 表示设备类型（又称控制方式）。       | String                    | 必选    | 取值范围为 {"temperature", "humidity"} ，其中： "temperature" 表示设备是恒温控制器，即设备受温度阈值控制； "humidity " 表示设备是恒湿控制器，即设备受湿度阈值控制。 |        |      |
| targets    | 表示自动控制的阈值设置及其触发动作。 | Array ，元素类型为 Object | 必选    | 数组内有且只有两个元素，第一个元素与阈值上限及其触发动作相关，第二个与阈值下限及其触发动作相关。 |        |      |
| effTime    | 表示生效时间段。                     | Object                    | 必选    | 不可为空。                                                   |        |      |

targets 字段说明：

| 字段名   | 含义                       | 类型   | 可/必选 | 取值范围                                                     | 默认值 | 备注 |
| -------- | -------------------------- | ------ | ------- | ------------------------------------------------------------ | ------ | ---- |
| high     | 表示阈值上限               | String | 必选    | 温度取值范围是 [-99.9, 127.0] ，保留一位小数，字符串形式，单位为 ℃ ；湿度取值范围是 [0.0, 100.0] ，保留一位小数，字符串形式，单位是 % 。 |        |      |
| low      | 表示阈值下限               | String | 必选    | 温度取值范围是 [-99.9, 127.0] ，保留一位小数，字符串形式，单位为 ℃ ；湿度取值范围是 [0.0, 100.0] ，保留一位小数，字符串形式，单位是 % 。 |        |      |
| reaction | 表示阈值触发时的执行动作。 | Object | 必选    | 不可为空。                                                   |        |      |

reaction 字段说明：

| 字段名 | 含义                                                         | 类型   | 可/必选 | 取值范围 |
| ------ | ------------------------------------------------------------ | ------ | ------- | -------- |
| switch | 表示设备的通道开关状态。其中 "on" 表示通道开关打开， "off" 表示通道开关关闭。 | String | 必选    | on,off   |

effTime 字段说明：

| 字段名   | 含义           | 类型     | 可/必选 | 取值范围                                                     | 默认值 | 备注                                                         |
| -------- | -------------- | -------- | ------- | ------------------------------------------------------------ | ------ | ------------------------------------------------------------ |
| spanType | 时间跨度类型。 | String   | 必选    | 取值范围为 {"any", "range"}，不允许为空。其中，"any" 表示全天生效，"range" 表示部分时间生效。spanType 为 "any" 时，代表全天生效，此时应忽略 "from" 、"to" 的具体设置值。 |        |                                                              |
| days     | 表示重复日期。 | [Number] | 必选    | 取值范围为 {0, 1, 2, 3, 4, 5, 6} 中的一个或多个，不允许为空。 |        | 取值中，0 代表周日， 1 至 6 代表周一到周六。（以开始时间的 UTC 星期几为准） |
| from     | 表示起始时间。 | String   | 必选    | 取值范围（时:分）为 00:00 ~ 23:59。                          |        | 使用 UTC 时间。                                              |
| to       | 表示结束时间。 | String   | 必选    | 取值范围（时:分）为 00:00 ~ 23:59。                          |        | 使用 UTC 时间。                                              |

注意事项：

- 每次增加、删除、修改自动控制设置信息，设置方都会把所有的自动控制设置信息一起下发给设备。
- 同一个自动控制模式下，阈值上限必须大于阈值下限，且阈值上限和阈值下限的触发动作必须是互斥的。
- 同一个自动控制模式下，生效时间段允许跨天。
- 同一个自动控制模式下，例如用户设置为 00:02 ~ 00:03，应解释为 00:02:00 到 00:02:59 都生效，而 00:03:00 及其之后都不生效，即是数学定义的半开半闭区间 [00:02, 00:03)。
- 同一个自动控制模式下，生效时间段的起始时间和结束时间不允许相等。
- 所有设定的自动控制模式中的生效时间段不允许出现重叠情况。此项由 APP 端确保。
- 当设备尚未同步过 UTC 时间时，设备不执行所设置的自动控制。
- 在已设置过 1 个或多个自动控制的情况下，用户删除最后一个自动控制即服务器下发 "autoControl": [] 指令后，服务器/APP 应立马下发或者与 "autoControl" 指令同时下发自动控制模式禁用指令，以确保设备处于禁用自动控制模式下。

3、启用与禁用自动控制模式

```json
{
  "autoControlEnabled": 0 // 0：禁用自动控制模式；1：表示启用自动控制模式。
}
```

autoControlEnabled 字段说明：

| 字段名             | 含义                        | 类型   | 可/必选 | 取值范围                                                     | 默认值 | 备注                                                         |
| ------------------ | --------------------------- | ------ | ------- | ------------------------------------------------------------ | ------ | ------------------------------------------------------------ |
| autoControlEnabled | 表示启用/禁用自动控制模式。 | Number | 必选    | 取值范围为{0, 1}，其中 0 表示禁用自动控制模式，1 表示启用自动控制模式。 | "off"  | 此处启用/禁用是指启用/禁用整个自动控制模式，而不是启用/禁用某个自动控制。 |

注意事项

- 当处于未设置过任何一个自动控制的情况下，设备不允许启用自动控制模式。因此，在未设置过任何一个自动控制的情况下，设备收到启用自动控制模式命令时会返回 400 的错误码，以示设置失败。
- 在已设置过 1 个或多个自动控制的情况下，用户删除最后一个自动控制即服务器下发 "autoControl": [] 指令后，服务器/APP 应立马下发或者与 "autoControl" 指令同时下发自动控制模式禁用指令，以确保设备处于禁用自动控制模式下。

4、下发电压-土壤湿度映射表

```json
{
  "voltage": [
    2805, 2564, 1487, 1413, 1392, 1385, 1371, 1375, 1367, 1364, 1358, 1346
  ],
  "humidity": [0, 12, 20, 42, 45, 48, 56, 64, 75, 88, 92, 100]
}
```

字段说明：

| 字段名   | 含义   | 类型                         | 可/必选 | 取值范围                                                     | 默认值                                                       | 备注 |
| -------- | ------ | ---------------------------- | ------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ---- |
| voltage  | 电压值 | Array，内部元素类型为 Number | 必选    | 电压数组与土壤湿度数组的元素个数必须一致，且元素个数必须不小于 2 个且不大于 20 个。 | [2805, 2564, 1487, 1413, 1392, 1385, 1371, 1375, 1367, 1364, 1358, 1346] |      |
| humidity | 湿度值 | Array，内部元素类型为 Number | 必选    | 电压数组与土壤湿度数组的元素个数必须一致，且元素个数必须不小于 2 个且不大于 20 个。 | [0, 12, 20, 42, 45, 48, 56, 64, 75, 88, 92, 100]             |      |

5、设置温度单位

```json
{
  "tempUnit": 0
}
```

字段说明：

| 字段名   | 含义         | 类型   | 可/必选 | 取值范围                                                     | 默认值 | 备注 |
| -------- | ------------ | ------ | ------- | ------------------------------------------------------------ | ------ | ---- |
| tempUnit | 温度的单位。 | Number | 必选    | 取值范围为 {0, 1}，其中 0 表示单位为摄氏度，1 表示单位为华氏度。 | 0      |      |
|          |              |        |         |                                                              |        |      |

注意事项：本小节所述的温度单位仅用于显示，如屏幕显示中的温度的单位、APP 显示中的温度的单位，且屏幕、APP 等中显示的温度的单位应保持一致。而设备与 APP、设备与服务器之间传输的温度值的单位固定为摄氏度。

6、设备上报当前温湿度值

```json
{
  "currentTemperature": "15",
  "currentHumidity": "50",
  "sensorType": "DS18B20"
}
```

字段说明：

| 字段名             | 含义                           | 类型   | 可/必选 | 取值范围                                               | 默认值 | 备注 |
| ------------------ | ------------------------------ | ------ | ------- | ------------------------------------------------------ | ------ | ---- |
| currentTemperature | 表示当前传感器采集到的温度值。 | String | 必选    | 取值范围是 [-99.9, 127.0] ，保留一位小数，字符串形式。 |        |      |
| currentHumidity    | 表示当前传感器采集到的湿度值。 | String | 必选    | 取值范围是 [0.0, 100.0] ，保留一位小数，字符串形式。   |        |      |
| sensorType         | 表示传感器类型。               | String | 必选    | 取值范围为{"DS18B20", "AM2301", "MS01", "errorType"}。 |        |      |

设备所支持的各种传感器的测量范围如下表所示：

| 传感器类型     | 湿度测量范围（%） | 温度测量范围（℃） | 备注                             |
| -------------- | ----------------- | ----------------- | -------------------------------- |
| DS18B20        | 不支持            | [-55, 125]        | 湿度固定取值为 "unavailable"     |
| AM2301, Si7021 | [0, 100]          | [-40, 85]         |                                  |
| MS01           | [0, 100]          | 不支持            | 温度固定取值为 "unavailable"     |
| errorType      | 不支持            | 不支持            | 温、湿度固定取值为 "unavailable" |

7、设备上报温湿度历史数据

```json
{
  "index": 0,
  "remain": 3,
  "lastTime": "2021-05-30T10:00:00.776Z",
  "ASYNC": 1,
  "tempData": "0250026002720266025000000000.....",
  "humData": "0790080008100805000000000000......"
}
```

字段说明：

| 字段名   | 含义                                                         | 类型   | 可/必选 | 取值范围                                                     | 默认值 | 备注                                                         |
| -------- | ------------------------------------------------------------ | ------ | ------- | ------------------------------------------------------------ | ------ | ------------------------------------------------------------ |
| index    | 当设备需要上报较大数据量的温湿度历史数据记录时，设备会采取分组上报的机制，而此字段用于指示当前上报的这组的数据是属于本次上报温湿度历史数据记录中的第几组。 | Number | 必选    | 大于等于 0 的整数。                                          |        | 服务器可根据本字段进行数据拼接。                             |
| remain   | 表示本次温湿度历史数据记录上报还剩余几组需要上传。           | Number | 必选    | 大于等于 0 的整数，为 0 时表示本次温湿度历史数据记录已上传完毕。 |        |                                                              |
| lastTime | 表示设备上一次存储温湿度历史数据记录的时间，即设备最近一次采集、存储温湿度历史数据的时间。 | String | 必选    | 取值为实际存储的时间，格式如"2021-05-30T10:00:00.776Z"。     |        | 若设备需连续分多次上报温湿度历史数据记录，则每次上报的此字段的内容都是相同的，即都是指示设备最近一次采集、存储温湿度历史数据的时间。 |
| ASYNC    | 表示服务器异步处理业务。                                     | Number | 必选    | 本项目固定取值为 1。                                         |        | 此字段为服务端专用字段。                                     |
| tempData | 表示当前温湿度历史数据记录的具体温度数据，单位为 ℃ 。        | String | 必选    |                                                              |        |                                                              |
| humData  | 表示当前温湿度历史数据记录的具体湿度数据，单位为 % 。        | String | 必选    |                                                              |        |                                                              |

注意事项

- 设备端总共需要存储最近 186 天的每个小时的温湿度历史数据记录，而 186 天的温湿度历史数据记录的总数据量比较大，所以设备端在上报该记录给服务器或 APP 时需要分多组上报。综合考虑设备端资源情况和服务器、APP 设定情况，设备端上报的每组的温湿度历史数据记录长度最长为 9 \* 24 小时的数据量。注意，此处说明的一组即一次交互，而一次上报会有一次或多次交互，例如一次需要上报 20 天的温湿度历史数据时会有三次交互。
- 设备端上报温湿度历史数据记录的时机是每次上线、正常上线的每个小时，且每次上报都只会上报截至目前尚未上报过的那部分历史数据。
- 设备端上报的每组温湿度历史数据记录都必须同时携带温度数据和湿度数据，且温度数据和湿度数据对应的时间点以及数据格式都必须保持一致。其数据格式如下：
  - 以每小时为一个点，每个点占四个字节，每组最多容纳 9 _ 24 个点的数据（温度、湿度各 9 _ 24 个点的数据）。
  - 每个点数据形式为放大了十倍的有符号的十进制的字符串形式的数字，如 "0256" 代表 25.6 ，"0260" 代表 26 ，"1251" 代表 125.1 ，"-32.1" 代表 -32.1 。
  - 由于设备在尚未同步 UTC 时间时不记录温湿度历史数据，所以历史数据中可能存在无效部分，现设定使用 9999（即 999.9 ℃）填充本应被记录但由于尚未同步 UTC 时间而未被记录的部分的数据。
- 温湿度历史数据记录中的数据参考时间是设备所处时区的区时，而非 UTC 时间。
- 本条协议设备会单独上报，不会和其他协议内容如通道状态等一起上报，原因是长连接服务器接收到 ASYNC 字段时会把此条协议直接转发至服务器特定的业务模块。
- 服务器接收到设备上报的温湿度历史数据后应该对数据进行校验，以确保数据接收完整。校验方法是：本次上报的一至多个包中， index 字段的值从 0 开始依次递增 1 ，remain 字段的值依次递减至 0 ，且每个包的 index 字段的值加上 remain 字段的值的和都相等。

8、客户端打开时主动激活设备上报

```json
{
  "uiActive": 60
}
```

字段说明：

| 字段名   | 含义                                                         | 类型   | 可/必选 | 取值范围                                                     | 默认值 | 备注 |
| -------- | ------------------------------------------------------------ | ------ | ------- | ------------------------------------------------------------ | ------ | ---- |
| uiActive | 表示 UI 激活时间。在 UI 激活时间大于 0 时，设备会向长连接服务器上报当前温湿度数据；而 UI 激活时间不大于 0 时，除非特殊说明，否则不向长连接服务器上报当前温湿度数据。 | Number | 必选    | 取值范围为 [0, 180]，单位为秒。当所下发的激活上报时间倒计数接近 0 时，APP 需要再次下发激活上报时间以续期。建议激活时间设置为 60 秒，每当倒计数到 10 秒时再次下发激活时间。 |        |      |

9、客户端置于后台在特殊情况下需要设备低频上报

```json
{
  "lowFreqUpdateFlag": 1
}
```

字段说明：

| 字段名            | 含义                                               | 类型   | 可/必选 | 取值范围                                                     | 默认值 | 备注 |
| ----------------- | -------------------------------------------------- | ------ | ------- | ------------------------------------------------------------ | ------ | ---- |
| lowFreqUpdateFlag | 表示 UI 激活上报时间外的低频上报温湿度值的标志位。 | Number | 必选    | 取值范围为 {0,1}，其中 0 表示无需支持低频上报（即不上报）， 1 表示需要支持低频上报。 | 0      |      |

注意事项

- 设备每次上线都会向服务器查询此标志位。
- 使用场景说明：当服务器需要持续获取到设备的最新温湿度数据时，使用此字段，以标记设备是否需要低频上报温湿度数据。一些应用场景，如：绑定了第三方语音平台（Google，Alexa，小爱同学等）或 IFTTT。

10、打开设备网络指示灯的开关，打开指示灯

```json
{
  "sledOnline": "on"
}
```

11、设置每次操作打开设备后需要在随后的 1 秒自动关闭设备

```json
{
  "pulse": "on",
  "pulseWidth": 1000
}
```

12、设置设备断电再来电，打开设备开关：

```json
{
  "startup": "on"
}
```

13、定时器设置见《定时器规则》示例，该设备支持设置单次定时、重复定时、延时、重复定时，执行动作仅支持设备打开或者关闭。

14、设置时区

```json
{
  "timeZone": 8
}
```

字段说明：

| 字段名   | 含义               | 类型   | 可/必选 | 取值范围                                                     | 默认值 | 备注 |
| -------- | ------------------ | ------ | ------- | ------------------------------------------------------------ | ------ | ---- |
| timeZone | 表示设备所在时区。 | Number | 必选    | 取值范围为 [-12.0 ~ 14.0] ，如中国采用的区时是东八区的区时，与 UTC（中时区）时间相差 8 个小时，所以下发的时区是 8（8.0）。 | 0      |      |

注意事项：

- 由于前文中介绍的温湿度历史数据是以设备所处时区的区时为时间基准的，而设备默认时区设定是 0 时区，所以用户要想设备能够正确统计温湿度历史数据，需要及时给设备设置正确的时区信息。建议设备首次使用便设定正确的时区信息。

### UIID126 多功能双通道电量检测开关

注意：特定模式下支持的指令，在不支持的模式下下发，会返回 400.如设备在开关模式下 ，下发电机模式下的 电机正转，设备会返回 400

以下描述各条指令的字段含义、取值范围、使用场景以及注意事项。受控端收到指令后的返回值包含：

```json
{
    "error": 0/400 // 0 表示设置成功；400：表示非法参数或非法操作
}

```

1、设置设备工作模式

```json
{
  "workMode": 1
}
```

参数说明：

- workMode：Number 型。1：开关模式；2 电机模式；3 电表模式。出厂默认值 2（切换至不同的模式时复位的参数项不同）。

使用场景：

- APP 设置模式；
- 设备上线时同步至 APP。

注意事项：

- 各模式切换时会导致其他参数复位，参考固件需求规格书；
- APP 下发设置时， 需要清楚服务端所有定时器。

2、开关模式

2.1 打开设备开关

```json
{
  "switches": [
    {
      "outlet": 0,
      "switch": "on"
    }
  ]
}
```

参数说明：

- "outlet":通道编号，Number 型。取值范围[0,1]，分别对应一、二通道；
- "switch":通道状态，String 型。取值"on"/"off" ，表示通道开/关。出厂默认 off

使用场景：

- APP 设置通道状态；

- 设备本地状态发生变化时上报

- 设备上线时同步至 APP

  2.2 设置通电反应

```json
{
  "configure": [
    {
      "outlet": 0,
      "startup": "on"
    },
    {
      "startup": "stay",
      "outlet": 1
    }
  ]
}
```

参数说明：

- "outlet":通道编号，Number 型。取值范围[0,1]，分别对应一、二通道；
- "startup"设备通电反应，String 型。取值"on"/"off"/"stay"，表示通道通电开/关/保持掉电前状态，出厂默认 off。

使用场景：

- APP 设置通道状态；
- 设备本地复位时上报；
- 设备上线时同步至 APP。

注意事项：

- 为保证服务器备份完整，该字段通信时须包含全部通道的通电反应参数；

- 仅在开关模式下支持该字段。

  2.3 设置定时器

```json
{
  "timers": [
    //定时-单次
    {
      "mId": "b223610d-ae79-09fe-815e-ab0f299eaa1c",
      "type": "once",
      "at": "2020-08-20T12:11:00.841Z",
      "coolkit_timer_type": "once",
      "enabled": 1,
      "do": {
        "switch": "on",
        "outlet": 0
      }
    },
    //定时-重复
    {
      "mId": "29383500-532b-4de9-43dd-e16874b70067",
      "type": "repeat",
      "at": "18 8 * * 3,4,5",
      "coolkit_timer_type": "repeat",
      "enabled": 1,
      "do": {
        "switch": "on",
        "outlet": 0
      }
    },
    //延时
    {
      "mId": "14b08e67-f4c3-3ca8-96b9-65a2c9034e2b",
      "type": "once",
      "at": "2020-08-20T12:34:00.852Z",
      "coolkit_timer_type": "delay",
      "enabled": 1,
      "do": {
        "switch": "on",
        "outlet": 0
      },
      "period": "32"
    },
    //循环定时-交替
    {
      "mId": "5b4c5657-c631-9e04-9799-f5f298229f8c",
      "type": "duration",
      "at": "2020-08-20T11:43:00.150Z 60 30",
      "coolkit_timer_type": "duration",
      "enabled": 1,
      "startDo": {
        "switch": "on",
        "outlet": 0
      },
      "endDo": {
        "switch": "off",
        "outlet": 0
      }
    },
    //循环定时-重复
    {
      "mId": "5b4c5657-c631-9e04-9799-f5f298229f8c",
      "type": "duration",
      "at": "2020-08-20T11:55:00.150Z 30",
      "coolkit_timer_type": "duration",
      "enabled": 1,
      "do": {
        "switch": "on",
        "outlet": 0
      }
    }
  ]
}
```

定时器相关字段说明请见前文定时器说明章节。

2.4 点动设置

设置 通道 1 打开 1 秒后自动关闭，通道 2 打开 2 秒后自动关闭：

```json
{
  "pulses": [
    {
      "pulse": "off",
      "width": 1000,
      "outlet": 0
    },
    {
      "pulse": "off",
      "width": 2000,
      "outlet": 1
    }
  ]
}
```

参数说明：

- pulse：点动开关，设置每次操作打开功率检测插座后需要在随后某个时间执行关闭设备，String 型，取值 "on"/"off"，分别表示开启/关闭点动功能。出厂默认 off。
- width：设置点动时间。Number 型，取值[500, 3599000] 且为 500 倍数，单位 ms，出厂默认 1000。

使用场景：

- APP 设置通道状态；
- 设备本地复位时上报；
- 设备上线时同步至 APP。

注意事项：

- 为保证服务器备份完整，该字段通信时须包含全部通道的点动参数；

- 仅在开关模式下支持该字段。

  2.5 设置外接开关的模式

```json
// 设置通道1
{
    "swMode_00":1
}
// 设置通道2
{
    "swMode_01":1
}
```

参数说明（参数后缀 00 表示通道 1 的值，01 表示通道 2 的值，以此类推）：

- swMode_00:外接开关模式，Number 型，取值范围[1,2,3] 1 脉冲触发 2 边缘触发 3 跟随模式。 出厂默认值 2

使用场景：

- APP 设置状态；
- 设备本地该参数复位时上报；
- 设备上线时同步至 APP；

注意事项：

- 仅在开关模式下支持该字段

  2.6 设置开关控制翻转

swMode 为 3 时 swCtrlReverse 生效

```json
// 设置通道1的外接开关控制翻转
{
    "swReverse_00":1
}
// 设置通道2的外接开关控制翻转
{
    "swReverse_01":1
}
```

参数说明（参数后缀 00 表示通道 1 的值，01 表示通道 2 的值，以此类推）：

- swReverse_00：外接开关翻转，Number 型，取值范围[0,1]。1 开启翻转 0 关闭翻转，默认 0

使用场景：

- （开关模式跟随按键时）APP 设置开关翻转；
- 设备本地该参数复位时上报；
- （开关模式跟随按键时）设备上线时同步至 APP；

注意事项：

- 仅在开关模式跟随按键时支持该字段。

3、电机模式

3.1 设置电机正转，直到用户手动停止或遇阻

```json
{
  "motorTurn": 1
}
```

参数说明：

- "motorTurn": 电机动作类型，Number 型。取值范围[0,2]。0：电机停止；1：电机正转；2：电机反转。

使用场景：

- APP 控制马达动作。

注意事项：

- 仅在电机模式下支持该字段；设备在运行过程中，2s/次上报当前位置 currLocation。

  3.2 轨道移动到指定百分比的位置

```json
{
  "location": 80
}
```

参数说明：

- location：电机的目标位置（总行程百分比），Number 型。取值范围[0,100]。默认值 0。

使用场景：

- APP 控制马达行进至指定位置。

注意事项：

- 仅在电机模式下支持该字段。

说明：

- 设备在运行过程中，2S/次 实时上报当前位置： currLocation。

  3.3 位置上报

{  
 "currLocation":80
}

参数说明：

- currLocation ：电机的实时位置（总行程的百分比），Number 型。取值范围[0,100]。 默认值 0。

使用场景：

- 电机行进过程中每 2S 上报一次；
- 设备上线同步上报；
- 设备切换至电机模式。

注意事项：

- 仅在电机模式下支持该字段。

  3.4 设置外接开关的类型

```json
{
  "motorSwMode": 1
}
```

参数说明：

- motorSwMode：电机模式下按键类型。Number 型。 取值范围[0,3]。0：无类型，按键无效；1：单键瞬时开关； 2：双键瞬时开关； 3：三联按键；默认值 2 ，按键不可用。

使用场景：

- APP 设置按键类型；
- 电机模式下，设备上线同步上报；
- 设备切换至电机模式。

注意事项：

- 仅在电机模式下支持该字段。

  3.5 设置遇阻停止模式

```json
{
  "stopMode": 1
}
```

参数说明：

- stopMode：Number 型，取值范围[1,3]。1-遇阻停止； 2-遇阻反弹 2S； 3-遇阻反弹至上限

使用场景：

- APP 设置遇阻动作类型；
- 电机模式下，设备上线同步上报；
- 设备切换至电机模式；

注意事项：

- 仅在电机模式下支持该字段；

  3.6 设置开关控制翻转、继电器输出翻转

```json
{
  "outputReverse": 1,
  "motorSwReverse": 1
}
```

参数说明：

- outputReverse：继电器翻转（APP 控制翻转），Number 型。取值范围[0,1]。 0-关闭翻转； 1-开启翻转；默认 0
- motorSwReverse：外接开关翻转，Number 型。取值范围[0,1]。0-关闭翻转； 1-开启翻转；默认 0

使用场景：

- APP 设置翻转；
- 设备上线同步上报；
- 设备切换电机模式、开关模式；

注意事项：

- 电机模式下 outputReverse、 motorSwReverse 生效

  3.7 设置遇阻电流阈值

```json
{
  "impedeCurrent": 50
}
```

参数说明：

- impedeCurrent：电机遇阻电流值，Number 值。取值范围[1,1500]。单位 0.01A。

使用场景：

- APP 设置遇阻电流值；
- 电机模式下，设备上线同步上报；

注意事项：

- 仅在电机模式下支持该字段；

  3.8 电机工作电流上报

```json
{
  "motionCurrent": 51
}
```

参数说明：

- motionCurrent：电机转动时的电流值，Number 型。取值范围[1,1500]，单位 0.01A

使用场景：

- 电机校准完成或者转动完成后上报（用户可参考该值设置遇阻电流）

注意事项：

- 仅在电机模式下支持该字段

  3.9 设置定时器

```json
{
 "timers" : [
   //定时 -单次
   {
     "mId" : "b223610d-ae79-09fe-815e-ab0f299eaa1c",
     "type" : "once",
     "at" : "2020-08-20T12:11:00.841Z",
     "coolkit_timer_type" : "once",
     "enabled" : 1,
     "do" : {
       "motorTurn":0/1/2
     }
   },
   //定时 -重复
   {
     "mId" : "29383500-532b-4de9-43dd-e16874b70067",
     "type" : "repeat",
     "at" : "18 8 * * 3,4,5",
     "coolkit_timer_type" : "repeat",
     "enabled" : 1,
     "do" : {
       "location":100
     }
   }
 ]
}
```

参数说明：

- mId：定时器唯一标示，String 型。 app 使用。
- coolkit_timer_type：timer 的类型， String 型，定时器中 once 表示单次执行，repeat 表示重复执行;
- type： timer 的类型， 与 coolkit_timer_type 类似，type 是没有延时，历史问题导致有两个字段都表示类型。 但是 app 一般使用 coolkit_timer_type。
- at：执行动作的时间点。 单次定时为 UTC 时间点，重复定时为 cron 表达式。
- enabled：是否启用，Number 型。 1 启用，0 禁用。（ 不启动的 定时器 APP 不会下发给设备）
- do: 执行动作，Object 型；
- motorTurn:电机动作，Number 型。0-停止；1-正转（app 开启）；2-反转（app 关闭）；
- location:电机目标位置， Number 型。取值[0,100]

4、所有模式下都有的指令

4.1 设备实时上报某一通道监测数据

```json
{
  "current_00": 100,
  "voltage_00": 22000,
  "actPow_00": 22000,
  "reactPow_00": 22000,
  "apparentPow_00": 22000
}
```

参数说明（参数后缀 00 表示通道 1 的值，01 表示通道 2 的值，以此类推）：

- current_00：实时电流值，Number 型。单位 0.01A。
- voltage_00：实时电压值，Number 型。单位 0.01V。
- actPow_00：实时有功功率值，Number 型。单位 0.01W。
- reactPow_00：实时无功功率值，Number 型。单位 0.01W。
- apparentPow_00：实时视在功率值，Number 型。单位 0.01W。

使用场景：

- app 下发 ui 激活指令后，设备负载参数变化时上报，上报条件：电流变化超 0.03A，或者电压变化超 5V，或有功功率、无功功率、视在功率变化超过 2W；

- 设备上线时同步状态；

  4.2 统计本次用电量

```json
//开始统计：
{
 "startTime_00":"2019-06-06T03:37:05.064Z",
 "endTime_00":"",
}
//结束统计：（APP 下发结束时会带上 startTime ，若需要节省流量可不下发， 设备均支持）
{
 "startTime_00":"2019-06-06T03:37:05.064Z",
 "endTime_00":"2019-06-06T03:37:05.064Z",
}
```

参数说明（参数后缀 00 表示通道 1 的值，01 表示通道 2 的值，以此类推）：

- startTime_00：开始统计单次用电量的时间，零时区。
- endTime_00：结束统计单次用电量的时间，零时区。 设备接收到该字段不为空时，返回本次用电量统计数据（在返回 error 0 的消息中带上 用电量数据，参考 3 所有模式下，获取单次统计用电量的 完整的返回数据包），不需要 APP 下发获取单次统计用电量指令

使用场景：

- APP 开启关闭单次统计值；

注意：

- 切换模式时，设备如果开启了单次统计用电量，需要关闭单次用电量统计，设备上报空字符串（即 "startTime_00":"","endTime_00":"" ）

  4.3 获取单次统计用电量

```json
{
  "getKwh_00": 1
}
```

参数说明（参数后缀 00 表示通道 1 的值，01 表示通道 2 的值，以此类推）：

- getKwh_00：获取用电量类型，Number 型。 取值范围[1,2] ，1 获取单次统计用电量， 2 获取历史统计用电量

使用场景：

- APP 上刷新本次用电量统计

设备返回：

```json
{
  "oneKwhData_00": 11032
}
```

参数说明（参数后缀 00 表示通道 1 的值，01 表示通道 2 的值，以此类推）：

- oneKwhData_00：本次用电量值，Number 型，精确到小数点后 2 位,单位是 0.01KW.H，取值范围为[0‐5000000],如：11032

使用场景：

- 收到刷新单次统计用电量指令；
- 收到结束统计本次用电量；

注意：

- oneKwhData_00 字段在返回 error 0 数据包中返回，不放在 params 中，而在 config 中（本条数据不会记录在服务端数据库中），即

```json
//完整的返回数据包。
{
  "error": 0,
  "deviceid": "10000xxxxx", //其他必填字段
  "apikey": "xxxx-xxxx-xxxx",
  "config": { "oneKwhData_00": 11032 }
}
```

4.4 获取历史用电量

```json
{
  "getKwh_00": 2
}
```

参数说明（参数后缀 00 表示通道 1 的值，01 表示通道 2 的值，以此类推）：

- getKwh_00：获取用电量类型，Number 型。 取值范围[1,2] ，1 获取单次统计用电量， 2 获取历史统计用电量

设备返回：

```json
{
  "kwhHistories_00": "1911193100000000....."
}
```

参数说明（参数后缀 00 表示通道 1 的值，01 表示通道 2 的值，以此类推）：

- kwhHistories_00：历史用电量数值，用全小写字符串表示，每天 4 个字节（前面 2 个表示 16 进制整数，后面 2 个字符，分别表示小数点后 1 位和 2 位的数值，如用电量是 237.13，那么就表示为 ed13），共 720 个字节，精确到小数点后两位，单位是 KW.H（单日最大用电量为 255.99KW.H，每小时最大 255.99 / 24 =10.6KW。 若电压为 300V，电流为 35A）。若 180 日的日总用电量为："25.11，25.31，0.00，0.00................(共 180 天)" ‐> "1911193100000000.....时间顺序为当日在最前面，其它的往后排。

注意：

- kwhHistories_00 字段在返回 error 0 数据包中返回，不放在 params 中，而在 config 中（本条数据不会记录在服务端数据库中），即

```json
//完整的返回数据包。
{
  "error": 0,
  "deviceid": "10000xxxxx", //其他必填字段
  "apikey": "xxxx-xxxx-xxxx",
  "config": { "kwhHistories_00": "1911193100000000....." }
}
```

4.5 设置“第一个通道”的过载保护自动关闭设备：

```json
{
  "overload_00": {
    "minActPow": {
      "enabled": 1,
      "value": 1000
    },
    "maxActPow": {
      "enabled": 0,
      "value": 110000
    },
    "minVoltage": {
      "enabled": 1,
      "value": 1000
    },
    "maxVoltage": {
      "enabled": 1,
      "value": 22000
    },
    "maxCurrent": {
      "enabled": 1,
      "value": 1600
    },
    "voltageSag": {
      "enabled": 1,
      "value": 5000
    }
  }
}

//如果设置第二个通道的，则字段采用 overload_01
```

参数说明：

- enabled：表示开启这个判断条件，value 表示达到这个值则启动保护；
- minActPow：有功功率下限阈值，Number 型。取值范围[10,330000]，单位 0.01W。
- maxAcPow：有功功率上限阈值，Number 型。取值范围[10,330000]，单位 0.01W，上限阈值必须大于下限阈值。
- minVoltage：电压下限阈值，Number 型。取值范围[10,30000]，单位 0.01V。
- maxVoltage：电压上限阈值，Number 型。取值范围[10,30000]，单位 0.01V，上限阈值必须大于下限阈值。
- maxCurrent：电流上限阈值，Number 型。取值范围[10,1500]，单位 0.01A。
- voltageSag：电压骤降阈值，Number 型。取值范围[0,30000]，单位 0.01V。（预留协议，此版暂时不实现）

使用场景：

- APP 设置阈值时下发；
- 设备上限时上报；

说明：

- 可以同时启用多个条件；

- 每次用户设置后，把 5 个条件的设置值一起下发给设备，设备端每次上线要上报当前的设置；

  4.6 设置 sled 开关

```json
{
  "sledBright": 100
}
```

0-100 当前设备只用 0（关） 100（开） 两个值，实现了原有 sledOnline 的功能，同时支持后续调节亮度

参数说明：

- sledBright：状态灯亮度，Number 型。取值范围[0,100]。 默认值 100

使用场景：

- APP 设置状态灯亮度；

- 设备上线时上报；

- 设备本地该参数发生变化时上报；

  4.7 激活 UI，设备在激活期内，如果电压电流有变化，则可以上报到服务端，如果再激活期外，则不上报到服务端。

```json
//上报所有通道实时电流电压功率值
{
 "uiActive":{
   "all":1,
   "time":60
 }
}
//上报单通道实时电流电压功率值
{
 "uiActive":{
   "outlet":0,
   "time":60
 }
}
```

参数说明：

- time：激活时间，Number 型，取值范围[1,3600]，单位秒。设备 R3 上报两个通道的实时值。
- all：上报所有通道实时电流电压，Number 型。 取值 1.
- outlet： 上报某通道的实时值。取值[0,1] 0 通道 1 ， 1 通道 2 。
  App 需要在 60s 激活期内再次发送激活 UI 的指令。App 当前每 50 秒发送一次。 （设备若支持智能场景需要额外考虑解决方案）

设备返回：

```json
{
  "current_00": 100,
  "voltage_00": 22000,
  "actPow_00": 22000,
  "reactPow_00": 22000,
  "apparentPow_00": 22000,
  "current_01": 100,
  "voltage_01": 22000,
  "actPow_01": 22000,
  "reactPow_01": 22000,
  "apparentPow_01": 22000
}
```

参数说明（参数后缀 00 表示通道 1 的值，01 表示通道 2 的值，以此类推）：

- current_00：实时电流值，Number 型。单位 0.01A。
- voltage_00：实时电压值，Number 型。单位 0.01V。
- actPow_00：实时有功功率值，Number 型。单位 0.01W。
- reactPow_00：实时无功功率值，Number 型。单位 0.01W。
- apparentPow_00：实时视在功率值，Number 型。单位 0.01W。

5、电机校准

App 下发：

```json
// 示例：电机开始自动校准（APP下发）
{
 "calibration": 1
}

// 示例：电机开始手动校准（APP下发）
{
 "calibration": 2
}
```

设备上报：

```json
// 示例：轨道校准成功（设备上报）
{
 "calibState": 1/0
 //0  未校准；1  已校准

}
```

6、APP 组合下发指令说明

6.1 设置模式-设置外接开关模式-设置翻转

```json
// 通道1、通道2设置为开关模式，外接开关为跟随模式，开启/关闭翻转
{
  "workMode":1,
  "swMode_00":3,
  "swReverse_00":1,
  "swMode_01":3,
  "swReverse_01":1,
}

// 设置为开关模式，通道1外接开关为跟随模式，开启/关闭翻转,通道2外接开关为脉冲触发
{
  "workMode":1,
  "swMode_00":3,
  "swReverse_00":1,
  "swMode_01":1,
}

// 通道1、通道2设置为开关模式，外接开关为脉冲触发
{
  "workMode":1,
  "swMode_00":1,
  "swMode_01":1,
}

// 通道1、通道2设置为开关模式，外接开关为边缘触发
{
  "workMode":1,
  "swMode_00":2,
  "swMode_01":2,
}

// 设置为电机模式，外接开关为三联按键模式，开启/关闭APP控制翻转，开启/关闭外接开关翻转
{
  "workMode":2,
  "motorSwMode":3,
  "outputReverse":1,
  "motorSwReverse":1,
}

// 设置为电机模式，外接开关为双按键瞬时开关，开启/关闭APP控制翻转，开启/关闭外接开关翻转
{
  "workMode":2,
  "motorSwMode":2,
  "outputReverse":1,
  "motorSwReverse":1,
}

// 设置为电机模式，外接开关为单按键瞬时开关，开启/关闭APP控制翻转
{
  "workMode":2,
  "motorSwMode":2,
  "outputReverse":1,
}
```

6.2 电机模式下，开启停止通道 1、通道 2 的单次统计用电量

```json
// 开启通道1、通道2单次统计用电量
{
 "startTime_00":"2019-06-06T03:37:05.064Z",
 "endTime_00":"",
 "startTime_01":"2019-06-06T03:37:05.064Z",
 "endTime_01":"",
}
// 停止通道1、通道2单次统计用电量
{
 "endTime_00":"2019-06-06T03:37:05.064Z",
 "endTime_01":"2019-06-06T03:37:05.064Z",
}
```

6.3 电机模式下，获取通道 1、通道 2 的单次统计用电量，历史用电量

```json
// 获取通道1、通道2单次统计用电量
{
 "getKwh_00":1，
 "getKwh_01":1
}
// 获取通道1、通道2历史用电量
{
 "getKwh_00":2，
 "getKwh_01":2
}
```

7、用户在 APP 上首次进入详情页进行设置

固件为了产测，在 1.2.0 版本将出厂默认值，工作模式改为电机模式，外接开关类型为双键瞬时开关，所以 APP 不能根据外接开关类型为 无类型，工作模式为 开关模式判断设备是否处于出厂状态。

```json
{
  "initSetting": 1
}
```

- initSetting：Number 。 APP 在用户首次进入设备详情页，设置了工作模式后，多下发字段，标识用户已经初始化设置过了。 固件端无需处理该字段。例如

```json
// 用户首次设置为电机模式，外接开关为三联按键模式，开启/关闭APP控制翻转，开启/关闭外接开关翻转
{
  "workMode": 2,
  "motorSwMode": 3,
  "outputReverse": 1,
  "motorSwReverse": 1,
  "initSetting": 1
}
```

注：当用户重复添加设备时候（即用户添加了设备，再次长按物理按键让设备进入配网，用同一个账号重复添加该设备），由于服务端不会清除 params 下数据，所以添加完成设备后，第一次进入设备详情页不会弹出设置工作模式页面。

### UIID127 智能温控器

#### 参数说明

| 参数名      | 数据类型 | 取值范围                                                     | 参数说明                                                     |
| ----------- | -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| switch      | String   | on,off                                                       | 设备开关，on 打开，off 关闭闭                                |
| timers      | Array    |                                                              | 定时器类型，定时：once（单次执行）、repeat（重复执行）；延时：delay（只能单次执行） |
| temperature | Number   |                                                              | 当前环境的温度。（当 tempScale 为 c 是，温度单位为摄氏度；当 tempScale 为 f 时，温度单位为华氏度 ）摄氏度范围：-20-50，间距：0.5，单位：°C 华氏度范围：-4-122，间距：0.5,单位：℉ |
| targetTemp  | Number   | 设置温控面板执行的温度。（当 tempScale 为 c 是，温度单位为摄氏度；当 tempScale 为 f 时，温度单位为华氏度 ）数值范围：5-45，间距：0.5，单位：°C 数值范围：41-113，间距：0.5，单位：℉ |                                                              |
| volatility  | Number   |                                                              | 波动温度 (1~5°C，1~9°F，默认为 1°C/°F)，此处摄氏度和华氏度是 1.8 倍的转换关系 |
| workMode    | Number   | [1,3]                                                        | 工作模式。包含 1 手动模式、2 周程序模式、3 经济模式（固定 20℃） |
| workState   | Number   | [1,2]                                                        | 工作状态，包含 1 加热中、2 保温                              |
| childLock   | String   | on,off                                                       | 童锁。打开童锁后，只有 App 的开关功能可用，设备本地的按键均不可用。默认 off |
| fault       | Number   | [0,3]                                                        | 设备发生故障时上报，包含 3 个状态。0 表示无故障，默认为 0;1 表示内部 NTC 故障；2 表示外部 NTC 故障；3 表示内部 NTC、外部 NTC 故障。 故障可恢复。 |
| tempScale   | String   | c,f                                                          | 温标，c 摄氏度和 f 华氏度。当温标切换时， 设备需要立即将转换后的 temperature、volatility、targetTemp、mon、tues、wed、thur、fri、sat、sun 字段上报 |
| mon         | String   |                                                              | 工作模式为周程序时，周一的程序设置 6 段时间，包括开始时间和温度。每段时间由 4 个字节组成，一天共 4\*6=24 个字节，传输过程中为 16 进制全小写字符串。每段时间 4 个字节中，前两个字节为开始时间（单位为分钟），后两个字节为温度（含小数），比如 6:30 分开始温度为 35（当 tempScale 为 c 是，温度单位为摄氏度；当 tempScale 为 f 时，温度单位为华氏度 ），即 01 86 01 5e ，01 86 转换为十进制为 390（分钟），对应时间为 6:30， 01 5e 转换为十进制为 350，即温度设置为 35.0 |
| tues        | String   |                                                              | 同 mon 字段                                                  |
| wed         | String   |                                                              | 同 mon 字段                                                  |
| thur        | String   |                                                              | 同 mon 字段                                                  |
| fri         | String   |                                                              | 同 mon 字段                                                  |
| sat         | String   |                                                              | 同 mon 字段                                                  |
| sun         | String   |                                                              | 同 mon 字段                                                  |
| timeZone    | Number   |                                                              | 时区。有正负数，小数                                         |

timers 参数说明：

| 参数名             | 数据类型 | 允许为空 | 参数说明                                                     |
| ------------------ | -------- | -------- | ------------------------------------------------------------ |
| enabled            | Number   | N        | 是否启用, 0 表示禁用；1 表示启用                             |
| mId                | String   | N        | 定时标记，可以理解为该定时器的 ID，不能重复，UUID 格式，可以使用库生成 |
| type               | String   | N        | 设备端使用，单次定时 once；重复定时 repeat；                 |
| coolkit_timer_type | String   | N        | 客户端使用，单次定时 once；重复定时 repeat；延时定时 delay   |
| at                 | String   | N        | 执行时间: 格林尼治时间，也可采用 UTC 时间                    |
| do                 | Object   | Y        | 要执行的动作                                                 |
| startDo            | Object   | Y        | 循环定时专用: 周期开始要执行的动作                           |
| endDo              | Object   | Y        | 循环定时专用: 随后再执行的动作                               |
| period             | String   | Y        | 延时定时专用: 延时时间，单位为分钟                           |

#### 控制指令

1、打开设备

```json
{
  "switch": "on"
}
```

2、设备上报当前温度

```json
{
  "temperature": 30
}
```

- temperature 温度， 单位摄氏度。

3、设置温标

```json
{
  "tempScale": "c"
}
```

- 当 tempScale 值为 c 时， 当前协议涉及温度的字段单位都为 摄氏度， 为 f 时，都为华氏度

4、设置目标温度

```json
{
  "targetTemp": 35
}
```

手动模式下生效

5、设置波动温度/误差温度

```json
{
  "volatility": 1
}
```

- 设定温度波动范围内不会触发温控器

6、设备工作模式

```json
{
  "workMode": 1
}
```

- 1 手动模式、2 周程序模式、3 经济模式（固定 20℃）

7、设备上报工作状态

```json
{
  "workState": 1
}
```

8、设备上报故障状态

```json
{
  "fault": 1
}
```

9、设置周程序

```json
{
  "mon": "016800c801e0009602b20096032a009603fc00dc05280096",
  "tues": "016800c801e0009602b20096032a009603fc00dc05280096",
  "wed": "016800c801e0009602b20096032a009603fc00dc05280096",
  "thur": "016800c801e0009602b20096032a009603fc00dc05280096",
  "fri": "016800c801e0009602b20096032a009603fc00dc05280096",
  "sat": "016800c801e000c802b200c8032a00c803fc00c805280096",
  "sun": "016800c801e000c802b200c8032a00c803fc00c805280096"
}
```

- 工作模式为周程序模式生效

10、打开关闭童锁

```json
{
  "childLock": "on"
}
```

11、单次定时

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "once",
      "at": "2019-05-30T08:39:00.776Z",
      "type": "once",
      "do": {
        "switch": "off"
      },
      "mId": "96c0f48e-ce4a-3656-1c1c-2568a2eb1991"
    }
  ]
}
```

- coolkit_timer_type：timer 的类型，定时器中 once 表示单次执行，repeat 表示重复执行，可以启用/禁用
- do：需设备执行的动作，灯定时可执行的动作是灯光开关 switch，on 开，off 关

12、单次延时

```json
{
  "timers": [
    {
      "enabled": 1,
      "coolkit_timer_type": "delay",
      "at": "2020-05-29T09:16:00.101Z",
      "period": "6",
      "type": "once",
      "do": {
        "switch": "off"
      },
      "mId": "e4777ab0-a74e-ed60-aeac-1ea23b112069"
    }
  ]
}
```

- coolkit_timer_type：timer 的类型，delay 表示延时器，只有单次执行，可以启用/禁用
- do：需设备执行的动作，灯延时可以执行的动作是灯光开关 switch，on 开，off 关

13、APP 发送当前时区信息给设备

```json
{
  "timeZone": 8
}
```

说明：

- 设备首次获取到该值时可以使用该值将 UTC 时间转换为用户本地时间

14、补充说明

设备上面的高级功能，目前只能在设备上设置，没有对应协议字段，不会上报服务器；APP 不支持：

- 童锁开启后，只锁定设备上按键，对 APP 上开关不限制；
- 最小、最大温度范围，目前 APP 上限定范围为 5-45 ，若 APP 设置超过了设备上设置的限定范围，设备会刷新该值。 如 APP 设置设备温度 43 度，此时设备最大温度范围 40 度，设备刷新设定值为 40 度；
- 节能模式，若设备关闭节能模式，即设备上切换模式不会到节能模式， APP 上切换到节能模式会强制开启节能模式并切换设备模式；
- 节能温度范围，APP 切换到节能模式后，需要设备上报当前设定温度。

### UIID128 堆叠式电表

#### 网关通用参数说明

| 参数名          | 数据类型 | 取值范围       | 参数说明                                            |
| --------------- | -------- | -------------- | --------------------------------------------------- |
| sledOnline      | String   | on,off         | 网络指示灯的开关状态，on 打开，off 关闭             |
| fwVersion       | String   |                | 主芯片固件版本                                      |
| subChipFwVer    | String   |                | 子芯片固件版本                                      |
| subDevices      | Object   |                | 该网关设备关联的子设备列表信息，信息存在服务端      |
| subDevId        | String   | 24 个字符      | 子设备的 CHIPID                                     |
| deviceid        | String   |                | 服务端分配给子设备的 deviceid                       |
| uiid            | String   |                | 子设备的 uiid 信息                                  |
| add_sub_devices | String   | "start"，"end" | 搜索子设备"start" - 开始搜索/搜索中"end" - 结束搜索 |

#### 设备批量上报子设备参数

| 参数名    | 数据类型 | 允许为空 | 参数说明                                  |
| --------- | -------- | -------- | ----------------------------------------- |
| action    | String   | N        | reportSubDevice                           |
| apikey    | String   | N        | 用户的 apikey                             |
| deviceid  | String   | N        | 网关的 deviceid                           |
| userAgent | String   | N        | 设备端上报填：device 服务端下发填：server |
| d_seq     | long     | Y        | 设备端专用：设备端上报                    |
| params    | PARAMS   | N        |                                           |
| sequence  | String   | Y        | server 下发给设备时间戳精确到毫秒         |

设备端上报时 PARAMS 定义:

| 参数名     | 数据类型     | 允许为空 | 参数说明                                                     |
| ---------- | ------------ | -------- | ------------------------------------------------------------ |
| state      | Int          | N        | 是否完成上报操作；0：上报中 1：上报完成（最后一批上报的时候，设置成 1，表示这是最后一批） |
| subDevices | [subDevices] | Y        | 子设备数组                                                   |

subDevices 定义:

| 参数名   | 数据类型 | 允许为空 | 参数说明                                                     |
| -------- | -------- | -------- | ------------------------------------------------------------ |
| subDevId | String   | N        | zigbee 内部 id，zigbee 子设备的格式为：mac:port              |
| uiid     | String   | Y        | 子设备的 uiid                                                |
| deviceid | String   | Y        | 子设备的 deviceid，格式跟普通 wifi 设备一样。上报的时候，如果是新的子设备,可以不传这个字段。返回的命令里，这个字段必填 |
| online   | boolean  | Y        | 上报子设备的在线状态 true:在线（默认）false:不在线           |

说明：网关上线以后，分批上报子设备信息，包括在线状态；(离线期间网关添加的子设备也可以通过此指令上报)

#### 子设备管理指令

| 参数名    | 数据类型 | 允许为空 | 参数说明                                  |
| --------- | -------- | -------- | ----------------------------------------- |
| action    | String   | N        | subDevice                                 |
| apikey    | String   | N        | 用户的 apikey                             |
| deviceid  | String   | N        | 网关的 deviceid                           |
| userAgent | String   | N        | 设备端上报填：device 服务端下发填：server |
| d_seq     | long     | Y        | 设备端专用：设备端上报                    |
| params    | PARAMS   | N        |                                           |
| sequence  | String   | Y        | server 下发给设备时间戳精确到毫秒         |

PARAMS 定义：

| 参数名 | 数据类型 | 允许为空 | 参数说明                                                     |
| ------ | -------- | -------- | ------------------------------------------------------------ |
| cmds   | [CMD]    | N        | 操作类型:0 注册新子设备,1 删除子设备,2 子设备上线,3 子设备下线 |

CMD 定义：

| 参数名   | 数据类型 | 允许为空 | 参数说明                                                     |
| -------- | -------- | -------- | ------------------------------------------------------------ |
| type     | Int      | N        | 操作类型:0 注册新子设备,1 删除子设备,2 子设备上线,3 子设备下线 |
| subDevId | String   | N        | zigbee 内部 id，zigbee 子设备的格式为：mac:port              |
| uiid     | String   | Y        | 子设备的 uiid                                                |
| deviceid | String   | Y        | 子设备的 deviceid，格式跟普通 wifi 设备一样。上报的时候，如果是新的子设备,可以不传这个字段。返回的命令里，这个字段必填 |

说明：网关通过该指令，可以批量注册、删除子设备，还可以批量上报子设备在线状态。

#### 控制指令

1、指令返回值

```json
 {
    "error":0/400
 }
```

2、网络状态灯亮灭状态设置

```json
{
  "sledOnline": "on/off"
}
```

参数说明:

sledOnline: 网络指示灯状态，String 型，取值"on"/"off",表示指示灯开/关。出厂默认 on。

使用场景：

- APP 设置网络指示灯状态；
- 设备上线时同步网络指示灯状态至 APP；

3、设备上报版本信息

```json
{
  "fwVersion": "1.1.1",
  "subChipFwVer": "2.2.2"
}
```

参数说明：

1. fwVersion; 主芯片固件版本；
2. subChipFwVer: 子芯片固件版本；

使用场景：

- 设备上线时上报状态；

4、网关删除子设备

```json
 {
      "cmds": [
       {
           "type": 1,
           "subDevId":"12344",
           "deviceid":"a400xxxxxx"
       }，
        {
           "type": 1,
            "subDevId":"12345",
           "deviceid":"a400xxxxxx"
       }
    ]
 }
```

使用场景：

- 设备检测到子设备已经不存在；
- 设备上线时，扫描到离线之前存在的子设备已经不存在，并且有 deviceid 信息记录，则需要同步状态至 APP；

APP 会收到删除子设备的消息

```json
{
  "action": "subDevice",
  "deviceid": "1000d8456c",
  "apikey": "849f76a9-4778-4a64-afc3-c71bd34cbd5c",
  "userAgent": "device",
  "d_seq": 2474,
  "ts": 0,
  "params": {
    "cmds": [
      {
        "type": 1,
        "subDevId": "12344",
        "uiid": "2087",
        "deviceid": "a400xxxxxx"
      },
      {
        "type": 1,
        "subDevId": "12345",
        "uiid": "2087",
        "deviceid": "a400xxxxxx"
      }
    ]
  }
}
```

5、APP 下发时区信息

```json
{
  "timeZone": 8
}
```

参数说明：

- timeZone: 时区，Number 型，取值范围[-12,+14]，存在小数，如 7.5

注意：

- APP 在设备列表页面检查设备信息是否存在该字段，若没有该字段会主动下发给设备
- APP 发送给网关设备，子设备从网关获取对应值
- 子设备的历史用电量统计功能需要在设置了时区信息之后才会生效，不影响单次统计

6、搜索子设备

```json
// 示例：开始搜索子设备
{
  "add_sub_devices":"start"
}

// 示例：搜索子设备完成
{
  "add_sub_devices":"end"
}
```

参数说明：

- add_sub_devices：搜索子设备，String 型，取值范围："start"，"end"

使用场景：

- APP 端下发控制指令；
- 设备上报搜索状态（包括物理按键进入搜索的状态）；

备注：

- App 端只能下发取值为"start"的指令

#### 四通道子设备部分

#### 参数说明

| 参数名          | 数据类型 | 取值范围                                   | 参数说明                                                     |
| --------------- | -------- | ------------------------------------------ | ------------------------------------------------------------ |
| subDevId        | String   | 24 个字符                                  | 子设备的 CHIPID                                              |
| parentid        | String   |                                            | 网关设备的 deviceid                                          |
| switches        | Array    |                                            | 所有通道的开关状态                                           |
| switches        | String   | on/off                                     | on/off 通道的开关， on 打开，off 关闭                        |
| outlet          | Number   | [0,3]                                      | 分别表示通道 1-4，不能重复                                   |
| overload_00     | Object   |                                            | 通道 1 的过载保护阈值配置，APP 同时刻只会下发一个通道配置    |
| overload_01     | Object   |                                            | 通道 2 的过载保护阈值配置                                    |
| overload_02     | Object   |                                            | 通道 3 的过载保护阈值配置                                    |
| overload_03     | Object   |                                            | 通道 4 的过载保护阈值配置                                    |
| minAP           | Object   |                                            |                                                              |
| maxAP           | Object   |                                            | server 下发给设备时间戳精确到毫秒                            |
| minV            | Object   |                                            | 设备端专用：设备端上报                                       |
| maxV            | Object   |                                            |                                                              |
| maxC            | Object   |                                            | server 下发给设备时间戳精确到毫秒                            |
| delayTime       | Number   |                                            | 设备端专用：设备端上报                                       |
| en              | Object   |                                            |                                                              |
| val             | Number   |                                            | server 下发给设备时间戳精确到毫秒                            |
| uiActive        | Object   |                                            | 设备端专用：设备端上报                                       |
| time            | Number   |                                            |                                                              |
| kwhStat         | Object   |                                            | server 下发给设备时间戳精确到毫秒                            |
| kwhHistories    | String   |                                            | 设备端根据 APP 请求，返回指定通道的历史用电量（180 天）      |
| faultState      | Object   |                                            | 故障状态集合                                                 |
| subDevCom       | Number   | [0,1]                                      | 子设备 485 通信状态，1 通信正常，0 通信错误                  |
| overloadTrig    | Array    |                                            | 过载保护触发事件                                             |
| cse7761Com      | Array    |                                            | 子设备的 cse7761 通信错误                                    |
| overTemp        | Array    |                                            | 子设备的 cse7761 过温保护触发事件                            |
| overLimit       | Array    |                                            | 极限值过载保护触发事件                                       |
| rsn             | Array    | overloadTrig.rsn:[0,4],overLimit.rsn:[0,1] | 故障原因，overloadTrig.rsn: 0 电流上限，1 电压上限，2 电压下限，3 有功功率上限，4 有功功率下限；overLimit.rsn: 0 电流 1 电压 |
| timers          | Array    |                                            | 定时器类型，定时：once（单次执行）、repeat（重复执行）       |
| current_00      | Number   |                                            | 通道 1 实时电流值                                            |
| voltage_00      | Number   |                                            | 通道 1 实时电压值                                            |
| actPow_00       | Number   |                                            | 通道 1 实时有功功率值                                        |
| reactPow_00     | Number   |                                            | 通道 1 实时无功功率值                                        |
| apparentPow_00  | Number   |                                            | 通道 1 apparentPow_00                                        |
| startTime_00    | String   |                                            | 通道 1 开始统计单次用电量的时间                              |
| endTime_00      | String   |                                            | 通道 1 结束统计单次用电量的时间                              |
| getKwh_00       | Number   | 1,2                                        | 通道 1 获取电量统计，1 获取单次统计用电量， 2 获取历史统计用电量 |
| oneKwhData_00   | Number   |                                            | 通道 1 单次统计用电量值，精确到小数点后 2 位,单位是 0.01KW.H，取值范围为[0‐5000000],如：11032 |
| kwhHistories_00 | String   |                                            | outlet 0 历史用电量，16 进制全小写字符串表示，每天 4 个字节，共 720 个字节，精确到小数点后两位，单位是 KW.H。若 180 日的日总用电量为："25.11，25.31，0.00，0.00................(共 180 天)" ‐> "1911193100000000.....时间顺序为当日在最前面，其它的往后排 |
| overTempAlarm   | Number   | 1                                          | 过温警报。1 - 当前设备超出过温阈值（80℃）需要过温警报        |

#### 控制指令

1、指令返回 error 值

```json
{
   "error": 0/400
}
```

其中：0 表示设置成功，400 表示非法参数或非法操作。

2、设置通道状态

```json
{
  "switches": [
    {
      "outlet": 0,
      "switch": "on"
    },
    {
      "outlet": 1,
      "switch": "on"
    },
    {
      "outlet": 2,
      "switch": "on"
    },
    {
      "outlet": 3,
      "switch": "on"
    }
  ]
}
```

参数说明：

- outlet; 通道编号，Number 型。取值范围[0,3]，分别对应一、二、三、四通道；
- switch: 通道状态，String 型。取值 on/off,表示通道开/关。出厂默认 off；

使用场景：

- APP 设置子设备通道状态；
- 子设备本地状态发生变化时上报；
- 设备上线时同步子设备通道状态至 APP；

注意：

- 当只有一个通道变化时，只会上报一个通道的值

3、设置保护阈值

```json
{
  "overload_00": {
    "minAP": {
      "en": 0,
      "val": 110000
    },
    "maxAP": {
      "en": 1,
      "val": 10000
    },
    "minV": {
      "en": 1,
      "val": 1000
    },
    "maxV": {
      "en": 0,
      "val": 22000
    },
    "maxC": {
      "en": 1,
      "val": 2000
    },
    "delayTime": 10
  }
}
```

参数说明：

- minAP：有功功率下限阈值，Number 型。取值范围[10,480000]，若设备上报自身阈值范围，则以上报为准，单位 0.01W，即取值范围为 0.1W-4800W；
- maxAP：有功功率上限阈值，Number 型。取值范围[10,480000]，若设备上报自身阈值范围，则以上报为准，单位 0.01W，即取值范围为 0.1W-4800W；
- minV：电压下限阈值，Number 型。取值范围[900,26400]，若设备上报自身阈值范围，则以上报为准，单位 0.01V，即取值范围为 90V-264V；
- maxV：电压上限阈值，Number 型。取值范围[900,26400]，若设备上报自身阈值范围，则以上报为准，单位 0.01V，即取值范围为 90V-264V；
- maxC：电流上限阈值，Number 型。取值范围[10,2000]，若设备上报自身阈值范围，则以上报为准，单位 0.01A，即取值范围为 0.1A-20A；
- delayTime: 延时生效时间，Number 型，取值范围[0,180]，单位秒，不传默认 0；
- en: 表示开启或关闭过载保护；
- val: 上限或下限值；
- overload_00：00 表示通道一的阈值设置，01 表示通道二的阈值设置，02 表示通道三的阈值设置，03 表示通道四的阈值设置。固件限制：下发设置时单条消息只能支持一个通道的设置，即不支持同一条消息包含 overload_00、overload_01 多个字段

使用场景：

- APP 设置阈值时下发；
- 设备上线同步状态；

注意:

- 每次用户设置后，APP 需要把 6 个条件的设置值一起下发给设备；
- 当有功功率、电压 上限阈值和下限阈值都开启时，固件需要校验上限阈值须大于下限阈值；APP 也需要做此校验，提示用户；

4、I Am Here

```json
{
  "iAmHere": 1
}
```

5、开启实时监测

```json
{
  "uiActive": {
    "outlet": 1,
    "time": 60
  }
}
```

参数说明：

- time: 实时监测持续时间，Number 型，取值范围[1,3600]，单位秒。

使用场景：

- 在 APP 进入子设备某通道 ui 界面，根据现有的电量统计插座 APP 已有操作，APP 每隔 50 秒下发一次开启检测命令给设备。

注意：

- ui 被激活下发该指令，设备在激活期内，如果电压电流有变化，则可以上报到服务端，如果在激活期外，则不上报到服务端。

设备返回：

```json
{
  "current_00": 100,
  "voltage_00": 22000,
  "actPow_00": 22000,
  "reactPow_00": 22000,
  "apparentPow_00": 22000
}
```

参数说明（参数后缀 00 表示通道 1 的值，01 表示通道 2 的值，以此类推）：

- current_00：实时电流值，Number 型。单位 0.01A。
- voltage_00：实时电压值，Number 型。单位 0.01V。
- actPow_00：实时有功功率值，Number 型。单位 0.01W。
- reactPow_00：实时无功功率值，Number 型。单位 0.01W。
- apparentPow_00：实时视在功率值，Number 型。单位 0.01W。

使用场景：

- app 下发 ui 激活指令后，设备负载参数变化时上报，上报条件：电流变化超 0.03A，或者电压变化超 5V，或有功功率、无功功率、视在功率变化超过 2W；

6、统计本次用电量

```json
开始统计：
{
  "startTime_00":"2019-06-06T03:37:05.064Z",
  "endTime_00":"",
}
结束统计：（APP 下发结束时会带上 startTime ，若需要节省流量可不下发， 设备均支持）
{
    "startTime_00":"2019-06-06T03:20:05.064Z",
  	"endTime_00":"2019-06-06T03:37:05.064Z",
}
```

参数说明（参数后缀 00 表示通道 1 的值，01 表示通道 2 的值，以此类推）：

- startTime_00：开始统计单次用电量的时间，零时区。
- endTime_00：结束统计单次用电量的时间，零时区。 设备接收到该字段不为空时，返回本次用电量统计数据（在返回 error 0 的消息中带上 用电量数据，参考 2.3.7 刷新用电量的 完整的返回数据包），不需要 APP 下发获取单次统计用电量指令

使用场景：

- APP 开启关闭单次统计值；

7、刷新用电量

```json
{
  "getKwh_00": 1
}
```

参数说明（参数后缀 00 表示通道 1 的值，01 表示通道 2 的值，以此类推）：

- getKwh_00：获取用电量类型，Number 型。 取值范围[1,2] ，1 获取单次统计用电量， 2 获取历史统计用电量

使用场景：

- APP 上刷新本次用电量统计

设备返回：

```json
{
  "oneKwhData_00": 11032
}
```

参数说明（参数后缀 00 表示通道 1 的值，01 表示通道 2 的值，以此类推）：

- oneKwhData_00：本次用电量值，Number 型，精确到小数点后 2 位,单位是 0.01KW.H，取值范围为[0‐5000000],如：11032

使用场景：

- 收到刷新单次统计用电量指令；
- 收到结束统计本次用电量；

注意：

- oneKwhData_00 字段在返回 error 0 数据包中返回，不放在 params 中，而在 config 中（本条数据不会记录在服务端数据库中），即

```json
{
  "error": 0,
  "deviceid": "10000xxxxx", //其他必填字段
  "apikey": "xxxx-xxxx-xxxx",
  "config": { "oneKwhData_00": 11032 }
}
```

8、查询历史用电量

```json
{
  "getKwh_00": 2
}
```

设备返回：

```json
{
  "kwhHistories_00": "1911193100000000....."
}
```

参数说明（参数后缀 00 表示通道 1 的值，01 表示通道 2 的值，以此类推）：

- kwhHistories_00：历史用电量数值，用全小写字符串表示，每天 4 个字节（前面 2 个表示 16 进制整数，后面 2 个字符，分别表示小数点后 1 位和 2 位的数值，如用电量是 237.13，那么就表示为 ed13），共 720 个字节，精确到小数点后两位，单位是 KW.H（单日最大用电量为 255.99KW.H，每小时最大 255.99 / 24 =10.6KW。 若电压为 300V，电流为 35A）。若 180 日的日总用电量为："25.11，25.31，0.00，0.00................(共 180 天)" ‐> "1911193100000000.....时间顺序为当日在最前面，其它的往后排。

使用场景：

- APP 展示历史用电量数据。

注意：

- 只支持同时获取 1 个子设备的 1 个通道的历史用电量数据。
- kwhHistories_00 字段在返回 error 0 数据包中返回，不放在 params 中，而在 config 中（本条数据不会记录在服务端数据库中），即

```json
//完整的返回数据包。
{
  "error": 0,
  "deviceid": "10000xxxxx", //其他必填字段
  "apikey": "xxxx-xxxx-xxxx",
  "config": { "kwhHistories_00": "1911193100000000....." }
}
```

9、上报故障状态

```json
//完整的返回数据包。
{
  "faultState": {
    "subDevCom": 0,
    "overloadTrig": [
      {
        "outlet": 0,
        "rsn": [1, 2]
      },
      {
        "outlet": 2,
        "rsn": [0, 3, 4]
      }
    ],
    "cse7761Com": [1, 0, 1, 1],
    "overTemp": [1, 0, 1, 0],
    "overLimit": [
      {
        "outlet": 1,
        "rsn": [0, 1]
      },
      {
        "outlet": 3,
        "rsn": [1]
      }
    ]
  }
}
```

参数说明：

- subDevCom: 必选。子设备 485 通信状态，Number 型，1 通信正常，0 通信错误；
- overloadTrig: 可选。过载保护触发事件，Array 型。当有过载事件时该字段出现；
- cse7761Com: 必选。子设备的 cse7761 通信错误，Array 型，数组元素为 Number 型，数量为 4 个，元素 0-3 分别为 1-4 通道，取值范围[0,1]，1 通信正常，0 通信错误；
- overTemp: 可选。子设备的 cse7761 过温保护触发事件，Array 型，数组元素为 Number 型，数量为 4 个，元素 0-3 分别为 1-4 通道，取值范围[0,1]，1 通信正常，0 通信错误。当有过温触发事件时该字段出现；
- overLimit: 可选。极限值过载保护触发事件，Array 型。当有极限值过载事件时该字段出现；

使用场景：

- 子设备发生故障或恢复正常时上报。

10、设置定时器

```json
{
  "timers": [
    {
      //重复定时器
      "mId": "c7a360b6-85a5-9a13-9215-7f0ed0bc2ee3",
      "type": "repeat",
      "at": "59 6 * * 0,1,2,3,4,5,6",
      "coolkit_timer_type": "repeat",
      "enabled": 1,
      "do": {
        "switch": "off",
        "outlet": 2
      }
    },
    {
      //单次定时器
      "mId": "cdabf776-4d3c-f7e3-bbfa-d3c8fb088cd8",
      "type": "once",
      "at": "2020-08-03T11:57:00.502Z",
      "coolkit_timer_type": "once",
      "enabled": 1,
      "do": {
        "switch": "on",
        "outlet": 2
      }
    }
  ]
}
```

参数说明：

- mId：定时器唯一标示，String 型。 app 使用。
- coolkit_timer_type：timer 的类型， String 型，定时器中 once 表示单次执行，repeat 表示重复执行;
- type： timer 的类型， 与 coolkit_timer_type 类似，type 是没有延时，历史问题导致有两个字段都表示类型。 但是 app 一般使用 coolkit_timer_type。
- at：执行动作的时间点。 单次定时为 UTC 时间点，重复定时为 cron 表达式。
- enabled：是否启用，Number 型。 1 启用，0 禁用。（ 不启动的 定时器 APP 不会下发给设备）
- do: 执行动作，Object 型；

使用场景：

- APP 设置定时器；
- 设备上线同步子设备定时器；

注意：

- 因为定时器存在子设备上，当网关扫描到此子设备是新添加的、上报给服务端时，需要将子设备本身的定时器一起同步给服务端；

11、查询通道操作记录

```json
{
  "rangeStart": 200,
  "rangeEnd": 229
}
```

应答体实例：

```json
{
  "record": [
    {
      "date": "2020-07-29 18:00:05",
      "outlet": 0,
      "trigType": 1,
      "action": 1
    },
    {
      "date": "2020-07-29 18:02:05",
      "outlet": 1,
      "trigType": 0,
      "action": 0
    }
  ]
}
```

参数说明：

- date: 操作时间，String 型，格式:"yyyy-mm-dd hh:mm:ss"；
- trigType: 触发类型，Number 型，取值范围[0,3]，0 app 触发，1 设备正常触发， 2 过载保护触发， 3 过温保护触发 ；
- action: 操作类型，Number 型，取值范围[0,1]，0 通道关闭，1 通道打开；
- rangeStart: 操作记录开始条数，Number 型，取值范围[0,65535]；
- rangeEnd: 操作记录结束条数，Number 型，取值范围[0,65535]；
- 需满足条件: rangeEnd>=rangeStart 且 rangeEnd-rangeStart<=29；

注意：

- 只支持同时查询 1 个子设备的操作记录。
- 当前 APP 是会显示具体的用户账号操作，设备只记录 app 触发这一条件，不记录用户账号
- 结果在返回 error 0 数据包中返回，不放在 params 中，而在 config 中（本条数据不会记录在服务端数据库中），即

```json
//完整的返回数据包。
{
  "error": 0,
  "deviceid": "10000xxxxx",
  "apikey": "xxxx-xxxx-xxxx",
  "config": { "record": [] }
}
```

12、设备上报阈值范围

```json
{
  "threshold": {
    "actPow": {
      "min": 10,
      "max": 440000
    },
    "voltage": {
      "min": 10,
      "max": 440000
    },
    "current": {
      "min": 10,
      "max": 440000
    }
  }
}
```

参数说明：

- threshold: 阈值范围；
- actPow: 有功功率，Object 型；
- voltage: 电压，Object 型；
- current: 电流，Object 型；
- min： 最小值，电压单位 0.01V，电流单位 0.01A，功率单位 0.01W；
- max：最大值，电压单位 0.01V，电流单位 0.01A，功率单位 0.01W；

注意：

- 若设备没有上报，则按默认的取值范围处理

13、设备上报固件版本信息

```json
{
  "fwVersion": "1.1.1"
}
```

参数说明：

- fwVersion：固件版本；

使用场景：

- 设备上线时上报状态；

14、设置通电反应

```json
// 示例：设置通道一 上电状态为打开，通道二为保持断电前状态，通道三、四为关闭
{
  "configure": [
    {
      "outlet": 0,
      "startup": "on"
    },
    {
      "startup": "stay",
      "outlet": 1
    },
    {
      "outlet": 2,
      "startup": "off"
    },
    {
      "outlet": 3,
      "startup": "off"
    }
  ]
}
```

参数说明：

- configure：各通道的上电状态设置，Array 型；
- outlet：通道号，Number 型，取值范围 [0,3] ，表示通道 1-4；
- startup：通道的上电保持状态，String 型，取值范围 on,stay,off 。on 上电开，stay 上电保持，off 上电关；

使用场景：

- 设备上线时上报状态；
- APP 设置；

15、过温警报

```json
{
  "overTempAlarm": 1
}
```

### UIID130 堆叠式电表四通道开关子设备

协议见 UIID128 【四通道子设备部分】

### UIID133 HMI 墙面开关

#### 参数说明

| 参数名             | 数据类型 | 取值范围                                                     | 参数说明                                                     |
| ------------------ | -------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| data               | object   |                                                              | 服务器返回数据                                               |
| HMI_weather        | Number   |                                                              | 天气状态信息                                                 |
| HMI_outdoorTemp    | Object   |                                                              | 室外温度信息                                                 |
| current            | Number   |                                                              | 室外温度                                                     |
| range              | String   |                                                              | 今日温度范围                                                 |
| dst                | Number   | 取值 0 表示不处于夏令时，取值 1 表示处于夏令时               | 是否处于夏令时                                               |
| dstChange          | String   | ISO8601 格式，字段为空或 NULL 表示没有夏令时                 | 夏令时切换的时间                                             |
| geo                | String   |                                                              | 地理位置的经纬度                                             |
| action             | String   |                                                              | 指令类型                                                     |
| msg                | String   |                                                              | 错误信息,得不到城市信息时服务器返回的错误信息                |
| HMI_ATCDevice      | Object   |                                                              | 转发到 HMI 端的温控器                                        |
| etype              | String   | 取值为 hot 表示设备加热器设备，取值为 clod 表示设备为制冷设备 | 温控器设备类型                                               |
| precision          | Number   | [1~5]                                                        | 温控精度                                                     |
| relation           | Array    |                                                              | 关联设备信息                                                 |
| type               | String   | 取值为 update 时表示关联设备状态改变，取值为 rename 时表示关联设备改名，取值为 delete 时表示关联设备被删除 | 通知的类型                                                   |
| deviceid           | String   |                                                              | NSPnel 的设备 id                                             |
| params             | Object   |                                                              | 透传内容                                                     |
| HMI_dimOpen        | Number   | 取值为 0 时表示关闭熄屏模式，取值为 1 时表示开启熄屏模式     | HMI_dimOpen 熄屏时间是否开启                                 |
| HMI_resources      | Object   |                                                              | HMI 端资源位内容                                             |
| index              | Number   | 取值 1~ 8，对应资源位 1~ 8                                   | 资源位号                                                     |
| ctype              | String   | 取值为 device 时表示关联资源为设备，取值为 scene 时表示关联资源位场景，取值为 group 时表示关联资源位群组设备,取值为 idle 时表示该资源位为空 | 关联设备的类型                                               |
| id                 | String   |                                                              | 设备/群组/场景的 id                                          |
| uiid               | Number   |                                                              | 关联设备对应 ui 的 ID                                        |
| hmi_uiid           | Number   |                                                              | 关联设备显示的 UI                                            |
| name               | String   |                                                              | 关联设备的名字                                               |
| online             | Boolean  | 取值为 true 时表示设备在线，取值为 false 时表示设备不在线    | 关联设备的在线状态                                           |
| ltype              | Number   | 1 表示白光模式 （为简化适配屏协议，在此只能取 1）            | 双色灯的模式                                                 |
| white              | Object   |                                                              | 白光模式                                                     |
| br                 | Number   | [1~100]                                                      | 亮度                                                         |
| ct                 | Number   | [0~255]                                                      | 色温                                                         |
| color              | Number   |                                                              | 彩光模式                                                     |
| r                  | Number   | [0~255]                                                      | 红色值                                                       |
| g                  | String   | [0~255]                                                      | 绿色值                                                       |
| b                  | String   | [0~255]                                                      | 蓝色值                                                       |
| mode               | Number   | 1,2                                                          | 灯带工作模式                                                 |
| colorR             | Number   | [0~255]                                                      | 红色值                                                       |
| colorB             | String   | [0~255]                                                      | 蓝色值                                                       |
| colorG             | Number   | [0~255]                                                      | 绿色值                                                       |
| light_type         | Number   | Number 灯带模式，1 彩光模式（色盘）、2 白光模式（色温）      | 灯带模式                                                     |
| tempUnit           | Number   |                                                              | 温度的显示单位 取值为 0 时表示单位为摄氏度，取值为 1 时表示单位为华氏度 |
| pulses             | Object   |                                                              | 点动模式设置                                                 |
| width              | Number   | 取值[500, 3599000] 且为 500 倍数，单位 ms，出⼚默认 1000。   | 设置点动时间                                                 |
| lock               | Number   | Number 取值为 0 时表示互锁模式关闭，设置为 1 时表示互锁模式开启 | 设置互锁模式开启或者关闭                                     |
| timers             | Array    |                                                              | 定时器                                                       |
| mId                | String   |                                                              | 定时器的唯一标识                                             |
| type               | String   |                                                              | 取值 once 表示单次定时器，取值 repeat 表示重复定时器，取值 duration 表示持续定时器 |
| at                 | String   |                                                              | 执⾏动作的时间点                                             |
| coolkit_timer_type | String   | 取值 once 表示单次定时器，取值 repeat 表示重复定时器，取值 duration 表示持续定时器,取值 delay 表示延时定时器 | 定时器类型                                                   |
| enable             | Number   | 0 表示关闭，1 表示开启                                       | 定时器使能标志                                               |
| do                 | Object   |                                                              | 执行动作                                                     |
| temperature        | Number   | -40~125                                                      | 设备上温湿度传感器得到的温度值                               |
| humidity           | Number   | 0~100                                                        | 设备上温湿度传感器得到的湿度值                               |
| precision          | Number   |                                                              | 温控精度，温控生效范围                                       |
| tempCorrection     | Number   |                                                              | 温度校准值                                                   |
| operSide           | Number   |                                                              | 发起操作方                                                   |

HMI_weather 参数说明：

| NSPanel Icon Number | Accuweather Icon Number | Type          | 天气                     |
| ------------------- | ----------------------- | ------------- | ------------------------ |
| 1                   | 1                       | Sunny         | 晴                       |
| 2                   | 2                       | Sunny+Cloudy  | 大部晴朗                 |
| 2                   | 3                       | Sunny+Cloudy  | 局部晴朗                 |
| 2                   | 4                       | Sunny+Cloudy  | 大部分是晴天，不时有多云 |
| 2                   | 5                       | Sunny+Cloudy  | 朦胧的阳光               |
| 2                   | 6                       | Sunny+Cloudy  | 大部多云                 |
| 3                   | 7                       | Cloudy        | 多云                     |
| 3                   | 8                       | Cloudy        | 阴天                     |
| 3                   | 33                      | Cloudy        | 晴朗                     |
| 3                   | 34                      | Cloudy        | 大部晴朗                 |
| 3                   | 35                      | Cloudy        | 局部多云，少云           |
| 3                   | 36                      | Cloudy        | 不时有多云               |
| 3                   | 38                      | Cloudy        | 大部多云                 |
| 3                   | 37                      | Cloudy        | 朦胧的月光               |
| 4                   | 11                      | Fog           | 雾                       |
| 5                   | 12                      | Showers       | 阵雨                     |
| 5                   | 13                      | Showers       | 多云，有阵雨             |
| 5                   | 14                      | Showers       | 局部晴朗，有阵雨         |
| 5                   | 18                      | Showers       | 雨                       |
| 5                   | 39                      | Showers       | 局部地区多云，有阵雨     |
| 5                   | 40                      | Showers       | 大部地区多云，有阵雨     |
| 6                   | 15                      | T-Storms      | 暴雨                     |
| 6                   | 16                      | T-Storms      | 多云，有暴雨             |
| 6                   | 17                      | T-Storms      | 局部晴朗，有暴雨         |
| 6                   | 41                      | T-Storms      | 局部地区多云，有暴雨     |
| 6                   | 42                      | T-Storms      | 大部地区多云，有暴雨     |
| 7                   | 19                      | Flurries      | 小雪                     |
| 7                   | 20                      | Flurries      | 多云，有小雪             |
| 7                   | 21                      | Flurries      | 局部晴朗，有小雪         |
| 7                   | 43                      | Flurries      | 大部地区多云，有小雪     |
| 8                   | 22                      | snow          | 雪                       |
| 8                   | 23                      | snow          | 多云，有雪               |
| 8                   | 44                      | snow          | 大部地区多云，有雪       |
| 9                   | 24                      | Sleet         | 冰                       |
| 9                   | 25                      | Sleet         | 霰，冰雹                 |
| 9                   | 26                      | Sleet         | 冻雨，要结冰的雨         |
| 10                  | 29                      | Rain and Snow | 雨夹雪                   |
| 11                  | 32                      | Windy         | 风                       |
| 12                  | 30                      | Hot           | 热                       |
| 13                  | 31                      | Cold          | 冷                       |

#### 控制指令

1、发送数据后返回值

```json
{
	"error":0/400
}
```

2、获取城市信息（包括时区、夏令时、天气等）

APP 通过长连接向 NSPanel 发送更新位置的指令

```json
{
  "action": "update",
  "deviceid": "100000abcd",
  "params": {
   //位置的经纬度，格式：纬度,经度
   //(注意纬度在前，经度在后，不可调换！)
    "geo": "40.353139,116.427265"
  }
 //其它数据
  ...
}
```

NSPanel 设备端解析指令内容，知道位置已更新，先返回成功的讯息（这里是由设备端发给服务端），然后调用 API 请求新的城市信息（这里是由设备端发给服务端）

```json
POST /v2/d/city
{
  "geo": "40.353139,116.427265", //经纬度
  "subscribe": 1, //表示订阅城市信息的更新

  "format": {
    "temperature": "HMI_outdoorTemp.current",
    "tempRange": "HMI_outdoorTemp.range",
  },
	"intTemp":1
}
```

intTemp 为 1 表示天气温度信息取整。
服务端根据经纬度信息查询城市信息，返回给设备，示例如下:

```json
{
  "error": 0,
  "data": {
    "timeZone": 8, //时区
    "dst": 0, //是否处于夏令时
    "dstChange": '2020-11-30T10:15:35.039Z', //夏令时切换的时间
    "HMI_outdoorTemp": {
      "current": 10,
      "range": "10,23"
    }
    "HMI_weather": 1 //当前的天气代码，比如晴天、阴天
  }
}
```

如果得不到城市信息则返回：

```json
{
  "error": 405,
  "msg": "{错误信息}"，
  "data": {}
}
```

设备端通过 error 的值判断是否成功取得城市信息，然后进行相应处理。

天气状态更新时，服务器通过长连接通知设备，通知示例如下：

```json
POST /v2/d/city
{
  "action": "update",
  "deviceid": "100000abcd",
  "params": {
    "timeZone": 8, //时区
    "dst": 0, //是否处于夏令时
    "dstChange": '2020-11-30T10:15:35.039Z', //夏令时切换的时间
    "HMI_outdoorTemp":
    {
      "current": 10,
      "range": "10,23"
    }
    "HMI_weather": 1 //当前的天气代码，比如晴天、阴天
  }
  ...
}
```

设备端处理夏令时的方法步骤

- 如果 dstChange 是空或 NULL，不需处理；
- 检查 dst 的值， 等于 0 时不需处理，等于 1 时将显示时间拨快 1 小时；
- 根据 dstChange 的时间设置定时器，当定时器触发后，dst=1 不需处理，dst=0 将显示时间拨快 1 小时；
- 如果收到了新的夏令时信息，取消掉定时器，重新按 1-3 的步骤处理。

3、资源位或温控器更新（包含绑定、解绑、排序）

```json
{
  "action": "update", //原有的update指令，表示是更新自身的状态
  "deviceid": "100000abcd", //NSPanel的设备id
  "params":
  {
   //如果App设置的是温控器的绑定设备，则有该字段
    "HMI_ATCDevice":
    {
      "ctype": "device/idle",
      "id": "100000abcd",
      "outlet": 0,
      "etype": "hot/cold"
    },
    //如果App设置的是资源组件，则有该字段，数组包含所有的资源位数据
    "HMI_resources": [
      {
        "ctype": "device/scene/group/idle",
        "id": "xxxxxxxxxx",      	//当ctype为device/scene/group时有此项
        "uiid": 10,            		//当ctype为device/group有此项
        "hmi_uiid": 10
      }
      ...//固定8个元素，索引0~7表示资源位1~8
    ]
  }
 //其它数据
  ...
}
```

4、下发绑定温控器信息

```json
{
  "action": "update", //原有的update指令，表示是更新自身的状态
  "deviceid": "100000abcd", //NSPanel的设备id
  "params":
  {
   //如果App设置的是温控器的绑定设备，则有该字段
    "HMI_ATCDevice":
    {
      "ctype": "device",
      "id": "100000abcd",
      "outlet": 0,
      "etype": "hot/cold",
      "precision":1  // 温控精度
    }
  }
 //其它数据
  ...
}
```

通知服务端设备关联的设备列表，服务端将其记录下来，并返回设备的信息。调用示例如下：

```json
{
    "error”: 0,
    "data": {
    "relation": [
      {
        "ctype": "device/scene/group", //关联资源的类型
        "id": "xxxxxxxxxx", //设备/群组/场景的id
        "name": "xxxxxxxxxx", //名称，unicode字符值，比如 &#623F;
        "online": true, //设备是否在线
        "params": {...} //设备状态
      }
      ...
    ]
  }
}
```

后续通过长连接更新设备状态

```json
{
  "action": "relational", //关联设备的指令
  "type": "update/rename/delete" //通知的类型
  "deviceid": "100000abcd", //NSPanel的设备id
  "ctype": "device/scene/group", //关联设备的类型
  "id": "100000efgh", //设备/群组/场景的id
  "name": "xxxxxxxxxx", //名称，unicode字符值，比如 &#623F;温控器不用知道名字
  "online": true, //设备是否在线
  "params":
  {
    "switch":"on",
    "switches":
    [
    	{"switch":"on","outlet":0}
    ]
	} //设备状态
}
```

使用场景：

- APP 端设置温控器绑定设备或者通道；
- APP 端设置温度触发值；
- APP 端开启或关闭温控器联动；

5、APP 端设置温控器绑定设备

```json
{
  "action": "update", //原有的update指令，表示是更新自身的状态
  "deviceid": "100000abcd", //NSPanel的设备id
  "params": {
    //如果App设置的是温控器的绑定设备，则有该字段
    "HMI_ATCDevice": {
      "ctype": "device",
      "id": "100000abcd",
      "etype": "hot",
      "outlet": 0 //多通道设备通道1
    }
  }
}
```

设备端向服务器放回接收成功的指令

```json
{
  "error": 0
}
```

设备端调用 HTTPS API

```json
POST /v2/d/relation
//请求参数
{
  "relation": [
    {
      "ctype": "device", //关联资源的类型
      "id": "100000abcd", //设备/群组/场景的id
    }
  ]
}
```

服务器返回设备信息

```json
//请求参数
{
  "error”: 0,
  "data": {
    "relation": [
      {
        "ctype": "device", //关联资源的类型
        "id": "100000abcd", //设备/群组/场景的id
        "name": "xxxxxxxxxx", //名称，unicode字符值，比如 &#623F;温控器不用知道名字
        "online": true, //设备是否在线
        "params":
        {
        	"switch":"on",
        	"switches":
          [
            {"switch":"on","outlet":0}
          ]
      	} //设备状态
      }
    ]
  }
}
```

后续通过长连接更新设备状态

```json
{
  "action": "relational", //关联设备的指令
  "type": "update" //通知的类型
  "deviceid": "100000abcd", //NSPanel的设备id
  "ctype": "device", //关联资源的类型
  "id": "100000efgh", //设备/群组/场景的id
  "name": "xxxxxxxxxx", //名称，unicode字符值，比如 &#623F;温控器不用知道名字
  "online": true, //设备是否在线
  "params":
  {
    "switch":"on",
    "switches":
    [
    	{"switch":"on","outlet":0}
    ]
	} //设备状态
}
```

6、APP 端设置温度触发值（手动模式）

```json
{
  "action": "update",
  "deviceid": "100000abcd",
  "params": {
    "ATCMode": 0, //固定为0，表示进入手动模式
    "ATCExpect0": 10.5 //更改的预期温度
  }
}
```

7、APP 端设置温度触发值（生效时间段内预期温度值）

说明：自动模式期望温度若为 NULL 则关闭关联设备

```json
{
  "action": "update",
  "deviceid": "100000abcd",
  "params": {
    "ATCExpect1": 10.5 //更改的自动模式预期温度为NULL时关闭关联设备
  }
}
```

8、APP 端设置设备类型

```json
{
  "action": "update",
  "deviceid": "100000abcd",
  "params": {
    "HMI_ATCDevice": {
      "ctype": "device", //关联设备的类型，这里固定为device
      "id": "100000efdc", //关联的设备id
      "etype": "hot" //工作模式
    }
  }
}
```

9、APP 端开启或关闭温控器使能

```json
{
  "action": "update",
  "deviceid": "100000abcd",
  "params": {
    "ATCEnable": 1 //0表示去使能，1表示使能，默认为0
  }
}
```

10、APP 端设置自动模式

```json
{
  "action": "update",
  "deviceid": "100000abcd",
  "params": {
    "ATCMode": 0 //0表示手动模式，1表示自动模式，默认为0
  }
}
```

说明：

- 温控器自动模式的时间判定在服务器端处理，到了时间点由服务器发送“APP 端设置自动模式”内容到设备端，如果温控器当前为手动模式则记录自动模式期望温度值。设备从手动模式切换为自动模式时，设备将应用自动模式期望温度值。

11、下发熄屏时间

```json
{
  "HMI_dimEnable": 0
}
```

12、资源位绑定设备/群组/场景

```json
{
  "action": "update", //原有的update指令，表示是更新自身的状态
  "deviceid": "100000abcd", //NSPanel的设备id
  "params":
  {
   	//如果App设置的是资源组件，则有该字段，数组包含所有的资源位数据
    "HMI_resources": [
      {
        "index": 1,
        "ctype": "device/scene/group",
        "id": "xxxxxxxxxx",
        "uiid": 10,
        "hmi_uiid": 10,
      }
  }
 //其它数据
  ...
}
```

NSPanel 设备端解析 HMI_resources（资源位） 字段，从而知道哪个资源位跟哪个设备创建做了关联。在向长连接返回成功讯息后，调用 HTTPS API ：

```json
POST /v2/d/relation
//请求参数
{
  "relation": [
    {
      "ctype": "device/scene/group", //关联资源的类型
      "id": "xxxxxxxxxx", //设备/群组/场景的id
      "params":"switch|switches|ltype"//需要服务器下发的内容
    }
    ...
  ]
}
```

通知服务端设备关联的设备列表，服务端将其记录下来，并返回设备的信息。调用示例如下：

```json
{
  "error”: 0,
  "data": {
    "relation": [
      {
        "ctype": "device/scene/group", //关联资源的类型
        "id": "xxxxxxxxxx", //设备/群组/场景的id
        "name": "xxxxxxxxxx", //名称，unicode字符值，比如 &#623F;
        "online": true, //设备是否在线
        "params": {...} //设备状态
      }
      ...
    ]
  }
}
```

13、设置温度显示单位

```json
{
  "tempUnit": 0
}
```

14、控制开关

```json
{
  "switches": [
    { "outlet": 0, "switch": "on" },
    { "outlet": 1, "switch": "off" }
  ]
}
```

使用场景：

- APP 端控制设备上的通道开关；

15、设置点动模式

```json
{
 "pulses":
 [
   {"pulse":"off","width":1000,"outlet"0},
   {"pulse":"off","width":2000,"outlet"1}
 ]
}
```

16、设置上电状态

```json
{
  "configure": [
    { "startup": "on", "outlet": 0 },
    { "startup": "off", "outlet": 1 }
  ]
}
```

17、设置互锁

```json
{
  "lock": 0
}
```

18、设置定时

```json
{
  "timers": [
    //定时 -单次
    {
      "mId": "b223610d-ae79-09fe-815e-ab0f299eaa1c",
      "type": "once",
      "at": "2020-08-20T12:11:00.841Z",
      "coolkit_timer_type": "once",
      "enabled": 1,
      "do": {
        "switch": "on",
        "outlet": 0
      }
    },
    //定时 -重复
    {
      "mId": "29383500-532b-4de9-43dd-e16874b70067",
      "type": "repeat",
      "at": "18 8 * * 3,4,5",
      "coolkit_timer_type": "repeat",
      "enabled": 1,
      "do": {
        "switch": "on",
        "outlet": 0
      }
    },
    //延时
    {
      "mId": "14b08e67-f4c3-3ca8-96b9-65a2c9034e2b",
      "type": "once",
      "at": "2020-08-20T12:34:00.852Z",
      "coolkit_timer_type": "delay",
      "enabled": 1,
      "do": {
        "switch": "on",
        "outlet": 0
      },
      "period": "32"
    },
    //循环定时 -交替
    {
      "mId": "5b4c5657-c631-9e04-9799-f5f298229f8c",
      "type": "duration",
      "at": "2020-08-20T11:43:00.150Z 60 30",
      "coolkit_timer_type": "duration",
      "enabled": 1,
      "startDo": {
        "switch": "on",
        "outlet": 0
      },
      "endDo": {
        "switch": "off",
        "outlet": 0
      }
    },
    //循环定时 -重复
    {
      "mId": "5b4c5657-c631-9e04-9799-f5f298229f8c",
      "type": "duration",
      "at": "2020-08-20T11:55:00.150Z 30",
      "coolkit_timer_type": "duration",
      "enabled": 1,
      "do": {
        "switch": "on",
        "outlet": 0
      }
    }
  ]
}
```

19、设置温度校准值

```json
{
  "tempCorrection": 0
}
```

20、设置温度源

```json
{
  "tempsource": 0, //0 NSPanel自身源 1 云端温度源 2 设备主动蓝牙扫描温度
  "sDeviceid": "1000012345"
}
```

使用场景：

- app 设置；
- 设备上线后主动查询（确认固件是否有存入 falsh 中）

注意：

- 删除温度源设备后，服务器需要下发 "tempsource":0 将设备温度源设置回自身
- APP 上切换为 tempsource:1 后，需要将当前设置为云端温度源的设备当前温湿度状态一起发给 nspanel
- nspanel 接收到云端转发的温度源数据后，需要再次上报自身温度值。
- 当服务器转发的温湿度数值 nspanel 非正常数值时，如 uiid 15 恒温恒湿改装件当温度不可用时，会上报 "unavailable" ，此时 nspanel 上报 tempsource 字段为 "unavailable" 。
- 设置 181 作为温度源时，需要设置 181 的低频上报标志；

21、服务端转发温湿度值

```json
// 设置了云端温度源后，云端温度源设备上报的温湿度值，转发到NSPanel上。
// 示例
{
  "action":"relational",
  "deviceid":"10016cec35",
  "userAgent":"device",
  "sequence":"1652240634020",
  "id":"10014a1f15",
  "params":{
   // UIID 1770，7001，1771，7014 温湿度为以下字段
    "temperature": "2558",
    "humidity": "5211",
   // UIID 15，181 温湿度为以下字段
    "currentTemperature":"15",
    "currentHumidity":"50",
    "sensorType":"AM2301"
  },
  "type":"update",
  "ctype":"device",
  "online":true
}

// 示例：1770，7001，1771，7014 只更新温度
{
  "action":"relational",
  "deviceid":"10016cec35",
  "userAgent":"device",
  "sequence":"1652240634020",
  "id":"10014a1f15",
  "params":{
    "temperature": "2558"
  },
  "type":"update",
  "ctype":"device",
  "online":true
}

// 示例：1770，7001，1771，7014 只更新湿度
{
  "action":"relational",
  "deviceid":"10016cec35",
  "userAgent":"device",
  "sequence":"1652240634020",
  "id":"10014a1f15",
  "params":{
    "humidity": "5211"
  },
  "type":"update",
  "ctype":"device",
  "online":true
}

// 示例：1770，7001，1771，7014 更新温湿度
{
  "action":"relational",
  "deviceid":"10016cec35",
  "userAgent":"device",
  "sequence":"1652240634020",
  "id":"10014a1f15",
  "params":{
    "temperature": "2558",
    "humidity": "5211"
  },
  "type":"update",
  "ctype":"device",
  "online":true
}

// 示例：15，181 传感器类型是AM2301 ，上报温湿度
{
  "action":"relational",
  "deviceid":"10016cec35",
  "userAgent":"device",
  "sequence":"1652240634020",
  "id":"10014a1f15",
  "params":{
    "sensorType":"AM2301",
    "currentHumidity":"66",
    "currentTemperature":"30"
  },
  "type":"update",
  "ctype":"device",
  "online":true
}

// 示例：15，181 上报温湿度，温度为小数
{
  "action":"relational",
  "deviceid":"10016cec35",
  "userAgent":"device",
  "sequence":"1652240634020",
  "id":"10014a1f15",
  "params":{
    "currentHumidity":"unavailable",
    "currentTemperature":"34.1"
  },
  "type":"update",
  "ctype":"device",
  "online":true
}

// 示例：15，181 只上报温度，温度为小数
{
  "action":"relational",
  "deviceid":"10016cec35",
  "userAgent":"device",
  "sequence":"1652240634020",
  "id":"10014a1f15",
  "params":{
    "currentTemperature":"34.1"
  },
  "type":"update",
  "ctype":"device",
  "online":true
}

// 示例：15，181 只上报湿度，湿度为小数
{
  "action":"relational",
  "deviceid":"10016cec35",
  "userAgent":"device",
  "sequence":"1652240634020",
  "id":"10014a1f15",
  "params":{
    "currentHumidity":"10.5"
  },
  "type":"update",
  "ctype":"device",
  "online":true
}

// 示例：15，181 传感器异常上报
{
  "action":"relational",
  "deviceid":"10016cec35",
  "userAgent":"device",
  "sequence":"1652240634020",
  "id":"10014a1f15",
  "params":{
    "sensorType":"ERROR_TYPE",
    "currentHumidity":"unavailable",
    "currentTemperature":"unavailable"
  },
  "type":"update",
  "ctype":"device",
  "online":true
}

// 示例：15，181 传感器类型是AM2301 ，上报温湿度，温度为负数
{
  "action":"relational",
  "deviceid":"10016cec35",
  "userAgent":"device",
  "sequence":"1652240634020",
  "id":"10014a1f15",
  "params":{
    "sensorType":"AM2301",
    "currentHumidity":"66",
    "currentTemperature":"-5.5"
  },
  "type":"update",
  "ctype":"device",
  "online":true
}
```

22、设置夜间自动更新

```json
{
  "autoUpgrade": 0
}
```

23、控制关联设备

```json
{
  "action": "relational", //对关联设备的控制指令
  "deviceid": "100000abcd", //NSPanel的设备id

  "id": "100000cdef", //受控设备的id
  "params": {
    "switch": "on",
    "switches": [
      { "switch": "on", "outlet": 0 } //这里的示例表示控制单通道
    ]
  }
}
```

24、控制场景资源

```json
POST  /v2/smartscene2/execute
{
  "action": "relational", //关联设备的指令
  "deviceid": "100000abcd", //NSPanel的设备id

  "id": "100000cdef", //关联场景的id
  "params":
  {
    "switch":"on"
	}
}
```

使用场景：
设备端触发资源位绑定场景；

25、控制单通道开关类群组资源

```json
POST  /v2/d/execute-group

{
  "id":"1000f6a3f2",
	"params":
  {
  	"switch":"on"
  }
}
```

26、控制多通道开关类群组资源

```json
POST  /v2/d/execute-group
{
  "id":"1000f6a3f2",
	"params":
  {
  	"switches":
    [
    	{"switch":"on","outlet":0},
    	{"switch":"on","outlet":1},
    	{"switch":"off","outlet":2},
    	{"switch":"off","outlet":3}
    ]
  }
}
```

使用场景：

设备端操作资源位绑定设备的某一个或多通道开启或关闭；

27、控制双色灯类群组资源

关灯状态下只能开灯

```json
POST  /v2/d/execute-group
{
	"id":"1000f6a3f2",	//群组ID
	"params":
  {
  	"switch":"on"
  }
}
```

工作状态下：

```json
POST /v2/d/execute-group
{
  "id":"1000f6a3f2",	//群组ID
  "params":
  {
    "ltype":"white",
    "white":
    {
    	"br":50,
      "ct":125
    }
	}
}
```

注：原双色灯协议有四种情景模式，为简化适配屏协议，在此统一为 white 模式，使亮度和色温能随屏上调节。

使用场景：

- 设备端操作资源位绑定设备开启或关闭；
- 设备端设置资源位绑定设备的可调参数；

28、控制五色灯类群组资源

关灯状态和白光模式控制与控制双色灯一致。
彩光模式下：

```json
POST  /v2/d/execute-group
{
  "id":"1000f6a3f2",	//群组ID
  "params":
  {
   "ltype":"color",
    "color":
    {
    	"r":255,
      "g":0,
      "b":0,
      "br":1
    }
	}
}
```

使用场景：

- 设备端操作资源位绑定设备开启或关闭；
- 设备端设置资源位绑定设备的可调参数；

29、控制灯带类群组设备

关灯状态下只能开灯

```json
POST  /v2/d/execute-group
{
  "id":"1000f6a3f2",	//群组ID
  "params":
  {
    "switch":"on"
	}
}
```

```json
POST /v2/d/execute-group
{
  "id":"1000f6a3f2",	//群组ID
  "params":
 	{
  	"mode":1,
    "colorR":255,
    "colorB":16,
    "colorG":0,
    "light_type":1
 	}
}
```

注：屏端调节颜色将直接将灯带改变为七彩模式

使用场景：

- 设备端操作资源位绑定设备开启或关闭；
- 设备端设置资源位绑定设备的可调参数；

### UIID135 双色冷暖灯\_支持 2.4G 轻智能

#### 参数说明

| 参数名             | 数据类型          | 取值范围                              | 参数说明                                                     |
| ------------------ | ----------------- | ------------------------------------- | ------------------------------------------------------------ |
| addr               | String            |                                       | 4 字节的设备地址，16 进制格式的全小写字符串，如 "f121ad13"   |
| learnMode          | Number            | 255                                   | 255 设备进入整机学习模式，10s 超时                           |
| remoteCtrlList     | Array             |                                       | 遥控器地址列表,不包括 app 通过长连接发送的遥控器，最多 32 个。 |
| switch             | String            | on,off                                | 开启/关闭                                                    |
| ltype              | String            | white,bright,read,computer,nightLight | 灯的模式,配网完成，色温值为 0，100%亮度                      |
| white              | Object            | 255                                   | 白光模式下设置                                               |
| br                 | Number            | [1, 100]                              | 亮度 默认 100                                                |
| ct                 | Number            | [1, 100]                              | 色温，默认 0                                                 |
| bright             | Object            |                                       | 明亮模式下设置。                                             |
| read               | Object            |                                       | 阅读模式下设置                                               |
| computer           | Object            |                                       | 工作模式下设置                                               |
| nightLight         | Object            |                                       | 夜灯模式下设置                                               |
| mId                | String            |                                       | 定时器唯一标示                                               |
| coolkit_timer_type | once,repeat,delay |                                       | 定时器类型                                                   |
| type               | String            |                                       | 遥控器地址列表,不包括 app 通过长连接发送的遥控器，最多 32 个。 |
| at                 | String            |                                       | 执行动作的时间点，单次定时、延时为 UTC 时间点，重复定时为 cron 表达式。 |
| enabled            | Number            | 0,1                                   | 是否启用该定时器 1 启用，0 禁用。                            |
| do                 | Object            |                                       | 执行动作，支持开关和设置模式，色温、亮度                     |
| period             | String            |                                       | 延时时间，单位分钟                                           |
| fwVersion          | String            |                                       | 固件版本号                                                   |
| remoteCtrl         | String            |                                       | 控制设备的遥控器地址                                         |
| index              | Number            | [0,5]                                 | 轻智能情景序号                                               |
| mac                | String            |                                       | mac 地址                                                     |
| rssi               |                   |                                       | WiFi 信号强度 单位：dBm                                      |
| ColourTempAdjust   | String            | "+"， "-"                             | 色温调节                                                     |
| brightAdjust       | String            | "+"， "-"                             | 亮度调节                                                     |
| slowlyLit          | Number            | [0, 10000]                            | 缓慢亮起时间 单位毫秒，即 0 秒-10 秒；仅支持设置取值 100 毫秒（即 0.1 秒）的整数倍；0 表示关闭该功能 |
| slowlyDimmed       | Number            | [0, 10000]                            | 缓慢关灯时间                                                 |
| startup            | String            | on,stay,off                           | 通道的上电保持状态 on 上电开 stay 上电恢复断电前状态 off 上电关 |

#### 控制指令

1、APP 下发遥控器地址

```json
{
  "addr": "f121ad13"
}
```

使用场景：

- app 在添加完成设备后，需要发送在 app 上生成的地址给设备。（参考 app 下发 timeZone 字段）即用户无感知的情况下完成了设备与 app 的整机学习。

注意：

- 若 app 多次下发，设备以最后一次获取到的 addr 为准。即若 app 先下发了 "addr": "f121ad13"，然后又下发了 "addr": "f121ad17"，则设备使用 f121ad17 覆盖掉 f121ad13。

2、设备进入学习模式

```json
{
  "learnMode": 255
}
```

3、设备上报遥控器列表，APP 删除遥控器

```json
{
  "remoteCtrlList": ["f121ad14ff", "f121ad1501", "f121ad1502"]
}
```

使用场景：

- 设备上报学习到的遥控器；
- APP 删除某一遥控器时，更新列表下发给设备，如删除"f121ad1502"遥控器

4、设备开启关闭

```json
{
  "switch": "on"
}
```

使用场景：

- APP 设置设备状态；
- 设备上报设备状态，设备连接上服务器时同步状态；

5、白光模式下，调节亮度、色温

```json
{
  "ltype": "white",
  "white": {
    "br": 50,
    "ct": 80
  }
}
```

使用场景：

- APP 设置设备状态；
- 设备上报设备状态，设备连接上服务器时同步状态；

6、设置情景模式

```json
//明亮：亮度值100，色温值100
{
  "switch":"on",
  "ltype" : "bright",
  "bright" : {
    "br" : 100,
    "ct" : 100
  }
}
//阅读：亮度值50，色温值0
{
  "switch":"on",
  "ltype" : "read",
  "read" : {
    "br" : 50,
    "ct" : 0
  }
}
//工作：亮度值20，色温值100
{
  "switch":"on",
  "ltype" : "computer",
  "computer" : {
    "br" : 20,
    "ct" : 100
  }
}
//夜灯：亮度值5，色温值0
{
  "switch":"on",
  "ltype" : "nightLight",
  "nightLight" : {
    "br" : 5,
    "ct" : 0
  }
}
```

7、设置定时器

```json
{
  "timers": [
    {
      //延时
      "mId": "6bdfc96c-0962-ad75-c430-15d9eb351154",
      "type": "once",
      "at": "2020-12-16T18:37:00.761Z",
      "coolkit_timer_type": "delay",
      "enabled": 1,
      "do": {
        "switch": "on"
      },
      "period": "390"
    },
    {
      //单次定时，打开灯，模式设为白光模式，亮度50%，色温值100
      "mId": "c5601da9-aa5f-0946-a1fd-2a2a35daf59a",
      "type": "once",
      "at": "2020-12-16T13:11:00.974Z",
      "coolkit_timer_type": "once",
      "enabled": 1,
      "do": {
        "switch": "on",
        "ltype": "white",
        "white": {
          "br": 50,
          "ct": 100
        }
      }
    },
    {
      //重复定时，打开灯，模式设置为夜灯模式
      "mId": "870262af-4f9c-7d23-318b-f65d5a79d3eb",
      "type": "repeat",
      "at": "6 15 * * 0,1,2,3,4,5,6",
      "coolkit_timer_type": "repeat",
      "enabled": 1,
      "do": {
        "switch": "on",
        "ltype": "nightLight",
        "nightLight": {
          "br": 5,
          "ct": 0
        }
      }
    }
  ]
}
```

8、设备上报固件版本

```json
{
  "fwVersion": "3.4.1"
}
```

使用场景：

- 设备上报状态，固件版本只需要在连上服务器时上报一次即可

9、本地遥控器控制设备同步状态

```json
{
  "remoteCtrl": "f121ad14"
}
```

10、设置轻智能情景

```json
{
  "lightScenes": [
    {
      "index": 1,
      "switch": "on",
      "ltype": "white",
      "white": {
        "br": 50,
        "ct": 80
      }
    },
    {
      "index": 4,
      "switch": "on"
    },
    {
      "index": 5,
      "switch": "off"
    }
  ]
}
```

使用场景：

- APP 上设置轻智能情景

注意：

- APP 新增、修改、删除轻智能情景将整个 lightScenes 字段下发；

11、设备上报 WiFi 信号强度、mac 地址

```json
// 上报mac地址、WiFi信号强度
{
  "mac": "1234",
  "rssi":50
}
// WiFi信号强度变化
{
  "rssi":60
}
```

使用场景：

- 设备上报状态。mac 地址只需要在连上服务器时上报一次即可；

注意：

- WiFi 信号强度上报频率需要设备做限制。

12、亮度加减调节

```json
{
  "brightAdjust": "+/-"
}
```

13、色温加减调节

```json
{
  "ColourTempAdjust": "+/-"
}
```

14、缓启设置

```json
// 示例：设置缓启时间为1秒
{
  "slowlyLit": 1000
}
```

15、缓灭设置

```json
// 示例：设置缓灭时间为1秒
{
  "slowlyDimmed": 1000
}
```

16、通电反应

```json
// 示例：设置通电反应为上电关
{
  "startup": "off"
}
```

### UIID136 RGB 五色灯\_支持 2.4G 轻智能

#### 控制指令

在 UIID135 双色冷暖灯\_支持 2.4G 轻智能的基础上增加彩光模式

1、彩光模式设置

```json
{
  "ltype": "color",
  "color": {
    "r": 255,
    "g": 0,
    "b": 0,
    "br": 50
  }
}
```

### UIID137 律动灯带-蓝牙版

#### 参数说明

| 参数名             | 数据类型          | 取值范围 | 参数说明                                                     |
| ------------------ | ----------------- | -------- | ------------------------------------------------------------ |
| switch             | String            | on,off   | 开关状态                                                     |
| mId                | String            |          | 定时器唯一标示                                               |
| coolkit_timer_type | once,repeat,delay |          | 定时器类型                                                   |
| type               | String            |          | 遥控器地址列表,不包括 app 通过长连接发送的遥控器，最多 32 个。 |
| at                 | String            |          | 执行动作的时间点，单次定时、延时为 UTC 时间点，重复定时为 cron 表达式。 |
| enabled            | Number            | 0,1      | 是否启用该定时器 1 启用，0 禁用。                            |
| do                 | Object            |          | 执行动作，支持开关和设置模式，色温、亮度                     |
| period             | String            |          | 延时时间                                                     |
| mode               | Number            | [0,26]   | 灯带模式 0 色环模式；1 色盘模式； 2 CCT 模式； 3 W 模式；4 律动模式；5 DIY 模式;6-26 共 21 个推荐情景模式 |
| bright             | Number            | [1,100]  | 灯带亮度值 亮度和颜色需要一起下发                            |
| colorR             | Number            | [0,255]  | 红色通道值                                                   |
| colorG             | Number            | [0,255]  | 绿色通道值                                                   |
| colorB             | Number            | [0,255]  | 蓝色通道值                                                   |
| colorTemp          | Number            |          | 色温值                                                       |
| rhythmMode         | Number            | [0,3]    | 律动模式下的子模式 0 经典；1 柔和； 2 动感； 3 迪斯科        |
| rhythmSensitive    | Number            | [0,100]  | 灵敏度                                                       |
| diySpeed           | Number            | [0,100]  | 灯带在不同颜色之间的变化快慢速度                             |
| diyBright          | Number            | [0,100]  | 亮度                                                         |
| diyMode            | Number            | [0,100]  | DIY 模式下的子模式 0 频闪， 1 跳变， 2 渐变， 3 流光         |
| diyRGB             | Array             | [0,3]    | 灯光颜色变化列表 [100, 100, 100] 分别为 R，G，B 的值，最大支持 7 组 |
| speed06            | Number            | [0,100]  | 灯带模式为 mode=6 的变化快慢速度（mode=7 对应 speed07，以此类推） |
| bright06           | Number            | [1,100]  | 灯带模式为 mode=6 的灯带亮度（mode=7 对应 bright07，以此类推） |
| lineSequence       |                   |          | 线序调整                                                     |
| 1                  | String            | r,g,b    | 线 1                                                         |
| 2                  | String            | r,g,b    | 线 2                                                         |
| 3                  | String            | r,g,b    | 线 3                                                         |

#### 控制指令

1、设置灯带开关状态

```json
{
  "switch": "on"
}
```

2、设置定时/延时

```json
{
  "timers" : [
    {//重复定时
      "mId" : "c7a360b6-85a5-9a13-9215-7f0ed0bc2ee3",
      "type" : "repeat",
      "at" : "59 6 * * 0,1,2,3,4,5,6",
      "coolkit_timer_type" : "repeat",
      "enabled" : 1,
      "do" : {
        "switch" : "off"
      }
    },
    {//单次定时，开灯并设置亮度
      "mId" : "cdabf776-4d3c-f7e3-bbfa-d3c8fb088cd8",
      "type" : "once",
      "at" : "2020-08-03T11:57:00.502Z",
      "coolkit_timer_type" : "once",
      "enabled" : 1,
      "do" : {
        "switch" : "on",
        "mode":3,
        "bright": 100,
      }
    },
    {//延时，开灯并设置RGB值
      "mId":"12262e22-3537-1dc5-58c3-6dd51e447450",
      "type":"once",
      "at":"2020-11-26T09:32:00.459Z",
      "coolkit_timer_type":"delay",
      "enabled":1,
      "do":{
        "switch":"on",
        "mode":0/1,
        "colorR": 100,
        "colorG": 100,
        "colorB": 100
      },
      "period":"30"
    }
  ]
}
```

3、彩光（色环、色盘）模式下的设置

```json
// 示例：切换为色环模式并将RGB值设置为(255,255,255)，亮度设置为50
// 亮度和颜色需要一起下发
{
  "mode":0,
  "colorR": 255,
  "colorG": 255,
  "colorB": 255,
  "bright": 50
}

// 示例：关灯状态下打开设备并切换为色盘模式并将RGB值设置为(255,255,255)，亮度设置为50
{
  "switch":"on",
  "mode":1,
  "colorR": 255,
  "colorG": 255,
  "colorB": 255,
  "bright": 50
}
```

使用场景:

- APP 改变设备状态；
- 设备通过其他方式控制设备，设备模式发生变化上报状态；

4、冷暖（CCT）模式下的设置

```json
// 示例：CCT模式下色温设置为100，亮度设置为100
// 亮度和色温需要一起下发
{
  "mode":2,
  "colorTemp": 100,
  "bright": 100
}

//示例：关灯状态下开灯并将模式调为CCT，亮度设置为100，色温设置为50
{
  "mode":2,
  "bright": 100,
  "colorTemp": 50,
  "switch":"on"
}

```

使用场景：

- APP 改变设备状态；
- 设备通过其他方式控制设备，设备状态发生变化时上报；

5、白光（W）模式下的设置

```json
//示例：切换为白光模式，亮度设置为100
{
  "mode":3,
  "bright": 100
}

//示例：关灯状态下开灯并切换为白光模式，亮度设置为100
{
  "mode":3,
  "bright": 100,
  "switch":"on"
}
```

使用场景

- APP 改变设备状态；
- 设备通过其他方式控制设备，设备状态发生变化时上报；

6、律动模式下的设置

```json
// 示例：设备切换为律动模式：动感，灵敏度50
{
  "mode":4,
  "rhythmMode":2,
  "rhythmSensitive":50
}

//示例：支持关灯状态下开灯并设置为律动
{
  "mode":4,
  "rhythmMode":2,
  "rhythmSensitive":50,
  "switch":"on"
}
```

7、DIY 模式下的设置

```json
// 示例：设置为DIY模式，亮度50，速度50，跳变
{
  "mode":5,
  "diySpeed":50,
  "diyBright":50,
  "diyMode": 1,
  "diyRGB": [
    [100, 100, 100],
    [200, 200, 200],
    [150, 150, 150]
  ]
}


// 示例：关灯状态下开灯并设置为DIY模式
{
  "mode":5,
  "diySpeed":50,
  "diyBright":50,
  "diyMode": 1,
  "diyRGB": [
    [100, 100, 100],
    [200, 200, 200],
    [150, 150, 150]
  ],
  "switch":"on"
}
```

8、其他模式下的设置

```json
// 示例：设置为模式6，速度60，亮度60
{
    "mode":6,
    "speed06": 60,
    "bright06": 60
}

// 示例：关灯状态下开灯并设置为其他模式
{
  "mode":6,
  "speed06": 60,
  "bright06": 60,
  "switch":"on"
}
```

9、线序调整

```json
{
  "lineSequence": {
    "1": "r",
    "2": "g",
    "3": "b"
  }
}
```

使用场景：

- APP 设置线序；

### UIID138 单通道插座\_支持 2.4G 轻智能

#### 参数说明

| 参数名             | 数据类型          | 取值范围        | 参数说明                                                     |
| ------------------ | ----------------- | --------------- | ------------------------------------------------------------ |
| addr               | String            |                 | 4 字节的设备地址，16 进制格式的全小写字符串，如 "f121ad13"   |
| learnMode          | Number            | [0,255]         | 对应通道进入学习模式。设备进入学习模式。0 表示通道一进入学习状态，0-254 依次类推；255，即 0xff 为进入整机学习状态。10s 超时。APP 交互上只有通道一至通道四进入学习状态。当某个通道进入学习状态时，学习到了轻智能遥控器，那该轻智能遥控器挂在该通道下，虽然该情景遥控器对整机生效。 |
| remoteCtrlList     | Array             |                 | 设备添加的遥控器列表                                         |
| outlet             | Number            | [0,3]           | 通道号                                                       |
| switch             | String            | on,off          | 通道开关                                                     |
| configure          | Array             |                 | configure 各通道的上电状态设置                               |
| startup            | String            | on,stay,off     | 通道的上电保持状态,on 上电开，stay 上电保持，off 上电关      |
| mId                | String            |                 | 定时器唯一标示                                               |
| coolkit_timer_type | once,repeat,delay |                 | 定时器类型                                                   |
| type               | String            |                 | 遥控器地址列表,不包括 app 通过长连接发送的遥控器，最多 32 个。 |
| at                 | String            |                 | 执行动作的时间点，单次定时、延时为 UTC 时间点，重复定时为 cron 表达式。 |
| enabled            | Number            | 0,1             | 是否启用该定时器 1 启用，0 禁用。                            |
| do                 | Object            |                 | 执行动作，支持开关和设置模式，色温、亮度                     |
| period             | String            |                 | 延时时间                                                     |
| startDo            | Object            |                 | 循环定时开始时间执行动作                                     |
| endDo              | Object            |                 | 循环定时循环时间到时执行动作                                 |
| sledOnline         | String            | on,off          | 网络指示灯                                                   |
| pulses             | Array             |                 | 点动设置列表                                                 |
| width              | Number            | [500,3599500]   | 点动时间长短                                                 |
| pulse              | String            | on,off          | 该通道点动功能开关                                           |
| locks              | Array             |                 | 互锁设置列表                                                 |
| enabled            | Array             | 0,1             | 是否开启该互锁设置                                           |
| fwVersion          | String            |                 | 固件版本号                                                   |
| rssi               | Number            |                 | wifi 信号强度                                                |
| remoteCtrl         | String            |                 | 控制设备的遥控器地址+通道号                                  |
| bssid              | String            |                 | 如 'bssid': '20:76:93:3b:75:3c'                              |
| ssid               | String            |                 | 设备连接的 ssid                                              |
| password           | String            |                 | WiFi 的密码，在切换 wifi 的时候才需要填写，不需要上报。加密内容注意：如果连接的是没有密码的 ssid，那么这个字段就是空字符串或无该字段；密码不存云端，不打日志 |
| lightScenes_x      | Arrary            | x 取值范围[0,3] | 轻智能情景设置项                                             |
| index              | Number            | [0,5]           | 情景编号                                                     |
| learnMode433       | Number            | [0,254]         | 对应通道进入 433 学习模式                                    |
| remoteCtrlList433  | Array             |                 | 设备添加的 433 遥控器列表                                    |
| backlight          | String            | on,off          | 背光指示灯                                                   |

#### 控制指令

1、APP 下发遥控器地址

```json
{
  "addr": "f121ad13"
}
```

使用场景：

- app 在添加完成设备后，需要发送在 app 上生成的地址给设备。（参考 app 下发 timeZone 字段）即用户无感知的情况下完成了设备与 app 的整机学习。

注意：

- 若 app 多次下发，设备以最后一次获取到的 addr 为准。即若 app 先下发了 "addr": "f121ad13"，然后又下发了 "addr": "f121ad17"，则设备使用 f121ad17 覆盖掉 f121ad13。

2、设备进入学习模式

```json
{
  "learnMode": 255
}
```

3、设备上报遥控器列表，APP 删除遥控器

```json
{
  "remoteCtrlList": ["f121ad14ff", "f121ad1501", "f121ad1502"]
}
```

使用场景：

- 设备上报学习到的遥控器；
- APP 删除某一遥控器时，更新列表下发给设备，如删除"f121ad1502"遥控器

4、设置通道开关

```json
// 示例： 设置通道一打开， 通道二、三、四 关闭
{
  "switches": [
    {
      "switch": "on",
      "outlet": 0
    }
  ]
}
```

5、设置通电反应（上电状态）

```json
// 示例：设置通道一 上电状态为打开，stay保持断电前状态，off为关闭
{
  "configure": [
    {
      "outlet": 0,
      "startup": "on"
    }
  ]
}
```

6、设置定时/延时

```json
//多通道为例
{
  "timers": [
    {
      //重复定时，通道一开，通道二、三、四关
      "mId": "c7a360b6-85a5-9a13-9215-7f0ed0bc2ee3",
      "type": "repeat",
      "at": "59 6 * * 0,1,2,3,4,5,6",
      "coolkit_timer_type": "repeat",
      "enabled": 1,
      "do": {
        "switches": [
          {
            "switch": "on",
            "outlet": 0
          },
          {
            "switch": "off",
            "outlet": 1
          },
          {
            "switch": "off",
            "outlet": 2
          },
          {
            "switch": "off",
            "outlet": 3
          }
        ]
      }
    },
    {
      //单次定时，通道一开，通道四关，通道二、三保持
      "mId": "cdabf776-4d3c-f7e3-bbfa-d3c8fb088cd8",
      "type": "once",
      "at": "2020-08-03T11:57:00.502Z",
      "coolkit_timer_type": "once",
      "enabled": 1,
      "do": {
        "switches": [
          {
            "switch": "on",
            "outlet": 0
          },
          {
            "switch": "off",
            "outlet": 3
          }
        ]
      }
    },
    {
      //延时，通道一打开
      "mId": "12262e22-3537-1dc5-58c3-6dd51e447450",
      "type": "once",
      "at": "2020-11-26T09:32:00.459Z",
      "coolkit_timer_type": "delay",
      "enabled": 1,
      "do": {
        "switches": [
          {
            "switch": "on",
            "outlet": 0
          }
        ]
      },
      "period": "30"
    },
    {
      //循环定时-重复 开始时间到开启设备通道二，每30分钟执行一次打开通道二
      "mId": "fcfd83d5-4c8c-50c6-73e8-aeadeac5abdc",
      "type": "duration",
      "at": "2020-12-16T15:23:00.140Z 30",
      "coolkit_timer_type": "duration",
      "enabled": 1,
      "do": {
        "switch": "on",
        "outlet": 1
      }
    },
    {
      //循环定时-交替 每60分钟一个周期，开始时间到关闭设备通道二，30分钟后开启设备通道二，30分钟后关闭设备通道二...
      "mId": "fcfd83d5-4c8c-50c6-73e8-aeadeac5abdc",
      "type": "duration",
      "at": "2020-12-16T15:23:00.140Z 60 30",
      "coolkit_timer_type": "duration",
      "enabled": 1,
      "startDo": {
        "switch": "off",
        "outlet": 1
      },
      "endDo": {
        "switch": "on",
        "outlet": 1
      }
    }
  ]
}
```

7、开启关闭网络指示灯

```json
// 示例：设置网络指示灯状态为打开
{
  "sledOnline": "on"
}
```

8、设置点动

```json
// 点动开启，打开开关2s后关闭；
{
  "pulses": [
    {
      "pulse": "on",
      "switch": "off",
      "width": 2000,
      "outlet": 0
    }
  ]
}
```

9、设置互锁

```json
//多通道设置互锁
{
  "locks": [
    {
      "enabled": 0,
      "outlets": [0, 1]
    },
    {
      "enabled": 1,
      "outlets": [2, 3]
    }
  ]
}
```

10、设备上报版本、信号强度

```json
{
  "fwVersion": "3.4.1",
  "rssi": -46
}
```

11、本地遥控器控制设备同步状态

```json
{
  "remoteCtrl": "f121ad1400"
}
```

12、设备上报当前连接 WiFi 信息

```json
{
  "ssid": "ck_test",
  "bssid": "12:1F:33:96:EF:bb"
}
```

13、切换设备 WiFi

```json
{
  "ssid": "ck_test",
  "password": "abc123456"
}
```

14、设置轻智能情景

```json
{
  "lightScenes_0": [
    {
      "index": 0,
      "switch": "on"
    },
    {
      "index": 5,
      "switch": "on"
    }
  ],
  "lightScenes_1": [],
  "lightScenes_2": [],
  "lightScenes_3": []
}
```

15、设备进入 433 的学习模式

```json
{
  "learnMode433": 0
}
```

16、设备上报 433 遥控器列表，APP 删除 433 遥控器

```json
{
  "remoteCtrlList433": [
    {
      "outlet": 0,
      "addr": ["f121ad1400", "f121ad1501"]
    }
  ]
}
```

17、背光指示灯

```json
// 示例：开启背光指示灯
{
  "backlight":"on"
}
// 示例：关闭背光指示灯
{
  "backlight":"off"
}
```

### UIID139 双通道插座\_支持 2.4G 轻智能

在 UIID138 单通道插座\_支持 2.4G 轻智能的基础上增加一路通道：

比如打开单通道是：

```json
{
  "switches": [
    {
      "outlet": 0,
      "switch": "on"
    }
  ]
}
```

打开双通道是：

```json
{
  "switches": [
    {
      "outlet": 0,
      "switch": "on"
    },
    {
      "outlet": 1,
      "switch": "on"
    }
  ]
}
```

### UIID140 三通道插座\_支持 2.4G 轻智能

在 UIID138 单通道插座\_支持 2.4G 轻智能的基础上增加两路通道：

比如打开单通道是：

```json
{
  "switches": [
    {
      "outlet": 0,
      "switch": "on"
    }
  ]
}
```

打开三通道是：

```json
{
    "switches": [
        {
            "outlet": 0,
            "switch": "on"
        },
        {
            "outlet": 1,
            "switch": "on"
        }
       ，
        {
            "outlet": 2,
            "switch": "on"
        }

    ]
}
```

### UIID141 四通道插座\_支持 2.4G 轻智能

在 UIID138 单通道插座\_支持 2.4G 轻智能的基础上增加三路通道：

比如打开单通道是：

```json
{
  "switches": [
    {
      "outlet": 0,
      "switch": "on"
    }
  ]
}
```

打开四通道是：

```json
{
  "switches": [
    {
      "outlet": 0,
      "switch": "on"
    },
    {
      "outlet": 1,
      "switch": "on"
    },
    {
      "outlet": 3,
      "switch": "on"
    },
    {
      "outlet": 3,
      "switch": "on"
    }
  ]
}
```